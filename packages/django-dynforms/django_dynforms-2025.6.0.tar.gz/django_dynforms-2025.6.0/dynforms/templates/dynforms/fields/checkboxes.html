{% load markup %}
{% load dynforms %}
<div class="controls {% if 'inline' in field.options %}controls-inline{% endif %} {{repeatable}}" id="{{field.name}}-controls">
	{% for choice in field|group_choices:data|randomize_choices:field %}
        <div class="form-check">
            <input name="{{field.name}}" id="{{field.name}}_{{forloop.counter}}" class="form-check-input"
       	        value="{{choice.value}}" {% if choice.selected %}checked{% endif %}
       	        type="checkbox"
            >
       	    <label for="{{field.name}}_{{forloop.counter}}" class="form-check-label">{{choice.label}}</label>
        </div>
	{% endfor %}
	{% if "other" in field.options %}
        <div class="input-group">
            <div class="input-group-text">
                <input class="form-check-input mt-0" id="{{field.name}}_other" name="{{field.name}}" value="{{field.other_choice}}" aria-label="Other" type="checkbox" {% if field.other_choice in data %}checked{% endif %}>
            </div>
            <input id="{{field.name}}_othersrc"  type="text" placeholder="Other" value="{{field.other_choice}}" class="form-control" aria-label="Other Description">
        </div>
	{% endif %}
</div>
<script>
$("#{{field.name}}_othersrc").change(function(){
	$("#{{field.name}}_other").val($(this).val());
	if ($(this).val()) {
		$("#{{field.name}}_other").attr("checked", "checked");
	} else {
		$("#{{field.name}}_other").removeAttr("checked");
	}
	$("#{{field.name}}_other").change();
});
</script>
