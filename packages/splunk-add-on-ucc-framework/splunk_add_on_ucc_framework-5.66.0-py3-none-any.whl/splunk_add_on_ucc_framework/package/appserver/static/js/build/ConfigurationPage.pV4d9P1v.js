import{l as a,C as v,m as w,p as e,q as x,_ as N,o as _,x as B,y as L,z as b,U as q,W as I,t as y,k as M,B as F,n as $,R as z}from"./entry_page.js";import{P as V,B as W,l as G,k as H,T as Q,E as Y,h as J,j as K,b as S,M as X,m as Z,u as ee,s as ne,a as te,d as oe,C as j,e as se,S as ae,f as re,g as P,i as ie}from"./usePlatform.DvzM-Doa.js";import{P as T,L as le,E as ue}from"./SearchJob.BI5Gcps7.js";import{r as ce}from"./ArrowBroadUnderbarDown.DmybOXDC.js";const de=({tab:n})=>{const d=a.useContext(v),[o,m]=a.useState(!0),l=a.useRef(null),u=w().meta.name,p=()=>new Promise(r=>{const c=d?.[n?.customTab?.src];if(c?.type==="tab"){const s=c.component;r(s)}else n.customTab?.type==="external"?N(()=>import(`${_()}/custom/${n.customTab.src}.js`),[],import.meta.url).then(s=>{const i=s.default;r(i)}):require([`app/${u}/js/build/custom/${n.customTab.src}`],s=>{r(s)})});return a.useEffect(()=>{p().then(r=>{l.current&&(new r(n,l.current).render(),m(!1))})},[]),e.jsxs(e.Fragment,{children:[o&&x._("Loading..."),e.jsx("div",{ref:l,style:{visibility:o?"hidden":"visible"}})]})},me=y.div`
    margin-left: 270px !important;
    width: 150px;
`;function D({serviceName:n}){const d=a.useRef(),[o,m]=a.useState(null),[l,g]=a.useState(!1),[u,p]=a.useState({});a.useEffect(()=>{const s=new AbortController;return B({endpointUrl:L(`settings/${encodeURIComponent(n)}`),handleError:!0,signal:s.signal,callbackOnError:i=>{s.signal.aborted||m(i)}}).catch(i=>{if(s.signal.aborted)return null;throw i}).then(i=>{i&&p(i.entry[0].content)}),()=>{s.abort()}},[n]);const r=s=>{d.current.handleSubmit(s)},c=s=>{g(s)};if(o)throw o;return Object.keys(u).length?e.jsxs(e.Fragment,{children:[e.jsx(v.Consumer,{children:s=>e.jsx(V.Consumer,{children:i=>e.jsx(W,{ref:d,page:b,stanzaName:n,serviceName:"settings",mode:G,currentServiceState:u,handleFormSubmit:c,pageContext:i,customComponentContext:s})})}),e.jsx(me,{children:e.jsx(q,{className:"saveBtn",label:x._("Save"),onClick:r,loading:l})})]}):e.jsx(I,{size:"medium"})}D.propTypes={serviceName:T.string.isRequired};function A({selectedTab:n,updateIsPageOpen:d}){const[o,m]=a.useState({open:!1}),l=n.style===H;a.useEffect(()=>{l&&d(!!o.open)},[d,l,o]);const g=()=>{m({...o,open:!0,mode:S,formLabel:n.formTitle?`Add ${n.formTitle}`:`Add ${n.title}`})},u=()=>{m({...o,open:!1})},p=()=>e.jsx(K,{page:b,open:o.open,handleRequestClose:u,returnFocus:()=>{},serviceName:n.name,mode:S,formLabel:o.formLabel}),r=(h,E)=>{const f=n?.formTitle||n.title;m({...o,open:!0,stanzaName:h.name,formLabel:E===X?`Clone ${f}`:`Update ${f}`,mode:E})},c=()=>{m({...o,open:!1})},s=()=>e.jsx(Y,{open:o.open,handleRequestClose:c,serviceName:n.name,stanzaName:o.stanzaName,mode:o.mode,formLabel:o.formLabel,page:b}),i=()=>e.jsx("div",{style:l&&o.open?{display:"none"}:{display:"block"},children:e.jsx(J,{page:b,serviceName:n.name,handleRequestModalOpen:()=>g(),handleOpenPageStyleDialog:r})});return e.jsxs(Q,{value:null,children:[l&&o.open&&s(),i(),!l&&o.open&&p()]})}A.propTypes={selectedTab:T.object,updateIsPageOpen:T.func};const pe=a.memo(A);var fe=ce();const ge=M(fe);function Ce(n){return e.jsx(F,{target:"_blank",to:n.fileUrl,download:n.fileNameAfterDownload,"data-test":"downloadButton",icon:e.jsx(ge,{}),children:n.children})}const xe=_().replace("js/build","openapi.json");function he(){return e.jsx(Ce,{fileUrl:xe,fileNameAfterDownload:"openapi.json",children:"OpenAPI.json"})}const be=y(Z.Typography)`
    font-size: 0.8em;
`,je=()=>{const n=w();if(n?.meta?.hideUCCVersion)return null;const d=n?.meta?._uccVersion??null;return e.jsxs(be,{as:"span",title:"Splunk Add-On UCC framework is a framework to generate UI-based Splunk add-ons. It includes UI, REST handlers, Modular inputs, OAuth and Alert action templates.","data-test":"ucc-credit",children:["Made with"," ",e.jsx(le,{to:"https://splunk.github.io/addonfactory-ucc-generator/",openInNewContext:!0,children:"UCC"})," ",d]})},ye=y.div`
    display: inline-flex;
    align-items: center;
    justify-content: end;
    flex-wrap: wrap;
    gap: 0.4rem;
`,Ee=y(j.Row)`
    padding: 5px 0px;

    .dropdown {
        text-align: right;
    }

    .input_button {
        text-align: right;
        margin-right: 0px;
    }
`;function ve(){const n=w();$(n.pages.configuration,"Configuration page not found in global config");const{title:d,description:o,subDescription:m,tabs:l}=n.pages.configuration,g=ee(n,"configuration"),u=l.filter(t=>!ne(t.hideForPlatform,g)),p=a.useMemo(()=>u.map(t=>t.name),[u]),r=a.useRef(!1),[c,s]=a.useState(u[0].name),[i,h]=a.useState(!1),f=te()?.get("tab");a.useEffect(()=>{f&&p.includes(f)&&f!==c&&s(f)},[f,p,c]),a.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]);const O=a.useCallback((t,{selectedTabId:C})=>{r.current&&C&&(s(C),h(!1))},[]),R=t=>{r.current&&h(t)},k=t=>z.createElement(de,{tab:t}),U=t=>{let C;return t?.customTab?C=k(t):C=t?.table?e.jsx(pe,{selectedTab:t,updateIsPageOpen:R},t.name):e.jsx(D,{serviceName:t.name},t.name),e.jsx("div",{style:t.name!==c?{display:"none"}:{display:"block"},id:`${t.name}Tab`,children:C},t.name)};return e.jsx(ue,{children:e.jsxs(oe,{platform:g,children:[e.jsxs("div",{style:i?{display:"none"}:{display:"block"},children:[e.jsx(j,{gutter:8,children:e.jsxs(Ee,{children:[e.jsxs(j.Column,{span:9,children:[e.jsx(se,{children:x._(d)}),e.jsx(ae,{children:x._(o||"")}),e.jsx(re,{text:m?.text||"",links:m?.links})]}),e.jsx(j.Column,{span:3,style:{textAlignLast:"right"},children:e.jsxs(ye,{children:[e.jsx(je,{}),e.jsx(he,{})]})})]})}),e.jsx(P,{activeTabId:c,onChange:O,children:u.map(t=>e.jsx(P.Tab,{label:x._(t.title),tabId:t.name},t.name))})]}),u.map(t=>U(t)),e.jsx(ie,{position:"top-right"})]})})}export{ve as default};
//# sourceMappingURL=ConfigurationPage.pV4d9P1v.js.map
