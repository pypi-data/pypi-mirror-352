{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Schema for output measurement output file",
  "description": "common structure for all measurements",
  "type": "array",
  "items": {
    "type": "array",
    "items": {
      "type": "object",
      "properties": {
        "serialNumber": {
          "description": "Chip serial number",
          "type": "string",
          "oneOf": [
            {
              "pattern": "^20UP[IGB][A-Z][A-Z0-9][0-9]{7}$"
            },
            {
              "pattern": "^dummy_chip[1234]$"
            }
          ]
        },
        "testType": {
          "description": "Test type",
          "enum": [
            "ADC_CALIBRATION",
            "ANALOG_READBACK",
            "CUTTER_PCB_TAB",
            "DATA_TRANSMISSION",
            "INJECTION_CAPACITANCE",
            "IV_MEASURE",
            "LONG_TERM_STABILITY_DCS",
            "LP_MODE",
            "OVERVOLTAGE_PROTECTION",
            "SLDO",
            "UNDERSHUNT_PROTECTION",
            "VCAL_CALIBRATION"
          ]
        },
        "subtestType": {
          "description": "Subtest type",
          "enum": [
            "",
            "AR_REGISTER",
            "AR_TEMP",
            "AR_VDD",
            "AR_VMEAS",
            "VCAL_HIGH",
            "VCAL_HIGH_SMALL_RANGE",
            "VCAL_MED",
            "VCAL_MED_SMALL_RANGE",
            "DT_EYE",
            "DT_MERGE"
          ]
        },
        "results": {
          "description": "Results of measurement",
          "type": "object",
          "properties": {
            "Measurements": {
              "description": "Measurement data",
              "type": "object",
              "properties": {}
            },
            "Metadata": {},
            "DCSdata": {}
          },
          "required": ["Measurements", "Metadata"]
        }
      },
      "required": ["serialNumber", "testType", "subtestType", "results"],
      "oneOf": [
        {
          "$ref": "#/$defs/measurements/adc_calibration"
        },
        {
          "$ref": "#/$defs/measurements/analog_readback"
        },
        {
          "$ref": "#/$defs/measurements/cutter_pcb_tab"
        },
        {
          "$ref": "#/$defs/measurements/data_transmission"
        },
        {
          "$ref": "#/$defs/measurements/injection_capacitance"
        },
        {
          "$ref": "#/$defs/measurements/iv_measure"
        },
        {
          "$ref": "#/$defs/measurements/long_term_stability_dcs"
        },
        {
          "$ref": "#/$defs/measurements/lp_mode"
        },
        {
          "$ref": "#/$defs/measurements/overvoltage_protection"
        },
        {
          "$ref": "#/$defs/measurements/sldo"
        },
        {
          "$ref": "#/$defs/measurements/undershunt_protection"
        },
        {
          "$ref": "#/$defs/measurements/vcal_calibration"
        }
      ]
    }
  },
  "$defs": {
    "basevariable": {
      "description": "structure for a measured variable",
      "type": "object",
      "properties": {
        "X": {
          "description": "Plotted in X-axis or not",
          "type": "boolean"
        },
        "Unit": {
          "description": "Unit",
          "type": "string"
        },
        "Values": {
          "type": "array",
          "items": {
            "type": "number"
          }
        }
      }
    },
    "variable": {
      "$ref": "#/$defs/basevariable",
      "required": ["X", "Unit", "Values"]
    },
    "unitlessvariable": {
      "$ref": "#/$defs/basevariable",
      "required": ["X", "Values"]
    },
    "variables": {
      "time": {
        "$ref": "#/$defs/variable",
        "description": "Time (assumed to be seconds)",
        "properties": {
          "Unit": {
            "pattern": "^s$"
          }
        }
      },
      "temperature": {
        "$ref": "#/$defs/variable",
        "description": "Temperature in Celsius",
        "properties": {
          "Unit": {
            "pattern": "^C$"
          }
        }
      },
      "current": {
        "$ref": "#/$defs/variable",
        "description": "Current in Amperes",
        "properties": {
          "Unit": {
            "pattern": "^A$"
          }
        }
      },
      "voltage": {
        "$ref": "#/$defs/variable",
        "description": "Voltage in Volts",
        "properties": {
          "Unit": {
            "pattern": "^V$"
          }
        }
      },
      "frequency": {
        "$ref": "#/$defs/variable",
        "description": "Frequency in MHz",
        "properties": {
          "Unit": {
            "pattern": "^MHz$"
          }
        }
      },
      "count": {
        "$ref": "#/$defs/variable",
        "description": "Counts",
        "properties": {
          "Unit": {
            "pattern": "^Count$"
          }
        }
      },
      "counts": {
        "$ref": "#/$defs/variable",
        "description": "Counts",
        "properties": {
          "Unit": {
            "pattern": "^Counts$"
          }
        }
      },
      "humidity": {
        "$ref": "#/$defs/variable",
        "description": "Humidity",
        "properties": {
          "Unit": {
            "pattern": "^%$"
          }
        }
      }
    },
    "dcsdata": {
      "SensorVoltage": {
        "description": "Sensor bias voltage in (V)",
        "type": "float"
      },
      "SensorCurrent": {
        "description": "Sensor leakage current in (A)",
        "type": "float"
      },
      "ModuleNTC": {
        "description": "Module temperature from the NTC (degC)",
        "type": "float"
      }
    },
    "metadata": {
      "ChipID": {
        "description": "ChipID from chip config",
        "type": "integer"
      },
      "Name": {
        "description": "Chip unique ID from chip config",
        "type": "string"
      },
      "ModuleSN": {
        "description": "Module serial number in the production database",
        "type": "string"
      },
      "Institution": {
        "description": "Institution",
        "type": "string"
      },
      "TimeStart": {
        "description": "Unix time stamp of the start time",
        "type": "integer"
      },
      "TimeStartString": {
        "description": "date time string in YYYY-MM-DD_HHmmss format",
        "type": "string",
        "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}_[0-9]{6}$"
      },
      "TimeEnd": {
        "description": "Unix time stamp of the end time",
        "type": "integer"
      },
      "FirmwareVersion": {
        "description": "Firmware version",
        "type": "string"
      },
      "FirmwareIdentifier": {
        "description": "Firmware identifier",
        "type": "string"
      },
      "ChannelConfig": {
        "description": "Channel config"
      },
      "SoftwareVersion": {
        "description": "software version",
        "type": "string"
      },
      "ChipConfigs": {
        "description": "Chip configs excluding pixel configs",
        "type": "object"
      },
      "SoftwareType": {},
      "AverageTemperature": {
        "description": "averaged temperature",
        "type": "number"
      },
      "IMUX63_ADC": {
        "description": "TODO what is this",
        "type": "string"
      },
      "VMUX30_ADC": {
        "description": "TODO what is this",
        "type": "string"
      }
    },
    "requiredMetadata": {
      "description": "required metadata",
      "type": "object",
      "properties": {
        "ModuleSN": {
          "$ref": "#/$defs/metadata/ModuleSN"
        },
        "Institution": {
          "$ref": "#/$defs/metadata/Institution"
        },
        "TimeStart": {
          "$ref": "#/$defs/metadata/TimeStart"
        },
        "TimeEnd": {
          "$ref": "#/$defs/metadata/TimeEnd"
        }
      },
      "required": ["ModuleSN", "Institution", "TimeStart", "TimeEnd"]
    },
    "requiredMetadataTimeStartString": {
      "description": "required metadata",
      "type": "object",
      "properties": {
        "ModuleSN": {
          "$ref": "#/$defs/metadata/ModuleSN"
        },
        "Institution": {
          "$ref": "#/$defs/metadata/Institution"
        },
        "TimeStart": {
          "$ref": "#/$defs/metadata/TimeStartString"
        },
        "TimeEnd": {
          "$ref": "#/$defs/metadata/TimeEnd"
        }
      },
      "required": ["ModuleSN", "Institution", "TimeStart", "TimeEnd"]
    },
    "measurements": {
      "adc_calibration": {
        "properties": {
          "testType": {
            "pattern": "^ADC_CALIBRATION$"
          },
          "results": {
            "properties": {
              "Measurements": {
                "properties": {
                  "Vmux8": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "ADC_Vmux8": {
                    "$ref": "#/$defs/variables/count"
                  },
                  "DACs_input": {
                    "$ref": "#/$defs/variables/count"
                  },
                  "Vmux30": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "ADC_Vmux30": {
                    "$ref": "#/$defs/variables/count"
                  }
                },
                "required": [
                  "Vmux8",
                  "ADC_Vmux8",
                  "DACs_input",
                  "Vmux30",
                  "ADC_Vmux30"
                ],
                "additionalProperties": false
              },
              "Metadata": {
                "$ref": "#/$defs/requiredMetadata",
                "properties": {
                  "ChipID": {
                    "$ref": "#/$defs/metadata/ChipID"
                  },
                  "Name": {
                    "$ref": "#/$defs/metadata/Name"
                  },
                  "FirmwareVersion": {
                    "$ref": "#/$defs/metadata/FirmwareVersion"
                  },
                  "FirmwareIdentifier": {
                    "$ref": "#/$defs/metadata/FirmwareIdentifier"
                  },
                  "ChannelConfig": {
                    "$ref": "#/$defs/metadata/ChannelConfig"
                  },
                  "SoftwareVersion": {
                    "$ref": "#/$defs/metadata/SoftwareVersion"
                  },
                  "ChipConfigs": {
                    "$ref": "#/$defs/metadata/ChipConfigs"
                  },
                  "SoftwareType": {
                    "$ref": "#/$defs/metadata/SoftwareType"
                  },
                  "IMUX63_ADC": {
                    "$ref": "#/$defs/metadata/IMUX63_ADC"
                  },
                  "VMUX30_ADC": {
                    "$ref": "#/$defs/metadata/VMUX30_ADC"
                  }
                },
                "required": [
                  "ChipID",
                  "Name",
                  "FirmwareVersion",
                  "FirmwareIdentifier",
                  "ChannelConfig",
                  "SoftwareVersion",
                  "ChipConfigs",
                  "SoftwareType",
                  "IMUX63_ADC",
                  "VMUX30_ADC"
                ]
              }
            }
          }
        }
      },
      "analog_readback": {
        "properties": {
          "testType": {
            "pattern": "^ANALOG_READBACK$"
          },
          "results": {
            "properties": {
              "Metadata": {
                "$ref": "#/$defs/requiredMetadata",
                "properties": {
                  "ChipID": {
                    "$ref": "#/$defs/metadata/ChipID"
                  },
                  "Name": {
                    "$ref": "#/$defs/metadata/Name"
                  },
                  "FirmwareVersion": {
                    "$ref": "#/$defs/metadata/FirmwareVersion"
                  },
                  "FirmwareIdentifier": {
                    "$ref": "#/$defs/metadata/FirmwareIdentifier"
                  },
                  "ChannelConfig": {
                    "$ref": "#/$defs/metadata/ChannelConfig"
                  },
                  "SoftwareVersion": {
                    "$ref": "#/$defs/metadata/SoftwareVersion"
                  },
                  "ChipConfigs": {
                    "$ref": "#/$defs/metadata/ChipConfigs"
                  },
                  "SoftwareType": {
                    "$ref": "#/$defs/metadata/SoftwareType"
                  }
                },
                "required": [
                  "ChipID",
                  "Name",
                  "FirmwareVersion",
                  "FirmwareIdentifier",
                  "ChannelConfig",
                  "SoftwareVersion",
                  "ChipConfigs",
                  "SoftwareType"
                ]
              },
              "Measurements": {
                "properties": {
                  "Vmux0": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux2": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux3": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux4": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux5": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux6": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux7": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux8": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux9": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux10": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux11": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux12": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux13": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux14": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux15": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux16": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux17": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux18": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux30": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux31": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux32": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux33": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux34": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux35": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux36": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux37": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux38": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux39": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux63": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux0": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux1": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux2": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux3": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux4": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux5": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux6": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux7": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux8": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux9": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux10": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux11": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux12": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux13": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux14": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux15": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux16": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux17": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux18": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux19": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux20": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux21": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux22": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux23": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux24": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux25": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux28": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux29": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux30": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux31": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux63": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "ROSC0": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC1": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC2": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC3": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC4": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC5": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC6": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC7": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC8": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC9": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC10": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC11": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC12": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC13": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC14": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC15": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC16": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC17": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC18": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC19": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC20": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC21": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC22": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC23": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC24": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC25": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC26": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC27": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC28": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC29": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC30": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC31": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC32": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC33": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC34": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC35": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC36": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC37": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC38": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC39": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC40": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "ROSC41": {
                    "$ref": "#/$defs/variables/frequency"
                  },
                  "TExtExtNTC": {
                    "$ref": "#/$defs/variables/temperature"
                  },
                  "MonSensSldoDigSelBias": {
                    "$ref": "#/$defs/unitlessvariable"
                  },
                  "MonSensSldoAnaSelBias": {
                    "$ref": "#/$defs/unitlessvariable"
                  },
                  "MonSensAcbSelBias": {
                    "$ref": "#/$defs/unitlessvariable"
                  },
                  "MonSensSldoDigDem": {
                    "$ref": "#/$defs/unitlessvariable"
                  },
                  "MonSensSldoAnaDem": {
                    "$ref": "#/$defs/unitlessvariable"
                  },
                  "MonSensAcbDem": {
                    "$ref": "#/$defs/unitlessvariable"
                  },
                  "SldoTrimA": {
                    "$ref": "#/$defs/unitlessvariable"
                  },
                  "SldoTrimD": {
                    "$ref": "#/$defs/unitlessvariable"
                  },
                  "IrefTrimSense": {
                    "$ref": "#/$defs/unitlessvariable"
                  }
                }
              }
            }
          }
        },
        "oneOf": [
          {
            "$ref": "#/$defs/measurements/AR_VMEAS"
          },
          {
            "$ref": "#/$defs/measurements/AR_TEMP"
          },
          {
            "$ref": "#/$defs/measurements/AR_VDD"
          },
          {
            "$ref": "#/$defs/measurements/AR_REGISTER"
          }
        ]
      },
      "AR_VMEAS": {
        "properties": {
          "subtestType": {
            "pattern": "^AR_VMEAS$"
          },
          "results": {
            "properties": {
              "Measurements": {
                "required": [
                  "Vmux0",
                  "Vmux3",
                  "Vmux4",
                  "Vmux5",
                  "Vmux6",
                  "Vmux7",
                  "Vmux8",
                  "Vmux9",
                  "Vmux10",
                  "Vmux11",
                  "Vmux12",
                  "Vmux13",
                  "Vmux15",
                  "Vmux17",
                  "Vmux30",
                  "Vmux31",
                  "Vmux32",
                  "Vmux33",
                  "Vmux34",
                  "Vmux35",
                  "Vmux36",
                  "Vmux37",
                  "Vmux38",
                  "Vmux39",
                  "Vmux63",
                  "Imux0",
                  "Imux1",
                  "Imux2",
                  "Imux3",
                  "Imux4",
                  "Imux5",
                  "Imux6",
                  "Imux7",
                  "Imux8",
                  "Imux10",
                  "Imux11",
                  "Imux12",
                  "Imux13",
                  "Imux14",
                  "Imux15",
                  "Imux16",
                  "Imux17",
                  "Imux18",
                  "Imux19",
                  "Imux20",
                  "Imux21",
                  "Imux22",
                  "Imux23",
                  "Imux24",
                  "Imux25",
                  "Imux28",
                  "Imux29",
                  "Imux30",
                  "Imux31",
                  "Imux63"
                ]
              }
            }
          }
        }
      },
      "AR_TEMP": {
        "properties": {
          "subtestType": {
            "pattern": "^AR_TEMP$"
          },
          "results": {
            "properties": {
              "Measurements": {
                "required": [
                  "Vmux2",
                  "Vmux30",
                  "Vmux14",
                  "Vmux16",
                  "Vmux18",
                  "Imux9",
                  "Imux63",
                  "MonSensSldoDigSelBias",
                  "MonSensSldoAnaSelBias",
                  "MonSensAcbSelBias",
                  "MonSensSldoDigDem",
                  "MonSensSldoAnaDem",
                  "MonSensAcbDem",
                  "TExtExtNTC"
                ],
                "patternProperties": {
                  ".": {
                    "properties": {
                      "Values": {
                        "minItems": 32,
                        "maxItems": 32
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "AR_VDD": {
        "properties": {
          "subtestType": {
            "pattern": "^AR_VDD$"
          },
          "results": {
            "properties": {
              "Measurements": {
                "required": [
                  "Vmux30",
                  "Vmux33",
                  "Vmux34",
                  "Vmux37",
                  "Vmux38",
                  "Imux28",
                  "Imux29",
                  "Imux30",
                  "Imux31",
                  "Imux63",
                  "SldoTrimA",
                  "SldoTrimD",
                  "ROSC0",
                  "ROSC1",
                  "ROSC2",
                  "ROSC3",
                  "ROSC4",
                  "ROSC5",
                  "ROSC6",
                  "ROSC7",
                  "ROSC8",
                  "ROSC9",
                  "ROSC10",
                  "ROSC11",
                  "ROSC12",
                  "ROSC13",
                  "ROSC14",
                  "ROSC15",
                  "ROSC16",
                  "ROSC17",
                  "ROSC18",
                  "ROSC19",
                  "ROSC20",
                  "ROSC21",
                  "ROSC22",
                  "ROSC23",
                  "ROSC24",
                  "ROSC25",
                  "ROSC26",
                  "ROSC27",
                  "ROSC28",
                  "ROSC29",
                  "ROSC30",
                  "ROSC31",
                  "ROSC32",
                  "ROSC33",
                  "ROSC34",
                  "ROSC35",
                  "ROSC36",
                  "ROSC37",
                  "ROSC38",
                  "ROSC39",
                  "ROSC40",
                  "ROSC41"
                ],
                "patternProperties": {
                  ".": {
                    "properties": {
                      "Values": {
                        "minItems": 16,
                        "maxItems": 16
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "AR_REGISTER": {
        "properties": {
          "subtestType": {
            "pattern": "^AR_REGISTER$"
          },
          "results": {
            "properties": {
              "Measurements": {
                "required": [],
                "patternProperties": {
                  ".": {
                    "properties": {
                      "Values": {
                        "minItems": 1,
                        "maxItems": 1
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "cutter_pcb_tab": {
        "properties": {
          "testType": {
            "pattern": "^CUTTER_PCB_TAB$"
          },
          "results": {
            "properties": {
              "Metadata": {
                "$ref": "#/$defs/requiredMetadata"
              },
              "Measurements": {
                "properties": {
                  "HUMIDITY": {
                    "allOf": [
                      {
                        "$ref": "#/$defs/variables/humidity"
                      },
                      {
                        "properties": {
                          "Values": {
                            "minItems": 1,
                            "maxItems": 1
                          }
                        }
                      }
                    ]
                  },
                  "TEMPERATURE": {
                    "allOf": [
                      {
                        "$ref": "#/$defs/variables/temperature"
                      },
                      {
                        "properties": {
                          "Values": {
                            "minItems": 1,
                            "maxItems": 1
                          }
                        }
                      }
                    ]
                  }
                },
                "required": ["HUMIDITY", "TEMPERATURE"]
              }
            }
          }
        }
      },
      "data_transmission": {
        "properties": {
          "testType": {
            "pattern": "^DATA_TRANSMISSION$"
          },
          "results": {
            "properties": {
              "Metadata": {
                "$ref": "#/$defs/requiredMetadata",
                "properties": {
                  "ChipID": {
                    "$ref": "#/$defs/metadata/ChipID"
                  },
                  "Name": {
                    "$ref": "#/$defs/metadata/Name"
                  },
                  "FirmwareVersion": {
                    "$ref": "#/$defs/metadata/FirmwareVersion"
                  },
                  "FirmwareIdentifier": {
                    "$ref": "#/$defs/metadata/FirmwareIdentifier"
                  },
                  "ChannelConfig": {
                    "$ref": "#/$defs/metadata/ChannelConfig"
                  },
                  "SoftwareVersion": {
                    "$ref": "#/$defs/metadata/SoftwareVersion"
                  },
                  "ChipConfigs": {
                    "$ref": "#/$defs/metadata/ChipConfigs"
                  },
                  "SoftwareType": {
                    "$ref": "#/$defs/metadata/SoftwareType"
                  }
                },
                "required": [
                  "ChipID",
                  "Name",
                  "FirmwareVersion",
                  "FirmwareIdentifier",
                  "ChannelConfig",
                  "SoftwareVersion",
                  "ChipConfigs",
                  "SoftwareType"
                ]
              },
              "Measurements": {
                "properties": {
                  "Delay": {
                    "$ref": "#/$defs/unitlessvariable"
                  },
                  "EyeOpening0": {
                    "$ref": "#/$defs/unitlessvariable"
                  },
                  "4-to-1": {
                    "$ref": "#/$defs/unitlessvariable"
                  },
                  "2-to-1": {
                    "$ref": "#/$defs/unitlessvariable"
                  }
                }
              }
            }
          }
        },
        "oneOf": [
          {
            "$ref": "#/$defs/measurements/DT_EYE"
          },
          {
            "$ref": "#/$defs/measurements/DT_MERGE"
          }
        ]
      },
      "DT_EYE": {
        "properties": {
          "subtestType": {
            "pattern": "^DT_EYE$"
          },
          "results": {
            "properties": {
              "Measurements": {
                "patternProperties": {
                  ".": {
                    "properties": {
                      "Values": {}
                    }
                  }
                }
              }
            }
          }
        }
      },
      "DT_MERGE": {
        "properties": {
          "subtestType": {
            "pattern": "^DT_MERGE$"
          },
          "results": {
            "properties": {
              "Measurements": {
                "patternProperties": {
                  ".": {
                    "properties": {
                      "Values": {}
                    }
                  }
                }
              }
            }
          }
        }
      },
      "injection_capacitance": {
        "properties": {
          "testType": {
            "pattern": "^INJECTION_CAPACITANCE$"
          },
          "results": {
            "properties": {
              "Metadata": {
                "$ref": "#/$defs/requiredMetadata",
                "properties": {
                  "ChipID": {
                    "$ref": "#/$defs/metadata/ChipID"
                  },
                  "Name": {
                    "$ref": "#/$defs/metadata/Name"
                  },
                  "FirmwareVersion": {
                    "$ref": "#/$defs/metadata/FirmwareVersion"
                  },
                  "FirmwareIdentifier": {
                    "$ref": "#/$defs/metadata/FirmwareIdentifier"
                  },
                  "ChannelConfig": {
                    "$ref": "#/$defs/metadata/ChannelConfig"
                  },
                  "SoftwareVersion": {
                    "$ref": "#/$defs/metadata/SoftwareVersion"
                  },
                  "ChipConfigs": {
                    "$ref": "#/$defs/metadata/ChipConfigs"
                  },
                  "SoftwareType": {
                    "$ref": "#/$defs/metadata/SoftwareType"
                  }
                },
                "required": [
                  "ChipID",
                  "Name",
                  "FirmwareVersion",
                  "FirmwareIdentifier",
                  "ChannelConfig",
                  "SoftwareVersion",
                  "ChipConfigs",
                  "SoftwareType"
                ]
              },
              "Measurements": {
                "properties": {
                  "Vmux4": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux30": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux10": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux11": {
                    "$ref": "#/$defs/variables/voltage"
                  }
                },
                "required": ["Vmux4", "Vmux30", "Imux10", "Imux11"]
              }
            }
          }
        }
      },
      "iv_measure": {
        "properties": {
          "testType": {
            "pattern": "^IV_MEASURE$"
          },
          "results": {
            "properties": {
              "Metadata": {
                "oneOf": [
                  {
                    "$ref": "#/$defs/requiredMetadata"
                  },
                  {
                    "$ref": "#/$defs/requiredMetadataTimeStartString"
                  }
                ]
              },
              "Measurements": {
                "properties": {
                  "time": {
                    "$ref": "#/$defs/variables/time"
                  },
                  "voltage": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "current": {
                    "$ref": "#/$defs/variables/current"
                  },
                  "sigma current": {
                    "$ref": "#/$defs/variables/current"
                  },
                  "temperature": {
                    "$ref": "#/$defs/variables/temperature"
                  },
                  "humidity": {
                    "$ref": "#/$defs/variables/humidity"
                  }
                },
                "required": ["voltage", "current", "temperature"]
              }
            }
          }
        }
      },
      "long_term_stability_dcs": {
        "properties": {
          "testType": {
            "pattern": "^LONG_TERM_STABILITY_DCS$"
          },
          "results": {
            "properties": {
              "property": {
                "type": "object",
                "properties": {
                  "LONG_TERM_STABILITY_DCS_MEASUREMENT_VERSION": {
                    "type": "string"
                  }
                },
                "required": ["LONG_TERM_STABILITY_DCS_MEASUREMENT_VERSION"]
              },
              "comment": { "type": "string" },
              "Metadata": {
                "$ref": "#/$defs/requiredMetadata",
                "properties": {
                  "AverageTemperature": { "type": "number" }
                },
                "required": ["AverageTemperature"]
              },
              "Measurements": {
                "properties": {
                  "time": {
                    "$ref": "#/$defs/variables/time"
                  },
                  "BIAS_VOLT": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "LEAKAGE_CURR": {
                    "$ref": "#/$defs/variables/current"
                  },
                  "LV_VOLT": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "LV_CURR": {
                    "$ref": "#/$defs/variables/current"
                  },
                  "MOD_TEMP": {
                    "$ref": "#/$defs/variables/temperature"
                  },
                  "MOD_HUM": {
                    "$ref": "#/$defs/variables/humidity"
                  }
                },
                "required": [
                  "time",
                  "BIAS_VOLT",
                  "LEAKAGE_CURR",
                  "LV_VOLT",
                  "LV_CURR",
                  "MOD_TEMP",
                  "MOD_HUM"
                ]
              }
            },
            "required": ["property", "comment"]
          }
        }
      },
      "lp_mode": {
        "properties": {
          "testType": {
            "pattern": "^LP_MODE$"
          },
          "results": {
            "properties": {
              "Metadata": {
                "$ref": "#/$defs/requiredMetadata",
                "properties": {
                  "ChipID": {
                    "$ref": "#/$defs/metadata/ChipID"
                  },
                  "Name": {
                    "$ref": "#/$defs/metadata/Name"
                  },
                  "FirmwareVersion": {
                    "$ref": "#/$defs/metadata/FirmwareVersion"
                  },
                  "FirmwareIdentifier": {
                    "$ref": "#/$defs/metadata/FirmwareIdentifier"
                  },
                  "ChannelConfig": {
                    "$ref": "#/$defs/metadata/ChannelConfig"
                  },
                  "SoftwareVersion": {
                    "$ref": "#/$defs/metadata/SoftwareVersion"
                  },
                  "ChipConfigs": {
                    "$ref": "#/$defs/metadata/ChipConfigs"
                  },
                  "SoftwareType": {
                    "$ref": "#/$defs/metadata/SoftwareType"
                  },
                  "AverageTemperature": { "type": "number" }
                },
                "required": [
                  "ChipID",
                  "Name",
                  "FirmwareVersion",
                  "FirmwareIdentifier",
                  "ChannelConfig",
                  "SoftwareVersion",
                  "ChipConfigs",
                  "SoftwareType",
                  "AverageTemperature"
                ]
              },
              "Measurements": {
                "properties": {
                  "FailingPixels": {
                    "$ref": "#/$defs/variables/counts"
                  },
                  "Temperature": {
                    "$ref": "#/$defs/variables/temperature"
                  },
                  "Current": {
                    "$ref": "#/$defs/variables/current"
                  },
                  "Vmux30": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux33": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux37": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux0": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux28": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux29": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux30": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux31": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux63": {
                    "$ref": "#/$defs/variables/voltage"
                  }
                },
                "required": [
                  "FailingPixels",
                  "Temperature",
                  "Current",
                  "Vmux30",
                  "Vmux33",
                  "Vmux37",
                  "Vmux36",
                  "Imux0",
                  "Imux28",
                  "Imux29",
                  "Imux30",
                  "Imux31",
                  "Imux63"
                ]
              }
            }
          }
        }
      },
      "overvoltage_protection": {
        "properties": {
          "testType": {
            "pattern": "^OVERVOLTAGE_PROTECTION$"
          },
          "results": {
            "properties": {
              "Metadata": {
                "$ref": "#/$defs/requiredMetadata",
                "properties": {
                  "ChipID": {
                    "$ref": "#/$defs/metadata/ChipID"
                  },
                  "Name": {
                    "$ref": "#/$defs/metadata/Name"
                  },
                  "FirmwareVersion": {
                    "$ref": "#/$defs/metadata/FirmwareVersion"
                  },
                  "FirmwareIdentifier": {
                    "$ref": "#/$defs/metadata/FirmwareIdentifier"
                  },
                  "ChannelConfig": {
                    "$ref": "#/$defs/metadata/ChannelConfig"
                  },
                  "SoftwareVersion": {
                    "$ref": "#/$defs/metadata/SoftwareVersion"
                  },
                  "ChipConfigs": {
                    "$ref": "#/$defs/metadata/ChipConfigs"
                  },
                  "SoftwareType": {
                    "$ref": "#/$defs/metadata/SoftwareType"
                  },
                  "AverageTemperature": { "type": "number" }
                },
                "required": [
                  "ChipID",
                  "Name",
                  "FirmwareVersion",
                  "FirmwareIdentifier",
                  "ChannelConfig",
                  "SoftwareVersion",
                  "ChipConfigs",
                  "SoftwareType",
                  "AverageTemperature"
                ]
              },
              "Measurements": {
                "properties": {
                  "Temperature": {
                    "$ref": "#/$defs/variables/temperature"
                  },
                  "Current": {
                    "$ref": "#/$defs/variables/current"
                  },
                  "Vmux30": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux32": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux33": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux37": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux28": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux30": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux63": {
                    "$ref": "#/$defs/variables/voltage"
                  }
                },
                "required": [
                  "Temperature",
                  "Current",
                  "Vmux30",
                  "Vmux32",
                  "Vmux33",
                  "Vmux37",
                  "Imux28",
                  "Imux30",
                  "Imux63"
                ]
              }
            }
          }
        }
      },
      "sldo": {
        "properties": {
          "testType": {
            "pattern": "^SLDO$"
          },
          "results": {
            "properties": {
              "Metadata": {
                "$ref": "#/$defs/requiredMetadata",
                "properties": {
                  "ChipID": {
                    "$ref": "#/$defs/metadata/ChipID"
                  },
                  "Name": {
                    "$ref": "#/$defs/metadata/Name"
                  },
                  "FirmwareVersion": {
                    "$ref": "#/$defs/metadata/FirmwareVersion"
                  },
                  "FirmwareIdentifier": {
                    "$ref": "#/$defs/metadata/FirmwareIdentifier"
                  },
                  "ChannelConfig": {
                    "$ref": "#/$defs/metadata/ChannelConfig"
                  },
                  "SoftwareVersion": {
                    "$ref": "#/$defs/metadata/SoftwareVersion"
                  },
                  "ChipConfigs": {
                    "$ref": "#/$defs/metadata/ChipConfigs"
                  },
                  "SoftwareType": {
                    "$ref": "#/$defs/metadata/SoftwareType"
                  },
                  "AverageTemperature": { "type": "number" }
                },
                "required": [
                  "ChipID",
                  "Name",
                  "FirmwareVersion",
                  "FirmwareIdentifier",
                  "ChannelConfig",
                  "SoftwareVersion",
                  "ChipConfigs",
                  "SoftwareType",
                  "AverageTemperature"
                ]
              },
              "Measurements": {
                "properties": {
                  "Temperature": {
                    "$ref": "#/$defs/variables/temperature"
                  },
                  "Current": {
                    "$ref": "#/$defs/variables/current"
                  },
                  "Vmux30": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux32": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux33": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux34": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux36": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux37": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux38": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux0": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux28": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux29": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux30": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux31": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux63": {
                    "$ref": "#/$defs/variables/voltage"
                  }
                },
                "required": [
                  "Temperature",
                  "Current",
                  "Vmux30",
                  "Vmux32",
                  "Vmux33",
                  "Vmux34",
                  "Vmux36",
                  "Vmux37",
                  "Vmux38",
                  "Imux0",
                  "Imux28",
                  "Imux29",
                  "Imux30",
                  "Imux31",
                  "Imux63"
                ]
              }
            }
          }
        }
      },
      "undershunt_protection": {
        "properties": {
          "testType": {
            "pattern": "^UNDERSHUNT_PROTECTION$"
          },
          "results": {
            "properties": {
              "Metadata": {
                "$ref": "#/$defs/requiredMetadata",
                "properties": {
                  "ChipID": {
                    "$ref": "#/$defs/metadata/ChipID"
                  },
                  "Name": {
                    "$ref": "#/$defs/metadata/Name"
                  },
                  "FirmwareVersion": {
                    "$ref": "#/$defs/metadata/FirmwareVersion"
                  },
                  "FirmwareIdentifier": {
                    "$ref": "#/$defs/metadata/FirmwareIdentifier"
                  },
                  "ChannelConfig": {
                    "$ref": "#/$defs/metadata/ChannelConfig"
                  },
                  "SoftwareVersion": {
                    "$ref": "#/$defs/metadata/SoftwareVersion"
                  },
                  "ChipConfigs": {
                    "$ref": "#/$defs/metadata/ChipConfigs"
                  },
                  "SoftwareType": {
                    "$ref": "#/$defs/metadata/SoftwareType"
                  },
                  "AverageTemperature": { "type": "number" }
                },
                "required": [
                  "ChipID",
                  "Name",
                  "FirmwareVersion",
                  "FirmwareIdentifier",
                  "ChannelConfig",
                  "SoftwareVersion",
                  "ChipConfigs",
                  "SoftwareType",
                  "AverageTemperature"
                ]
              },
              "Measurements": {
                "properties": {
                  "Temperature": {
                    "$ref": "#/$defs/variables/temperature"
                  },
                  "Current": {
                    "$ref": "#/$defs/variables/current"
                  },
                  "Vmux30": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux33": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux34": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux35": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux37": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux38": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux39": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux0": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux28": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux29": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux30": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux31": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Imux63": {
                    "$ref": "#/$defs/variables/voltage"
                  }
                },
                "required": [
                  "Temperature",
                  "Current",
                  "Vmux30",
                  "Vmux33",
                  "Vmux34",
                  "Vmux35",
                  "Vmux37",
                  "Vmux38",
                  "Vmux39",
                  "Imux0",
                  "Imux28",
                  "Imux29",
                  "Imux30",
                  "Imux31",
                  "Imux63"
                ]
              }
            }
          }
        }
      },
      "vcal_calibration": {
        "properties": {
          "testType": {
            "pattern": "^VCAL_CALIBRATION$"
          },
          "results": {
            "properties": {
              "Metadata": {
                "$ref": "#/$defs/requiredMetadata",
                "properties": {
                  "ChipID": {
                    "$ref": "#/$defs/metadata/ChipID"
                  },
                  "Name": {
                    "$ref": "#/$defs/metadata/Name"
                  },
                  "FirmwareVersion": {
                    "$ref": "#/$defs/metadata/FirmwareVersion"
                  },
                  "FirmwareIdentifier": {
                    "$ref": "#/$defs/metadata/FirmwareIdentifier"
                  },
                  "ChannelConfig": {
                    "$ref": "#/$defs/metadata/ChannelConfig"
                  },
                  "SoftwareVersion": {
                    "$ref": "#/$defs/metadata/SoftwareVersion"
                  },
                  "ChipConfigs": {
                    "$ref": "#/$defs/metadata/ChipConfigs"
                  },
                  "SoftwareType": {
                    "$ref": "#/$defs/metadata/SoftwareType"
                  }
                },
                "required": [
                  "ChipID",
                  "Name",
                  "FirmwareVersion",
                  "FirmwareIdentifier",
                  "ChannelConfig",
                  "SoftwareVersion",
                  "ChipConfigs",
                  "SoftwareType"
                ]
              },
              "Measurements": {
                "properties": {
                  "Vmux7": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "Vmux8": {
                    "$ref": "#/$defs/variables/voltage"
                  },
                  "DACs_input": {
                    "$ref": "#/$defs/variables/count"
                  }
                },
                "required": ["DACs_input"]
              }
            }
          }
        },
        "oneOf": [
          {
            "$ref": "#/$defs/measurements/VCAL_MED_BASE"
          },
          {
            "$ref": "#/$defs/measurements/VCAL_HIGH_BASE"
          }
        ]
      },
      "VCAL_MED_BASE": {
        "properties": {
          "subtestType": {
            "pattern": "^(VCAL_MED|VCAL_MED_SMALL_RANGE)$"
          },
          "results": {
            "properties": {
              "Measurements": {
                "required": ["Vmux8"]
              }
            }
          }
        }
      },
      "VCAL_HIGH_BASE": {
        "properties": {
          "subtestType": {
            "pattern": "^(VCAL_HIGH|VCAL_HIGH_SMALL_RANGE)$"
          },
          "results": {
            "properties": {
              "Measurements": {
                "required": ["Vmux7"]
              }
            }
          }
        }
      }
    }
  }
}
