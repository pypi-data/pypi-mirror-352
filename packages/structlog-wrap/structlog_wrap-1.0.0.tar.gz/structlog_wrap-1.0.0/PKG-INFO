Metadata-Version: 2.4
Name: structlog-wrap
Version: 1.0.0
Summary: åŸºäºstructlogçš„å‡½æ•°æ—¥å¿—è£…é¥°å™¨ï¼Œè‡ªåŠ¨æ‰“å°å‡½æ•°è°ƒç”¨æ—¥å¿— - A structlog-based function logging decorator that automatically prints function call logs
Home-page: https://github.com/yourusername/structlog-wrap
Author: Your Name
Author-email: structlog-wrap <structlog.wrap@example.com>
Maintainer-email: structlog-wrap <structlog.wrap@example.com>
License: MIT
Project-URL: Homepage, https://pypi.org/project/structlog-wrap/
Project-URL: Repository, https://github.com/structlog-wrap/structlog-wrap
Project-URL: Issues, https://github.com/structlog-wrap/structlog-wrap/issues
Project-URL: Documentation, https://github.com/structlog-wrap/structlog-wrap#readme
Keywords: structlog,logging,decorator,function,calls
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: System :: Logging
Classifier: Topic :: Utilities
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: structlog>=23.1.0
Requires-Dist: colorama>=0.4.6
Provides-Extra: dev
Requires-Dist: pytest>=6.0; extra == "dev"
Requires-Dist: pytest-cov; extra == "dev"
Requires-Dist: black; extra == "dev"
Requires-Dist: flake8; extra == "dev"
Dynamic: author
Dynamic: home-page
Dynamic: license-file
Dynamic: requires-python

# structlog_wrap - åŸºäºstructlogçš„å‡½æ•°æ—¥å¿—è£…é¥°å™¨

ä¸€ä¸ªç®€å•æ˜“ç”¨çš„Pythonè£…é¥°å™¨ï¼ŒåŸºäºstructlogå®ç°è‡ªåŠ¨å‡½æ•°è°ƒç”¨æ—¥å¿—è®°å½•ã€‚

## ç‰¹æ€§

- ğŸ•’ **æ—¶é—´æˆ³**ï¼šè‡ªåŠ¨è®°å½•å‡½æ•°è°ƒç”¨æ—¶é—´
- ğŸ“ **å‡½æ•°åå¯¹é½**ï¼šæ”¯æŒè‡ªå®šä¹‰å‡½æ•°åæ˜¾ç¤ºå®½åº¦ï¼Œä¿æŒæ—¥å¿—æ•´é½å¯¹é½
- âœ‚ï¸ **æ™ºèƒ½æˆªæ–­**ï¼š
  - é•¿å­—ç¬¦ä¸²å’Œå¤§å‹é›†åˆè‡ªåŠ¨æˆªæ–­ï¼Œé¿å…æ—¥å¿—è¿‡é•¿
  - **è¶…é•¿å‡½æ•°åè‡ªåŠ¨æˆªæ–­**ï¼šå½“å‡½æ•°åè¶…è¿‡è®¾å®šå®½åº¦æ—¶ï¼Œè‡ªåŠ¨æˆªæ–­å¹¶æ·»åŠ çœç•¥å·ï¼Œç¡®ä¿å¯¹é½ä¸è¢«ç ´å
- ğŸ“‹ **å‚æ•°è®°å½•**ï¼šè‡ªåŠ¨æ•è·å¹¶æ ¼å¼åŒ–æ‰€æœ‰å‡½æ•°å‚æ•°ï¼ˆåŒ…æ‹¬é»˜è®¤å‚æ•°ï¼‰
- ğŸ¯ **é›¶ä¾µå…¥**ï¼šä¸å½±å“åŸå‡½æ•°çš„æ‰§è¡Œå’Œè¿”å›å€¼
- ğŸ”§ **æ˜“äºä½¿ç”¨**ï¼šæä¾›ç®€å•å’Œé«˜çº§ä¸¤ç§ä½¿ç”¨æ–¹å¼

## å®‰è£…

### ä» PyPI å®‰è£…ï¼ˆæ¨èï¼‰

```bash
pip install structlog-wrap
```

### ä»æºç å®‰è£…

```bash
git clone https://github.com/structlog-wrap/structlog-wrap.git
cd structlog-wrap
pip install -e .
```

## å¿«é€Ÿå¼€å§‹

### æœ€ç®€å•ç”¨æ³•ï¼ˆæ¨èï¼‰

```python
import structlog_wrap

@structlog_wrap
def my_function(name: str, age: int = 25):
    return f"Hello, {name}! You are {age} years old."

# è°ƒç”¨å‡½æ•°
result = my_function("å¼ ä¸‰", 30)
```

è¾“å‡ºï¼š
```
2025-06-01 23:06:31 | my_function          | (name='å¼ ä¸‰', age=30)
```

### å…¶ä»–ç”¨æ³•

```python
from structlog_wrap import log_calls

@log_calls
def my_function(name: str, age: int = 25):
    return f"Hello, {name}! You are {age} years old."
```

### è‡ªå®šä¹‰å‡½æ•°åå®½åº¦

```python
from structlog_wrap import log_function_calls

@log_function_calls(30)  # å‡½æ•°åå®½åº¦è®¾ä¸º30å­—ç¬¦
def calculate_area(length: float, width: float, unit: str = "m"):
    return length * width

result = calculate_area(10.5, 8.2)
```

è¾“å‡ºï¼š
```
2025-06-01 22:58:29 | calculate_area                 | (length=10.5, width=8.2, unit='m')
```

## æ—¥å¿—æ ¼å¼

æ—¥å¿—æ ¼å¼ä¸ºï¼š`æ—¶é—´æˆ³ | å‡½æ•°å | (å‚æ•°åˆ—è¡¨)`

- **æ—¶é—´æˆ³**ï¼š`YYYY-MM-DD HH:MM:SS` æ ¼å¼
- **å‡½æ•°å**ï¼šå·¦å¯¹é½ï¼Œå¯è‡ªå®šä¹‰å®½åº¦
- **å‚æ•°åˆ—è¡¨**ï¼š`(arg1=value1, arg2=value2, ...)` æ ¼å¼

## é«˜çº§ç‰¹æ€§

### å‚æ•°å¤„ç†

1. **é•¿å­—ç¬¦ä¸²æˆªæ–­**ï¼šè¶…è¿‡50å­—ç¬¦çš„å­—ç¬¦ä¸²ä¼šè¢«æˆªæ–­å¹¶æ˜¾ç¤ºçœç•¥å·
2. **é›†åˆç±»å‹ä¼˜åŒ–**ï¼šå¤§å‹åˆ—è¡¨ã€å­—å…¸ç­‰æ˜¾ç¤ºä¸ºç±»å‹å’Œé•¿åº¦ä¿¡æ¯
3. **é»˜è®¤å‚æ•°**ï¼šè‡ªåŠ¨åŒ…å«å‡½æ•°çš„é»˜è®¤å‚æ•°å€¼

### å‡½æ•°åå¤„ç†

1. **è‡ªåŠ¨å¯¹é½**ï¼šå‡½æ•°åå·¦å¯¹é½ï¼ŒçŸ­å‡½æ•°åç”¨ç©ºæ ¼å¡«å……åˆ°è®¾å®šå®½åº¦
2. **æ™ºèƒ½æˆªæ–­**ï¼šè¶…é•¿å‡½æ•°åè‡ªåŠ¨æˆªæ–­å¹¶æ·»åŠ çœç•¥å·ï¼Œç¡®ä¿ä¸ç ´åå¯¹é½æ ¼å¼
   - ä¾‹å¦‚ï¼š`very_long_function_name` â†’ `very_long_func...`ï¼ˆå®½åº¦20æ—¶ï¼‰
3. **æå°å®½åº¦å¤„ç†**ï¼šå½“è®¾å®šå®½åº¦å°äºç­‰äº3æ—¶ï¼Œç›´æ¥æˆªæ–­ä¸æ·»åŠ çœç•¥å·

### ç¤ºä¾‹

```python
@log_calls
def process_data(data: list, multiplier: int = 2, debug: bool = False):
    return [x * multiplier for x in data]

# é•¿åˆ—è¡¨ä¼šæ˜¾ç¤ºä¸ºç±»å‹å’Œé•¿åº¦
long_list = list(range(100))
result = process_data(long_list, 3, True)
```

è¾“å‡ºï¼š
```
2025-06-01 22:58:29 | process_data         | (data=list(len=100), multiplier=3, debug=True)
```

## API å‚è€ƒ

### `@structlog_wrap`ï¼ˆæ¨èï¼‰

æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼ï¼Œç›´æ¥å¯¼å…¥æ¨¡å—ä½œä¸ºè£…é¥°å™¨ã€‚

```python
import structlog_wrap

@structlog_wrap
def my_function():
    pass
```

### `@log_calls`

ä»æ¨¡å—å¯¼å…¥çš„è£…é¥°å™¨ï¼Œä½¿ç”¨é»˜è®¤è®¾ç½®ï¼ˆå‡½æ•°åå®½åº¦20å­—ç¬¦ï¼‰ã€‚

```python
from structlog_wrap import log_calls

@log_calls
def my_function():
    pass
```

### `@log_function_calls(function_name_width)`

å¯é…ç½®çš„è£…é¥°å™¨ã€‚

**å‚æ•°ï¼š**
- `function_name_width` (int): å‡½æ•°åæ˜¾ç¤ºå®½åº¦ï¼Œç”¨äºå¯¹é½ï¼Œé»˜è®¤20

```python
@log_function_calls(25)
def my_function():
    pass
```

## è¿è¡Œç¤ºä¾‹

```bash
# è¿è¡Œè¯¦ç»†ç¤ºä¾‹
python example.py

# è¿è¡Œæœ€ç®€å•ç”¨æ³•ç¤ºä¾‹
python test_simple_usage.py

# è¿è¡Œè¶…é•¿å‡½æ•°åå¤„ç†æµ‹è¯•
python test_long_function_names.py

# è¿è¡Œæœ€ç®€å•æ¼”ç¤º
python demo.py
```

## è¿è¡Œæµ‹è¯•

```bash
python test_structlog_wrap.py
# æˆ–è€…
python -m pytest test_structlog_wrap.py -v
```

## æ–‡ä»¶ç»“æ„

```
structlog_wrap/
â”œâ”€â”€ structlog_wrap.py         # ä¸»è¦è£…é¥°å™¨å®ç°
â”œâ”€â”€ demo.py                   # æœ€ç®€å•æ¼”ç¤º
â”œâ”€â”€ example.py                # è¯¦ç»†ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ test_simple_usage.py      # æœ€ç®€å•ç”¨æ³•ç¤ºä¾‹
â”œâ”€â”€ test_long_function_names.py # è¶…é•¿å‡½æ•°åå¤„ç†æµ‹è¯•
â”œâ”€â”€ test_structlog_wrap.py    # å•å…ƒæµ‹è¯•
â”œâ”€â”€ requirements.txt          # ä¾èµ–æ–‡ä»¶
â””â”€â”€ README.md                # è¯´æ˜æ–‡æ¡£
```

## ä¾èµ–

- `structlog>=23.1.0`
- `colorama>=0.4.6`

## è®¸å¯è¯

MIT License
