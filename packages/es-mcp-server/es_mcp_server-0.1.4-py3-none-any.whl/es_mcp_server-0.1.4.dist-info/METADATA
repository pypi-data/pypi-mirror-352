Metadata-Version: 2.4
Name: es-mcp-server
Version: 0.1.4
Summary: Elasticsearch MCP æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯
Author: Claude-3.7-Sonnet
License-File: LICENSE
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Requires-Python: >=3.7
Requires-Dist: aiohttp>=3.8.0
Requires-Dist: elasticsearch7>=7.0.0
Requires-Dist: elasticsearch<9.0,>=8.13
Requires-Dist: mcp>=0.2.0
Requires-Dist: pydantic>=1.8.0
Requires-Dist: python-dotenv>=0.19.0
Provides-Extra: dev
Requires-Dist: pytest-asyncio>=0.19.0; extra == 'dev'
Requires-Dist: pytest>=7.0.0; extra == 'dev'
Description-Content-Type: text/markdown

# Elasticsearch MCP æœåŠ¡å™¨

åŸºäº [Model Context Protocol (MCP)](https://github.com/modelcontextprotocol/python-sdk) çš„ Elasticsearch å·¥å…·æœåŠ¡å™¨ï¼Œæä¾›ç´¢å¼•æŸ¥è¯¢ã€æ˜ å°„è·å–ã€æœç´¢ç­‰åŠŸèƒ½ã€‚

å…¶ä»–è¯­è¨€ç‰ˆæœ¬: [ğŸ‡ºğŸ‡¸ English](./README.en.md) | [ğŸ‡«ğŸ‡· FranÃ§ais](./README.fr.md) | [ğŸ‡©ğŸ‡ª Deutsch](./README.de.md) | [ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª](./README.jp.md)

## é¡¹ç›®ç›®å½•ç»“æ„

```
.
â”œâ”€â”€ es_mcp_server/         # æœåŠ¡å™¨ä»£ç 
â”‚   â”œâ”€â”€ __init__.py        # åŒ…åˆå§‹åŒ–
â”‚   â”œâ”€â”€ server.py          # æœåŠ¡å™¨ä¸»ç¨‹åº
â”‚   â”œâ”€â”€ config.py          # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ client.py          # ESå®¢æˆ·ç«¯å·¥å‚
â”‚   â””â”€â”€ tools.py           # ES MCPå·¥å…·å®ç°
â”œâ”€â”€ es_mcp_client/         # å®¢æˆ·ç«¯ä»£ç 
â”‚   â”œâ”€â”€ __init__.py        # åŒ…åˆå§‹åŒ–
â”‚   â””â”€â”€ client.py          # å®¢æˆ·ç«¯æµ‹è¯•ç¨‹åº
â”œâ”€â”€ test/                  # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ __init__.py        # æµ‹è¯•åŒ…åˆå§‹åŒ–
â”‚   â””â”€â”€ test_server.py     # æœåŠ¡å™¨å•å…ƒæµ‹è¯•
â”œâ”€â”€ claude_config_examples/ # Claudeé…ç½®ç¤ºä¾‹
â”‚   â”œâ”€â”€ elasticsearch_stdio_config.json # stdioæ¨¡å¼é…ç½®
â”‚   â””â”€â”€ elasticsearch_sse_config.json   # sseæ¨¡å¼é…ç½®
â”œâ”€â”€ .vscode/               # VSCodeé…ç½®
â”‚   â””â”€â”€ launch.json        # è°ƒè¯•é…ç½®
â”œâ”€â”€ docs/                  # æ–‡æ¡£
â”‚   â””â”€â”€ requires.md        # éœ€æ±‚æ–‡æ¡£
â”œâ”€â”€ pyproject.toml         # é¡¹ç›®é…ç½®æ–‡ä»¶
â”œâ”€â”€ README.md              # ä¸­æ–‡è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ README.en.md           # è‹±æ–‡è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ README.fr.md           # æ³•è¯­è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ README.de.md           # å¾·è¯­è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ README.jp.md           # æ—¥è¯­è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ .gitignore             # Gitå¿½ç•¥æ–‡ä»¶
â””â”€â”€ LICENSE                # MITè®¸å¯è¯
```

## æœåŠ¡å™¨åŠŸèƒ½å’Œä½¿ç”¨è¯´æ˜

Elasticsearch MCP æœåŠ¡å™¨æä¾›ä»¥ä¸‹å·¥å…·ï¼š

1. **list_indices** - æ˜¾ç¤º ES é›†ç¾¤çš„æ‰€æœ‰ç´¢å¼•
2. **get_mappings** - è¿”å›æŒ‡å®šç´¢å¼•çš„å­—æ®µæ˜ å°„ä¿¡æ¯
3. **search** - åœ¨æŒ‡å®šç´¢å¼•ä¸­æ‰§è¡Œæœç´¢æŸ¥è¯¢ï¼Œæ”¯æŒé«˜äº®æ˜¾ç¤º
4. **get_cluster_health** - è·å– ES é›†ç¾¤çš„å¥åº·çŠ¶æ€ä¿¡æ¯
5. **get_cluster_stats** - è·å– ES é›†ç¾¤çš„è¿è¡ŒçŠ¶æ€ç»Ÿè®¡ä¿¡æ¯

### å®‰è£…

```bash
# ä»PyPIå®‰è£…
pip install es-mcp-server

# æˆ–ä»æºç å®‰è£…
pip install .

# å®‰è£…å¼€å‘ä¾èµ–
pip install ".[dev]"
```

### é…ç½® 

æœåŠ¡å™¨é€šè¿‡ç¯å¢ƒå˜é‡æˆ–å‘½ä»¤è¡Œå‚æ•°è¿›è¡Œé…ç½®ï¼š

| ç¯å¢ƒå˜é‡ | è¯´æ˜ | é»˜è®¤å€¼ |
|----------|------|--------|
| ES_HOST | ES ä¸»æœºåœ°å€ | localhost |
| ES_PORT | ES ç«¯å£ | 9200 |
| ES_USERNAME | ES ç”¨æˆ·å | æ—  |
| ES_PASSWORD | ES å¯†ç  | æ—  |
| ES_API_KEY | ES API å¯†é’¥ | æ—  |
| ES_USE_SSL | æ˜¯å¦ä½¿ç”¨ SSL | false |
| ES_VERIFY_CERTS | æ˜¯å¦éªŒè¯è¯ä¹¦ | true |
| ES_VERSION | ES ç‰ˆæœ¬ (7 æˆ– 8) | 8 |

### å¯åŠ¨æœåŠ¡å™¨

#### stdio æ¨¡å¼ (ä¸ Claude Desktop ç­‰å®¢æˆ·ç«¯é›†æˆ)

```bash
# ä½¿ç”¨é»˜è®¤é…ç½®
uvx es-mcp-server

# è‡ªå®šä¹‰ ES è¿æ¥
uvx es-mcp-server --host 192.168.0.13 --port 9200 --es-version 8
```

#### SSE æ¨¡å¼ (Web æœåŠ¡å™¨æ¨¡å¼)

```bash
# å¯åŠ¨ SSE æœåŠ¡å™¨
uvx es-mcp-server --transport sse --host 192.168.0.13 --port 9200
```

## å®¢æˆ·ç«¯ä½¿ç”¨è¯´æ˜

é¡¹ç›®åŒ…å«ä¸€ä¸ªç”¨äºéªŒè¯æœåŠ¡å™¨åŠŸèƒ½çš„å®¢æˆ·ç«¯ç¨‹åºã€‚

### å¯åŠ¨å®¢æˆ·ç«¯

```bash
# è¿æ¥åˆ°é»˜è®¤ SSE æœåŠ¡å™¨ (http://localhost:8000/sse)
uvx es-mcp-client

# è‡ªå®šä¹‰ SSE æœåŠ¡å™¨åœ°å€
uvx es-mcp-client --url http://example.com:8000/sse
```

## å¯¹æ¥å…¶ä»–å·¥å…·

### ä¸ Claude Desktop é›†æˆ

Claude Desktop å¯ä»¥é€šè¿‡ MCP åè®®ä½¿ç”¨æœ¬æœåŠ¡ï¼Œä»¥ä¾¿è®¿é—® Elasticsearch æ•°æ®ã€‚

#### stdio æ¨¡å¼é…ç½®

åœ¨ Claude Desktop ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```json
{
  "mcpServers": {
    "elasticsearch-mcp-server": {
      "command": "uvx",
      "args": ["es-mcp-server"],
      "env": {
        "ES_HOST": "your-es-host",
        "ES_PORT": "9200",
        "ES_VERSION": "8"
      }
    }
  }
}
```

#### SSE æ¨¡å¼é…ç½®

å¦‚æœæ‚¨å·²ç»å¯åŠ¨äº† SSE æ¨¡å¼çš„æœåŠ¡å™¨ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹é…ç½®ï¼š

```json
{
  "mcpServers": {
    "elasticsearch-mcp-server": {
      "url": "http://localhost:8000/sse"
    }
  }
}
```

## å•å…ƒæµ‹è¯•

è¿è¡Œå•å…ƒæµ‹è¯•ä»¥éªŒè¯åŠŸèƒ½ï¼š

```bash
pytest
```

## å¼€å‘è°ƒè¯•

æœ¬é¡¹ç›®åŒ…å« VSCode è°ƒè¯•é…ç½®ï¼Œæ‰“å¼€ VSCode åå¯ç›´æ¥ä½¿ç”¨è°ƒè¯•åŠŸèƒ½å¯åŠ¨æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯ã€‚

## æ³¨æ„äº‹é¡¹

- æœ¬é¡¹ç›®åŒæ—¶æ”¯æŒ Elasticsearch 7 å’Œ 8 ç‰ˆæœ¬çš„ API
- æœåŠ¡å™¨é»˜è®¤ä½¿ç”¨ stdio ä¼ è¾“æ¨¡å¼ï¼Œé€‚åˆä¸ Claude Desktop ç­‰å®¢æˆ·ç«¯é›†æˆ
- SSE æ¨¡å¼é€‚åˆä½œä¸ºç‹¬ç«‹æœåŠ¡å¯åŠ¨

## è®¸å¯è¯

[MIT License](./LICENSE)

---

*æœ¬é¡¹ç›®çš„å¤§éƒ¨åˆ†ä»£ç ã€æ–‡æ¡£ã€é…ç½®ç¤ºä¾‹éƒ½æ˜¯ç”¨cursorçš„claude-3.7-sonnetæ ¹æ®[éœ€æ±‚æ–‡æ¡£](/docs/requires.md) ç”Ÿæˆå‡ºæ¥çš„ï¼ˆæç¤ºè¯ï¼šåŸºäºæœ¬æ–‡ä»¶ç”Ÿæˆé¡¹ç›®æ‰€æœ‰ç¨‹åºï¼‰ã€‚* 