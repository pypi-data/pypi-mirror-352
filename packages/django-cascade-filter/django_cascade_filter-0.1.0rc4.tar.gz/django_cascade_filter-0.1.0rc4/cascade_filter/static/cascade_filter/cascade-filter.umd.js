(function(re,U){typeof exports=="object"&&typeof module<"u"?module.exports=U():typeof define=="function"&&define.amd?define(U):(re=typeof globalThis<"u"?globalThis:re||self,re["cascade-filter"]=U())})(this,function(){"use strict";var ca=Object.defineProperty;var da=(re,U,Fe)=>U in re?ca(re,U,{enumerable:!0,configurable:!0,writable:!0,value:Fe}):re[U]=Fe;var P=(re,U,Fe)=>da(re,typeof U!="symbol"?U+"":U,Fe);var gn;const re="5";typeof window<"u"&&((gn=window.__svelte??(window.__svelte={})).v??(gn.v=new Set)).add(re);let U=!1,Fe=!1;function Sn(){U=!0}Sn();const Ft=1,Rt=2,cr=4,Tn=8,Nn=16,On=1,xn=2,Ln=4,Cn=8,In=16,Mn=1,Fn=2,z=Symbol(),Rn="http://www.w3.org/1999/xhtml",dr=!1;function Dn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}var Dt=Array.isArray,kn=Array.prototype.indexOf,kt=Array.from,vr=Object.defineProperty,Re=Object.getOwnPropertyDescriptor,_r=Object.getOwnPropertyDescriptors,Un=Object.prototype,Pn=Array.prototype,Ut=Object.getPrototypeOf,hr=Object.isExtensible;const De=()=>{};function zn(e){return e()}function Pt(e){for(var t=0;t<e.length;t++)e[t]()}const Y=2,br=4,lt=8,zt=16,oe=32,ke=64,it=128,W=256,at=512,j=1024,le=2048,be=4096,fe=8192,st=16384,jn=32768,jt=65536,pr=1<<17,Hn=1<<19,gr=1<<20,Ht=1<<21,ce=Symbol("$state"),qn=Symbol("legacy props");function Vn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Bn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function $n(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Gn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Wn(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Qn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Yn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Kn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Xn=!1;function Te(e){if(typeof e!="object"||e===null||ce in e)return e;const t=Ut(e);if(t!==Un&&t!==Pn)return e;var r=new Map,n=Dt(e),i=ye(0),l=L,a=u=>{var s=L;ae(l);var o=u();return ae(s),o};return n&&r.set("length",ye(e.length)),new Proxy(e,{defineProperty(u,s,o){(!("value"in o)||o.configurable===!1||o.enumerable===!1||o.writable===!1)&&Qn();var d=r.get(s);return d===void 0?(d=a(()=>ye(o.value)),r.set(s,d)):A(d,a(()=>Te(o.value))),!0},deleteProperty(u,s){var o=r.get(s);if(o===void 0)s in u&&(r.set(s,a(()=>ye(z))),qt(i));else{if(n&&typeof s=="string"){var d=r.get("length"),v=Number(s);Number.isInteger(v)&&v<d.v&&A(d,v)}A(o,z),qt(i)}return!0},get(u,s,o){var _;if(s===ce)return e;var d=r.get(s),v=s in u;if(d===void 0&&(!v||(_=Re(u,s))!=null&&_.writable)&&(d=a(()=>ye(Te(v?u[s]:z))),r.set(s,d)),d!==void 0){var f=c(d);return f===z?void 0:f}return Reflect.get(u,s,o)},getOwnPropertyDescriptor(u,s){var o=Reflect.getOwnPropertyDescriptor(u,s);if(o&&"value"in o){var d=r.get(s);d&&(o.value=c(d))}else if(o===void 0){var v=r.get(s),f=v==null?void 0:v.v;if(v!==void 0&&f!==z)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return o},has(u,s){var f;if(s===ce)return!0;var o=r.get(s),d=o!==void 0&&o.v!==z||Reflect.has(u,s);if(o!==void 0||C!==null&&(!d||(f=Re(u,s))!=null&&f.writable)){o===void 0&&(o=a(()=>ye(d?Te(u[s]):z)),r.set(s,o));var v=c(o);if(v===z)return!1}return d},set(u,s,o,d){var w;var v=r.get(s),f=s in u;if(n&&s==="length")for(var _=o;_<v.v;_+=1){var h=r.get(_+"");h!==void 0?A(h,z):_ in u&&(h=a(()=>ye(z)),r.set(_+"",h))}v===void 0?(!f||(w=Re(u,s))!=null&&w.writable)&&(v=a(()=>ye(void 0)),A(v,a(()=>Te(o))),r.set(s,v)):(f=v.v!==z,A(v,a(()=>Te(o))));var E=Reflect.getOwnPropertyDescriptor(u,s);if(E!=null&&E.set&&E.set.call(d,o),!f){if(n&&typeof s=="string"){var b=r.get("length"),y=Number(s);Number.isInteger(y)&&y>=b.v&&A(b,y+1)}qt(i)}return!0},ownKeys(u){c(i);var s=Reflect.ownKeys(u).filter(v=>{var f=r.get(v);return f===void 0||f.v!==z});for(var[o,d]of r)d.v!==z&&!(o in u)&&s.push(o);return s},setPrototypeOf(){Yn()}})}function qt(e,t=1){A(e,e.v+t)}function wr(e){try{if(e!==null&&typeof e=="object"&&ce in e)return e[ce]}catch{}return e}function Jn(e,t){return Object.is(wr(e),wr(t))}var Er,yr,mr,Ar;function Zn(){if(Er===void 0){Er=window,yr=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;mr=Re(t,"firstChild").get,Ar=Re(t,"nextSibling").get,hr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),hr(r)&&(r.__t=void 0)}}function Vt(e=""){return document.createTextNode(e)}function ut(e){return mr.call(e)}function ot(e){return Ar.call(e)}function x(e,t){return ut(e)}function K(e,t){{var r=ut(e);return r instanceof Comment&&r.data===""?ot(r):r}}function F(e,t=1,r=!1){let n=e;for(;t--;)n=ot(n);return n}function el(e){e.textContent=""}function Sr(e){return e===this.v}function Bt(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function tl(e,t){return e!==t}function $t(e){return!Bt(e,this.v)}function Ge(e){var t=Y|le,r=L!==null&&(L.f&Y)!==0?L:null;return C===null||r!==null&&(r.f&W)!==0?t|=W:C.f|=gr,{ctx:R,deps:null,effects:null,equals:Sr,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:r??C}}function de(e){const t=Ge(e);return t.equals=$t,t}function Tr(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)pe(t[r])}}function rl(e){for(var t=e.parent;t!==null;){if((t.f&Y)===0)return t;t=t.parent}return null}function Nr(e){var t,r=C;ge(rl(e));try{Tr(e),t=zr(e)}finally{ge(r)}return t}function Or(e){var t=Nr(e),r=(we||(e.f&W)!==0)&&e.deps!==null?be:j;Z(e,r),e.equals(t)||(e.v=t,e.wv=kr())}function xr(e){C===null&&L===null&&$n(),L!==null&&(L.f&W)!==0&&C===null&&Bn(),Ye&&Vn()}function nl(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Ue(e,t,r,n=!0){var i=C,l={ctx:R,deps:null,nodes_start:null,nodes_end:null,f:e|le,first:null,fn:t,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(r)try{wt(l),l.f|=jn}catch(s){throw pe(l),s}else t!==null&&Et(l);var a=r&&l.deps===null&&l.first===null&&l.nodes_start===null&&l.teardown===null&&(l.f&(gr|it))===0;if(!a&&n&&(i!==null&&nl(l,i),L!==null&&(L.f&Y)!==0)){var u=L;(u.effects??(u.effects=[])).push(l)}return l}function Gt(e){const t=Ue(lt,null,!1);return Z(t,j),t.teardown=e,t}function Wt(e){xr();var t=C!==null&&(C.f&oe)!==0&&R!==null&&!R.m;if(t){var r=R;(r.e??(r.e=[])).push({fn:e,effect:C,reaction:L})}else{var n=We(e);return n}}function ll(e){return xr(),Pe(e)}function il(e){const t=Ue(ke,e,!0);return(r={})=>new Promise(n=>{r.outro?Qe(t,()=>{pe(t),n(void 0)}):(pe(t),n(void 0))})}function We(e){return Ue(br,e,!1)}function Ne(e,t){var r=R,n={effect:null,ran:!1};r.l.r1.push(n),n.effect=Pe(()=>{e(),!n.ran&&(n.ran=!0,A(r.l.r2,!0),ne(t))})}function Oe(){var e=R;Pe(()=>{if(c(e.l.r2)){for(var t of e.l.r1){var r=t.effect;(r.f&j)!==0&&Z(r,be),je(r)&&wt(r),t.ran=!1}e.l.r2.v=!1}})}function Pe(e){return Ue(lt,e,!0)}function X(e,t=[],r=Ge){const n=t.map(r);return ft(()=>e(...n.map(c)))}function ft(e,t=0){return Ue(lt|zt|t,e,!0)}function ze(e,t=!0){return Ue(lt|oe,e,!0,t)}function Lr(e){var t=e.teardown;if(t!==null){const r=Ye,n=L;Rr(!0),ae(null);try{t.call(null)}finally{Rr(r),ae(n)}}}function Cr(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var n=r.next;(r.f&ke)!==0?r.parent=null:pe(r,t),r=n}}function al(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&oe)===0&&pe(t),t=r}}function pe(e,t=!0){var r=!1;(t||(e.f&Hn)!==0)&&e.nodes_start!==null&&(sl(e.nodes_start,e.nodes_end),r=!0),Cr(e,t&&!r),gt(e,0),Z(e,st);var n=e.transitions;if(n!==null)for(const l of n)l.stop();Lr(e);var i=e.parent;i!==null&&i.first!==null&&Ir(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function sl(e,t){for(;e!==null;){var r=e===t?null:ot(e);e.remove(),e=r}}function Ir(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function Qe(e,t){var r=[];Qt(e,r,!0),Mr(r,()=>{pe(e),t&&t()})}function Mr(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var i of e)i.out(n)}else t()}function Qt(e,t,r){if((e.f&fe)===0){if(e.f^=fe,e.transitions!==null)for(const a of e.transitions)(a.is_global||r)&&t.push(a);for(var n=e.first;n!==null;){var i=n.next,l=(n.f&jt)!==0||(n.f&oe)!==0;Qt(n,t,l?r:!1),n=i}}}function ct(e){Fr(e,!0)}function Fr(e,t){if((e.f&fe)!==0){e.f^=fe,(e.f&j)===0&&(e.f^=j),je(e)&&(Z(e,le),Et(e));for(var r=e.first;r!==null;){var n=r.next,i=(r.f&jt)!==0||(r.f&oe)!==0;Fr(r,i?t:!1),r=n}if(e.transitions!==null)for(const l of e.transitions)(l.is_global||t)&&l.in()}}let dt=[];function ul(){var e=dt;dt=[],Pt(e)}function Yt(e){dt.length===0&&queueMicrotask(ul),dt.push(e)}let vt=!1,Kt=!1,_t=null,xe=!1,Ye=!1;function Rr(e){Ye=e}let ht=[],va=[],L=null,ie=!1;function ae(e){L=e}let C=null;function ge(e){C=e}let H=null;function ol(e){L!==null&&L.f&Ht&&(H===null?H=[e]:H.push(e))}let q=null,Q=0,J=null;function fl(e){J=e}let Dr=1,bt=0,we=!1,Ee=null;function kr(){return++Dr}function je(e){var v;var t=e.f;if((t&le)!==0)return!0;if((t&be)!==0){var r=e.deps,n=(t&W)!==0;if(r!==null){var i,l,a=(t&at)!==0,u=n&&C!==null&&!we,s=r.length;if(a||u){var o=e,d=o.parent;for(i=0;i<s;i++)l=r[i],(a||!((v=l==null?void 0:l.reactions)!=null&&v.includes(o)))&&(l.reactions??(l.reactions=[])).push(o);a&&(o.f^=at),u&&d!==null&&(d.f&W)===0&&(o.f^=W)}for(i=0;i<s;i++)if(l=r[i],je(l)&&Or(l),l.wv>e.wv)return!0}(!n||C!==null&&!we)&&Z(e,j)}return!1}function cl(e,t){for(var r=t;r!==null;){if((r.f&it)!==0)try{r.fn(e);return}catch{r.f^=it}r=r.parent}throw vt=!1,e}function Ur(e){return(e.f&st)===0&&(e.parent===null||(e.parent.f&it)===0)}function pt(e,t,r,n){if(vt){if(r===null&&(vt=!1),Ur(t))throw e;return}if(r!==null&&(vt=!0),cl(e,t),Ur(t))throw e}function Pr(e,t,r=!0){var n=e.reactions;if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];H!=null&&H.includes(e)||((l.f&Y)!==0?Pr(l,t,!1):t===l&&(r?Z(l,le):(l.f&j)!==0&&Z(l,be),Et(l)))}}function zr(e){var _;var t=q,r=Q,n=J,i=L,l=we,a=H,u=R,s=ie,o=e.f;q=null,Q=0,J=null,we=(o&W)!==0&&(ie||!xe||L===null),L=(o&(oe|ke))===0?e:null,H=null,Vr(e.ctx),ie=!1,bt++,e.f|=Ht;try{var d=(0,e.fn)(),v=e.deps;if(q!==null){var f;if(gt(e,Q),v!==null&&Q>0)for(v.length=Q+q.length,f=0;f<q.length;f++)v[Q+f]=q[f];else e.deps=v=q;if(!we)for(f=Q;f<v.length;f++)((_=v[f]).reactions??(_.reactions=[])).push(e)}else v!==null&&Q<v.length&&(gt(e,Q),v.length=Q);if(He()&&J!==null&&!ie&&v!==null&&(e.f&(Y|be|le))===0)for(f=0;f<J.length;f++)Pr(J[f],e);return i!==null&&i!==e&&(bt++,J!==null&&(n===null?n=J:n.push(...J))),d}finally{q=t,Q=r,J=n,L=i,we=l,H=a,Vr(u),ie=s,e.f^=Ht}}function dl(e,t){let r=t.reactions;if(r!==null){var n=kn.call(r,e);if(n!==-1){var i=r.length-1;i===0?r=t.reactions=null:(r[n]=r[i],r.pop())}}r===null&&(t.f&Y)!==0&&(q===null||!q.includes(t))&&(Z(t,be),(t.f&(W|at))===0&&(t.f^=at),Tr(t),gt(t,0))}function gt(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)dl(e,r[n])}function wt(e){var t=e.f;if((t&st)===0){Z(e,j);var r=C,n=R,i=xe;C=e,xe=!0;try{(t&zt)!==0?al(e):Cr(e),Lr(e);var l=zr(e);e.teardown=typeof l=="function"?l:null,e.wv=Dr;var a=e.deps,u;dr&&Fe&&e.f&le}catch(s){pt(s,e,r,n||e.ctx)}finally{xe=i,C=r}}}function vl(){try{Gn()}catch(e){if(_t!==null)pt(e,_t,null);else throw e}}function _l(){var e=xe;try{var t=0;for(xe=!0;ht.length>0;){t++>1e3&&vl();var r=ht,n=r.length;ht=[];for(var i=0;i<n;i++){var l=bl(r[i]);hl(l)}Ke.clear()}}finally{Kt=!1,xe=e,_t=null}}function hl(e){var t=e.length;if(t!==0)for(var r=0;r<t;r++){var n=e[r];if((n.f&(st|fe))===0)try{je(n)&&(wt(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?Ir(n):n.fn=null))}catch(i){pt(i,n,null,n.ctx)}}}function Et(e){Kt||(Kt=!0,queueMicrotask(_l));for(var t=_t=e;t.parent!==null;){t=t.parent;var r=t.f;if((r&(ke|oe))!==0){if((r&j)===0)return;t.f^=j}}ht.push(t)}function bl(e){for(var t=[],r=e;r!==null;){var n=r.f,i=(n&(oe|ke))!==0,l=i&&(n&j)!==0;if(!l&&(n&fe)===0){if((n&br)!==0)t.push(r);else if(i)r.f^=j;else try{je(r)&&wt(r)}catch(s){pt(s,r,null,r.ctx)}var a=r.first;if(a!==null){r=a;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)r=u.next,u=u.parent}return t}function c(e){var t=e.f,r=(t&Y)!==0;if(Ee!==null&&Ee.add(e),L!==null&&!ie){if(!(H!=null&&H.includes(e))){var n=L.deps;e.rv<bt&&(e.rv=bt,q===null&&n!==null&&n[Q]===e?Q++:q===null?q=[e]:(!we||!q.includes(e))&&q.push(e))}}else if(r&&e.deps===null&&e.effects===null){var i=e,l=i.parent;l!==null&&(l.f&W)===0&&(i.f^=W)}return r&&(i=e,je(i)&&Or(i)),Ye&&Ke.has(e)?Ke.get(e):e.v}function pl(e){var t=Ee;Ee=new Set;var r=Ee,n;try{if(ne(e),t!==null)for(n of Ee)t.add(n)}finally{Ee=t}return r}function jr(e){var t=pl(()=>ne(e));for(var r of t)if((r.f&pr)!==0)for(const n of r.deps||[])(n.f&Y)===0&&Je(n,n.v);else Je(r,r.v)}function ne(e){var t=ie;try{return ie=!0,e()}finally{ie=t}}const gl=-7169;function Z(e,t){e.f=e.f&gl|t}function Hr(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(ce in e)Xt(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&ce in r&&Xt(r)}}}function Xt(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{Xt(e[n],t)}catch{}const r=Ut(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=_r(r);for(let i in n){const l=n[i].get;if(l)try{l.call(e)}catch{}}}}}const Ke=new Map;function Xe(e,t){var r={f:0,v:e,reactions:null,equals:Sr,rv:0,wv:0};return r}function ye(e,t){const r=Xe(e);return ol(r),r}function I(e,t=!1){var n;const r=Xe(e);return t||(r.equals=$t),U&&R!==null&&R.l!==null&&((n=R.l).s??(n.s=[])).push(r),r}function A(e,t,r=!1){L!==null&&!ie&&He()&&(L.f&(Y|zt))!==0&&!(H!=null&&H.includes(e))&&Kn();let n=r?Te(t):t;return Je(e,n)}function Je(e,t){if(!e.equals(t)){var r=e.v;Ye?Ke.set(e,t):Ke.set(e,r),e.v=t,(e.f&Y)!==0&&((e.f&le)!==0&&Nr(e),Z(e,(e.f&W)===0?j:be)),e.wv=kr(),qr(e,le),He()&&C!==null&&(C.f&j)!==0&&(C.f&(oe|ke))===0&&(J===null?fl([e]):J.push(e))}return t}function qr(e,t){var r=e.reactions;if(r!==null)for(var n=He(),i=r.length,l=0;l<i;l++){var a=r[l],u=a.f;(u&le)===0&&(!n&&a===C||(Z(a,t),(u&(j|W))!==0&&((u&Y)!==0?qr(a,be):Et(a))))}}let R=null;function Vr(e){R=e}function B(e,t=!1,r){var n=R={p:R,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};U&&!t&&(R.l={s:null,u:null,r1:[],r2:Xe(!1)}),Gt(()=>{n.d=!0})}function $(e){const t=R;if(t!==null){const a=t.e;if(a!==null){var r=C,n=L;t.e=null;try{for(var i=0;i<a.length;i++){var l=a[i];ge(l.effect),ae(l.reaction),We(l.fn)}}finally{ge(r),ae(n)}}R=t.p,t.m=!0}return{}}function He(){return!U||R!==null&&R.l===null}const wl=["touchstart","touchmove"];function El(e){return wl.includes(e)}let Br=!1;function yl(){Br||(Br=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function $r(e){var t=L,r=C;ae(null),ge(null);try{return e()}finally{ae(t),ge(r)}}function Jt(e,t,r,n=r){e.addEventListener(t,()=>$r(r));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),yl()}const ml=new Set,Gr=new Set;function Al(e,t,r,n={}){function i(l){if(n.capture||Ze.call(t,l),!l.cancelBubble)return $r(()=>r==null?void 0:r.call(this,l))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Yt(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function ve(e,t,r,n,i){var l={capture:n,passive:i},a=Al(e,t,r,l);(t===document.body||t===window||t===document)&&Gt(()=>{t.removeEventListener(e,a,l)})}function Ze(e){var w;var t=this,r=t.ownerDocument,n=e.type,i=((w=e.composedPath)==null?void 0:w.call(e))||[],l=i[0]||e.target,a=0,u=e.__root;if(u){var s=i.indexOf(u);if(s!==-1&&(t===document||t===window)){e.__root=t;return}var o=i.indexOf(t);if(o===-1)return;s<=o&&(a=s)}if(l=i[a]||e.target,l!==t){vr(e,"currentTarget",{configurable:!0,get(){return l||r}});var d=L,v=C;ae(null),ge(null);try{for(var f,_=[];l!==null;){var h=l.assignedSlot||l.parentNode||l.host||null;try{var E=l["__"+n];if(E!=null&&(!l.disabled||e.target===l))if(Dt(E)){var[b,...y]=E;b.apply(l,[e,...y])}else E.call(l,e)}catch(p){f?_.push(p):f=p}if(e.cancelBubble||h===t||h===null)break;l=h}if(f){for(let p of _)queueMicrotask(()=>{throw p});throw f}}finally{e.__root=t,delete e.currentTarget,ae(d),ge(v)}}}function Sl(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function Zt(e,t){var r=C;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function M(e,t){var r=(t&Mn)!==0,n=(t&Fn)!==0,i,l=!e.startsWith("<!>");return()=>{i===void 0&&(i=Sl(l?e:"<!>"+e),r||(i=ut(i)));var a=n||yr?document.importNode(i,!0):i.cloneNode(!0);if(r){var u=ut(a),s=a.lastChild;Zt(u,s)}else Zt(a,a);return a}}function yt(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Vt();return e.append(t,r),Zt(t,r),e}function O(e,t){e!==null&&e.before(t)}function Le(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r+"")}function Tl(e,t){return Nl(e,t)}const qe=new Map;function Nl(e,{target:t,anchor:r,props:n={},events:i,context:l,intro:a=!0}){Zn();var u=new Set,s=v=>{for(var f=0;f<v.length;f++){var _=v[f];if(!u.has(_)){u.add(_);var h=El(_);t.addEventListener(_,Ze,{passive:h});var E=qe.get(_);E===void 0?(document.addEventListener(_,Ze,{passive:h}),qe.set(_,1)):qe.set(_,E+1)}}};s(kt(ml)),Gr.add(s);var o=void 0,d=il(()=>{var v=r??t.appendChild(Vt());return ze(()=>{if(l){B({});var f=R;f.c=l}i&&(n.$$events=i),o=e(v,n)||{},l&&$()}),()=>{var h;for(var f of u){t.removeEventListener(f,Ze);var _=qe.get(f);--_===0?(document.removeEventListener(f,Ze),qe.delete(f)):qe.set(f,_)}Gr.delete(s),v!==r&&((h=v.parentNode)==null||h.removeChild(v))}});return Ol.set(o,d),o}let Ol=new WeakMap;function me(e,t,[r,n]=[0,0]){var i=e,l=null,a=null,u=z,s=r>0?jt:0,o=!1;const d=(f,_=!0)=>{o=!0,v(_,f)},v=(f,_)=>{u!==(u=f)&&(u?(l?ct(l):_&&(l=ze(()=>_(i))),a&&Qe(a,()=>{a=null})):(a?ct(a):_&&(a=ze(()=>_(i,[r+1,n]))),l&&Qe(l,()=>{l=null})))};ft(()=>{o=!1,t(d),o||v(null,null)},s)}function xl(e,t,r){var n=e,i=z,l,a=He()?tl:Bt;ft(()=>{a(i,i=t())&&(l&&Qe(l),l=ze(()=>r(n)))})}function Ll(e,t){return t}function Cl(e,t,r,n){for(var i=[],l=t.length,a=0;a<l;a++)Qt(t[a].e,i,!0);var u=l>0&&i.length===0&&r!==null;if(u){var s=r.parentNode;el(s),s.append(r),n.clear(),Ae(e,t[0].prev,t[l-1].next)}Mr(i,()=>{for(var o=0;o<l;o++){var d=t[o];u||(n.delete(d.k),Ae(e,d.prev,d.next)),pe(d.e,!u)}})}function mt(e,t,r,n,i,l=null){var a=e,u={flags:t,items:new Map,first:null},s=(t&cr)!==0;if(s){var o=e;a=o.appendChild(Vt())}var d=null,v=!1,f=de(()=>{var _=r();return Dt(_)?_:_==null?[]:kt(_)});ft(()=>{var _=c(f),h=_.length;v&&h===0||(v=h===0,Il(_,u,a,i,t,n,r),l!==null&&(h===0?d?ct(d):d=ze(()=>l(a)):d!==null&&Qe(d,()=>{d=null})),c(f))})}function Il(e,t,r,n,i,l,a){var wn,En,yn,mn;var u=(i&Tn)!==0,s=(i&(Ft|Rt))!==0,o=e.length,d=t.items,v=t.first,f=v,_,h=null,E,b=[],y=[],w,p,g,T;if(u)for(T=0;T<o;T+=1)w=e[T],p=l(w,T),g=d.get(p),g!==void 0&&((wn=g.a)==null||wn.measure(),(E??(E=new Set)).add(g));for(T=0;T<o;T+=1){if(w=e[T],p=l(w,T),g=d.get(p),g===void 0){var D=f?f.e.nodes_start:r;h=Fl(D,t,h,h===null?t.first:h.next,w,p,T,n,i,a),d.set(p,h),b=[],y=[],f=h.next;continue}if(s&&Ml(g,w,T,i),(g.e.f&fe)!==0&&(ct(g.e),u&&((En=g.a)==null||En.unfix(),(E??(E=new Set)).delete(g))),g!==f){if(_!==void 0&&_.has(g)){if(b.length<y.length){var V=y[0],N;h=V.prev;var k=b[0],G=b[b.length-1];for(N=0;N<b.length;N+=1)Wr(b[N],V,r);for(N=0;N<y.length;N+=1)_.delete(y[N]);Ae(t,k.prev,G.next),Ae(t,h,k),Ae(t,G,V),f=V,h=G,T-=1,b=[],y=[]}else _.delete(g),Wr(g,f,r),Ae(t,g.prev,g.next),Ae(t,g,h===null?t.first:h.next),Ae(t,h,g),h=g;continue}for(b=[],y=[];f!==null&&f.k!==p;)(f.e.f&fe)===0&&(_??(_=new Set)).add(f),y.push(f),f=f.next;if(f===null)continue;g=f}b.push(g),h=g,f=g.next}if(f!==null||_!==void 0){for(var ue=_===void 0?[]:kt(_);f!==null;)(f.e.f&fe)===0&&ue.push(f),f=f.next;var he=ue.length;if(he>0){var fa=(i&cr)!==0&&o===0?r:null;if(u){for(T=0;T<he;T+=1)(yn=ue[T].a)==null||yn.measure();for(T=0;T<he;T+=1)(mn=ue[T].a)==null||mn.fix()}Cl(t,ue,fa,d)}}u&&Yt(()=>{var An;if(E!==void 0)for(g of E)(An=g.a)==null||An.apply()}),C.first=t.first&&t.first.e,C.last=h&&h.e}function Ml(e,t,r,n){(n&Ft)!==0&&Je(e.v,t),(n&Rt)!==0?Je(e.i,r):e.i=r}function Fl(e,t,r,n,i,l,a,u,s,o){var d=(s&Ft)!==0,v=(s&Nn)===0,f=d?v?I(i):Xe(i):i,_=(s&Rt)===0?a:Xe(a),h={i:_,v:f,k:l,a:null,e:null,prev:r,next:n};try{return h.e=ze(()=>u(e,f,_,o),Xn),h.e.prev=r&&r.e,h.e.next=n&&n.e,r===null?t.first=h:(r.next=h,r.e.next=h.e),n!==null&&(n.prev=h,n.e.prev=h.e),h}finally{}}function Wr(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,i=t?t.e.nodes_start:r,l=e.e.nodes_start;l!==n;){var a=ot(l);i.before(l),l=a}}function Ae(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function At(e,t,r,n,i){var u;var l=(u=t.$$slots)==null?void 0:u[r],a=!1;l===!0&&(l=t[r==="default"?"children":r],a=!0),l===void 0||l(e,a?()=>n:n)}const Qr=[...` 	
\r\f \v\uFEFF`];function Rl(e,t,r){var n=e==null?"":""+e;if(r){for(var i in r)if(r[i])n=n?n+" "+i:i;else if(n.length)for(var l=i.length,a=0;(a=n.indexOf(i,a))>=0;){var u=a+l;(a===0||Qr.includes(n[a-1]))&&(u===n.length||Qr.includes(n[u]))?n=(a===0?"":n.substring(0,a))+n.substring(u+1):a=u}}return n===""?null:n}function Dl(e,t){return e==null?null:String(e)}function Yr(e,t,r,n,i,l){var a=e.__className;if(a!==r||a===void 0){var u=Rl(r,n,l);u==null?e.removeAttribute("class"):e.className=u,e.__className=r}else if(l&&i!==l)for(var s in l){var o=!!l[s];(i==null||o!==!!i[s])&&e.classList.toggle(s,o)}return l}function kl(e,t,r,n){var i=e.__style;if(i!==t){var l=Dl(t);l==null?e.removeAttribute("style"):e.style.cssText=l,e.__style=t}return n}const Ul=Symbol("is custom element"),Pl=Symbol("is html");function Kr(e,t){var r=Xr(e);r.checked!==(r.checked=t??void 0)&&(e.checked=t)}function St(e,t,r,n){var i=Xr(e);i[t]!==(i[t]=r)&&(r==null?e.removeAttribute(t):typeof r!="string"&&zl(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Xr(e){return e.__attributes??(e.__attributes={[Ul]:e.nodeName.includes("-"),[Pl]:e.namespaceURI===Rn})}var Jr=new Map;function zl(e){var t=Jr.get(e.nodeName);if(t)return t;Jr.set(e.nodeName,t=[]);for(var r,n=e,i=Element.prototype;i!==n;){r=_r(n);for(var l in r)r[l].set&&t.push(l);n=Ut(n)}return t}function er(e,t,r=t){var n=He();Jt(e,"input",i=>{var l=i?e.defaultValue:e.value;if(l=tr(e)?rr(l):l,r(l),n&&l!==(l=t())){var a=e.selectionStart,u=e.selectionEnd;e.value=l??"",u!==null&&(e.selectionStart=a,e.selectionEnd=Math.min(u,e.value.length))}}),ne(t)==null&&e.value&&r(tr(e)?rr(e.value):e.value),Pe(()=>{var i=t();tr(e)&&i===rr(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function jl(e,t,r=t){Jt(e,"change",n=>{var i=n?e.defaultChecked:e.checked;r(i)}),ne(t)==null&&r(e.checked),Pe(()=>{var n=t();e.checked=!!n})}function tr(e){var t=e.type;return t==="number"||t==="range"}function rr(e){return e===""?null:+e}function Zr(e,t,r){if(e.multiple)return ql(e,t);for(var n of e.options){var i=et(n);if(Jn(i,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Hl(e,t){We(()=>{var r=new MutationObserver(()=>{var n=e.__value;Zr(e,n)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function en(e,t,r=t){var n=!0;Jt(e,"change",i=>{var l=i?"[selected]":":checked",a;if(e.multiple)a=[].map.call(e.querySelectorAll(l),et);else{var u=e.querySelector(l)??e.querySelector("option:not([disabled])");a=u&&et(u)}r(a)}),We(()=>{var i=t();if(Zr(e,i,n),n&&i===void 0){var l=e.querySelector(":checked");l!==null&&(i=et(l),r(i))}e.__value=i,n=!1}),Hl(e)}function ql(e,t){for(var r of e.options)r.selected=~t.indexOf(et(r))}function et(e){return"__value"in e?e.__value:e.value}function tn(e,t){return e===t||(e==null?void 0:e[ce])===t}function Tt(e={},t,r,n){return We(()=>{var i,l;return Pe(()=>{i=l,l=[],ne(()=>{e!==r(...l)&&(t(e,...l),i&&tn(r(...i),e)&&t(null,...i))})}),()=>{Yt(()=>{l&&tn(r(...l),e)&&t(null,...l)})}}),e}function ee(e=!1){const t=R,r=t.l.u;if(!r)return;let n=()=>Hr(t.s);if(e){let i=0,l={};const a=Ge(()=>{let u=!1;const s=t.s;for(const o in s)s[o]!==l[o]&&(l[o]=s[o],u=!0);return u&&i++,i});n=()=>c(a)}r.b.length&&ll(()=>{rn(t,n),Pt(r.b)}),Wt(()=>{const i=ne(()=>r.m.map(zn));return()=>{for(const l of i)typeof l=="function"&&l()}}),r.a.length&&Wt(()=>{rn(t,n),Pt(r.a)})}function rn(e,t){if(e.l.s)for(const r of e.l.s)c(r);t()}function Vl(e){R===null&&Dn(),U&&R.l!==null?Bl(R).m.push(e):Wt(()=>{const t=ne(e);if(typeof t=="function")return t})}function Bl(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}function nn(e,t,r){if(e==null)return t(void 0),De;const n=ne(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}const Ve=[];function nr(e,t=De){let r=null;const n=new Set;function i(u){if(Bt(e,u)&&(e=u,r)){const s=!Ve.length;for(const o of n)o[1](),Ve.push(o,e);if(s){for(let o=0;o<Ve.length;o+=2)Ve[o][0](Ve[o+1]);Ve.length=0}}}function l(u){i(u(e))}function a(u,s=De){const o=[u,s];return n.add(o),n.size===1&&(r=t(i,l)||De),u(e),()=>{n.delete(o),n.size===0&&r&&(r(),r=null)}}return{set:i,update:l,subscribe:a}}function ln(e){let t;return nn(e,r=>t=r)(),t}let Nt=!1,lr=Symbol();function $l(e,t,r){const n=r[t]??(r[t]={store:null,source:I(void 0),unsubscribe:De});if(n.store!==e&&!(lr in r))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=De;else{var i=!0;n.unsubscribe=nn(e,l=>{i?n.source.v=l:A(n.source,l)}),i=!1}return e&&lr in r?ln(e):c(n.source)}function Gl(){const e={};function t(){Gt(()=>{for(var r in e)e[r].unsubscribe();vr(e,lr,{enumerable:!1,value:!0})})}return[e,t]}function Wl(e){var t=Nt;try{return Nt=!1,[e(),Nt]}finally{Nt=t}}function an(e){var t;return((t=e.ctx)==null?void 0:t.d)??!1}function m(e,t,r,n){var V;var i=(r&On)!==0,l=!U||(r&xn)!==0,a=(r&Cn)!==0,u=(r&In)!==0,s=!1,o;a?[o,s]=Wl(()=>e[t]):o=e[t];var d=ce in e||qn in e,v=a&&(((V=Re(e,t))==null?void 0:V.set)??(d&&t in e&&(N=>e[t]=N)))||void 0,f=n,_=!0,h=!1,E=()=>(h=!0,_&&(_=!1,u?f=ne(n):f=n),f);o===void 0&&n!==void 0&&(v&&l&&Wn(),o=E(),v&&v(o));var b;if(l)b=()=>{var N=e[t];return N===void 0?E():(_=!0,h=!1,N)};else{var y=(i?Ge:de)(()=>e[t]);y.f|=pr,b=()=>{var N=c(y);return N!==void 0&&(f=void 0),N===void 0?f:N}}if((r&Ln)===0)return b;if(v){var w=e.$$legacy;return function(N,k){return arguments.length>0?((!l||!k||w||s)&&v(k?b():N),N):b()}}var p=!1,g=!1,T=I(o),D=Ge(()=>{var N=b(),k=c(T);return p?(p=!1,g=!0,k):(g=!1,T.v=N)});return a&&c(D),i||(D.equals=$t),function(N,k){if(Ee!==null&&(p=g,b(),c(T)),arguments.length>0){const G=k?c(D):l&&a?Te(N):N;if(!D.equals(G)){if(p=!0,A(T,G),h&&f!==void 0&&(f=G),an(D))return N;ne(()=>c(D))}return N}return an(D)?D.v:c(D)}}const ir=1;var Ot=(e=>(e.FILTER_FIELD="__cascade-filter__field",e.TABLE_META="__cascade-filter__table-meta",e))(Ot||{});function Ql(e){const t=document.getElementById(e);if(!t)throw new Error(`The element with the "${e}" id was not found`);return t.textContent??""}function sn(e){const t=Ql(e);return JSON.parse(t)}class Yl{constructor(t){P(this,"map");this.map=new Map(t.map(r=>[r.name,r]))}getField(t){const r=this.map.get(t);if(r)return r;throw new Error(`Unknown field: "${t}"`)}get fields(){return Array.from(this.map.values())}}var Kl=Object.defineProperty,Xl=(e,t,r)=>t in e?Kl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Jl=(e,t,r)=>Xl(e,t+"",r);class Se{constructor(t=!1){Jl(this,"nullable"),this.nullable=t}deserialize(t){if(t===null){if(this.nullable)return null;throw new Error(`${this.constructor.name}: Null values are not allowed`)}return this._deserialize(t)}}var Zl=Object.defineProperty,ei=(e,t,r)=>t in e?Zl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ar=(e,t,r)=>ei(e,typeof t!="symbol"?t+"":t,r);function un(e,t=!1){return new ti(e,t)}let ti=class extends Se{constructor(t,r=!1){super(r),ar(this,"child"),this.child=t}_deserialize(t){if(!Array.isArray(t))throw new Error(`${this.constructor.name}: Unexpected type of value ${t}`);return t.map(r=>this.child.deserialize(r))}};function ri(e,t){for(const[r,n]of Object.entries(e))if(n===t)return r;return null}function Be(e,t=!1){return new ni(e,t)}let ni=class extends Se{constructor(t,r=!1){super(r),ar(this,"enumeration"),this.enumeration=t}_deserialize(t){let r=ri(this.enumeration,t);if(r===null||typeof this.enumeration[r]=="function")throw new Error(`${this.constructor.name}: Unexpected enum value ${t}`);return this.enumeration[r]}};function li(e=!1){return new ii(e)}class ii extends Se{_deserialize(t){if(typeof t!="number")throw new Error(`${this.constructor.name}: Unexpected type of value ${t}`);return t}}function on(e,t=!1){return new ai(e,t)}class ai extends Se{constructor(t,r=!1){super(r),ar(this,"serializer"),this.serializer=t}_deserialize(t){return this.serializer.deserialize(t)}}function tt(e=!1){return new si(e)}class si extends Se{_deserialize(t){if(typeof t!="string")throw new Error(`${this.constructor.name}: Unexpected type of value ${t}`);return t}}function sr(e=!1){return new ui(e)}class ui extends Se{_deserialize(t){if(typeof t!="boolean")throw new Error(`${this.constructor.name}: Unexpected type of value ${t}`);return t}}function xt(){return new oi}class oi extends Se{constructor(){super(!0)}_deserialize(t){return t}}var fi=Object.defineProperty,ci=(e,t,r)=>t in e?fi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,di=(e,t,r)=>ci(e,t+"",r);function fn(e){return new vi(e)}class vi extends Se{constructor(t){super(!1),di(this,"_child"),this._child=t}_deserialize(t){if(t!==void 0)return this._child.deserialize(t)}}class Lt{serialize(t){const r={};for(const[n,i]of Object.entries(this.fields))if(i instanceof fn)Object.hasOwn(t,n)&&(r[n]=t[n]);else if(Object.hasOwn(t,n))r[n]=t[n];else throw new Error(`Value of field ${n} was missed`);return r}deserialize(t){const r={};for(const[n,i]of Object.entries(this.fields))try{r[n]=i.deserialize(t[n])}catch(l){throw new Error(`Field: ${n}; ${l.message}`)}return r}deserializeMany(t){if(!Array.isArray(t))throw new Error("Data is not array");return t.map(r=>this.deserialize(r))}}class cn{serialize(t){throw new Error("Serialization is not implemented")}deserialize(t){const r={};for(const[n,i]of Object.entries(this.fields))try{r[n]=i.deserialize(t[n])}catch(l){throw new Error(`Field: ${n}; ${l.message}`)}return this.makeObject(...Array.from(Object.values(r)))}deserializeMany(t){if(!Array.isArray(t))throw new Error("Data is not array");return t.map(r=>this.deserialize(r))}}class _i extends Lt{constructor(){super(...arguments);P(this,"fields",{label:tt(),value:xt()})}}var te=(e=>(e.DATE="date",e.CHOICE="choice",e.TEXT="text",e.NUMERIC="numeric",e.BOOLEAN="boolean",e.ARRAY="array",e))(te||{});class hi extends Lt{constructor(){super(...arguments);P(this,"fields",{label:tt(),name:tt(),nullable:sr(),type:Be(te),choices:fn(un(on(new _i)))})}}function bi(e){const t=sn(e),n=new hi().deserializeMany(t);return new Yl(n)}class pi extends Lt{constructor(){super(...arguments);P(this,"fields",{filterEditorVersion:li(),filter:xt()})}}var Ce=(e=>(e.SINGLE="single-filter",e.MULTI="multi-filter",e))(Ce||{}),S=(e=>(e.EQUAL="==",e.NOT_EQUAL="!=",e.GREATER_THAN=">",e.LESS_THAN="<",e.GREATER_THAN_OR_EQUAL=">=",e.LESS_THAN_OR_EQUAL="<=",e.CONTAINS="contains",e.NOT_CONTAINS="not contains",e.IS="is",e.IS_NOT="is not",e.STARTS_WITH="starts with",e.ENDS_WITH="ends with",e.AND="and",e.OR="or",e.IS_NULL="is null",e.IS_NOT_NULL="is not null",e))(S||{});class Ie{constructor(t,r,n,i,l){P(this,"type",Ce.SINGLE);P(this,"enabled");P(this,"clause");P(this,"tableField");P(this,"value");P(this,"subtype");this.enabled=t,this.clause=r,this.tableField=n,this.value=i,this.subtype=l}}class gi extends Lt{constructor(){super(...arguments);P(this,"fields",{label:tt(),value:xt()})}}class wi extends cn{constructor(){super(...arguments);P(this,"fields",{type:Be(Ce),enabled:sr(),clause:Be(S),tableField:tt(),value:on(new gi),subtype:Be(te)})}makeObject(r,n,i,l,a,u){return new Ie(n,i,l,a,u)}}class Ct{constructor(t,r,n){P(this,"type",Ce.MULTI);P(this,"enabled");P(this,"clause");P(this,"subfilters");this.enabled=t,this.clause=r,this.subfilters=n}}class Ei extends cn{constructor(){super(...arguments);P(this,"fields",{type:Be(Ce),enabled:sr(),clause:Be(S),subfilters:un(xt())})}makeObject(r,n,i,l){return new Ct(n,i,l)}}function dn(e){switch(e.type){case Ce.SINGLE:return new wi().deserialize(e);case Ce.MULTI:const n=new Ei().deserialize(e);return n.subfilters=n.subfilters.map(dn),n;default:throw new Error(`Unknown filter type: ${e.type}`)}}function yi(e){let t;try{t=sn(e)}catch(n){console.error(n),console.warn("The default widget data will be used"),t=null}let r;return t?(r=new pi().deserialize(t),r.filter&&(r.filter=dn(r.filter))):r={filterEditorVersion:ir,filter:null},r}const se=nr(null),ur=nr(null),Me=nr(!1);var mi=M('<input type="button" value="+ добавить фильтр" class="svelte-18leb9j">');function vn(e,t){let r=m(t,"onClick",8);var n=mi();ve("click",n,function(...i){var l;(l=r())==null||l.apply(this,i)}),O(e,n)}const or=new Map([[S.EQUAL,"="],[S.NOT_EQUAL,"≠"],[S.GREATER_THAN,">"],[S.LESS_THAN,"<"],[S.GREATER_THAN_OR_EQUAL,"≥"],[S.LESS_THAN_OR_EQUAL,"≤"],[S.CONTAINS,"Содержит"],[S.NOT_CONTAINS,"Не содержит"],[S.IS,"Является"],[S.IS_NOT,"Не является"],[S.STARTS_WITH,"Начинается на"],[S.ENDS_WITH,"Заканчивается на"],[S.AND,"И"],[S.OR,"ИЛИ"],[S.IS_NULL,"Является NULL"],[S.IS_NOT_NULL,"Не является NULL"]]),It=[S.EQUAL,S.NOT_EQUAL],_n=[S.GREATER_THAN,S.LESS_THAN,S.GREATER_THAN_OR_EQUAL,S.LESS_THAN_OR_EQUAL],hn=[S.CONTAINS,S.NOT_CONTAINS],Ai=[S.IS,S.IS_NOT],Si=[S.STARTS_WITH,S.ENDS_WITH],_e=[S.IS_NULL,S.IS_NOT_NULL];var Ti=M('<div><div class="single-filter__main-content svelte-1ffugca"><input type="checkbox"> <div> </div> <div> </div> <div> </div></div> <button class="btn-delete svelte-1ffugca" type="button">&nbsp;×&nbsp;</button></div>');function bn(e,t){B(t,!1);let r=m(t,"tableMeta",8),n=m(t,"filter",12),i=m(t,"onDelete",8);function l(y){const w=y.target;n(n().enabled=w.checked,!0),se.update(p=>p)}ee();var a=Ti();let u;var s=x(a),o=x(s),d=F(o,2),v=x(d),f=F(d,2),_=x(f),h=F(f,2),E=x(h),b=F(s,2);X((y,w,p,g)=>{u=Yr(a,1,"single-filter svelte-1ffugca",null,u,y),Kr(o,n().enabled),Le(v,w),Le(_,p),Le(E,g)},[()=>({disabled:!n().enabled}),()=>r().getField(n().tableField).label,()=>or.get(n().clause)??n().clause,()=>_e.includes(n().clause)?"":n().value.label],de),ve("change",o,l),ve("click",b,function(...y){var w;(w=i())==null||w.apply(this,y)}),O(e,a),$()}var Ni=M('<div><div class="multi-filter__head svelte-w27rta"><input type="checkbox"> <div class="svelte-w27rta"> </div> <button class="btn-delete svelte-w27rta" type="button">&nbsp;×&nbsp;</button></div> <div class="multi-filter__body svelte-w27rta"><!> <!></div></div>');function pn(e,t){B(t,!1);let r=m(t,"tableMeta",8),n=m(t,"filter",12),i=m(t,"onDelete",8);function l(w){const p=w.target;n(n().enabled=p.checked,!0),se.update(g=>g)}function a(){ur.set(n()),Me.set(!0),se.update(w=>w)}function u(w){n(n().subfilters=n().subfilters.filter((p,g)=>g!==w),!0),se.update(p=>p)}ee();var s=Ni();let o;var d=x(s),v=x(d),f=F(v,2),_=x(f),h=F(f,2),E=F(d,2),b=x(E);mt(b,1,()=>n().subfilters,Ll,(w,p,g)=>{var T=yt(),D=K(T);{var V=k=>{pn(k,{get tableMeta(){return r()},get filter(){return c(p)},onDelete:()=>u(g)})},N=(k,G)=>{{var ue=he=>{bn(he,{get tableMeta(){return r()},get filter(){return c(p)},onDelete:()=>u(g)})};me(k,he=>{c(p)instanceof Ie&&he(ue)},G)}};me(D,k=>{c(p)instanceof Ct?k(V):k(N,!1)})}O(w,T)});var y=F(b,2);vn(y,{onClick:a}),X((w,p)=>{o=Yr(s,1,"multi-filter svelte-w27rta",null,o,w),Kr(v,n().enabled),Le(_,p)},[()=>({disabled:!n().enabled}),()=>or.get(n().clause)??n().clause],de),ve("change",v,l),ve("click",h,function(...w){var p;(p=i())==null||p.apply(this,w)}),O(e,s),$()}var Oi=M('<span class="svelte-rveqii"></span>');function Mt(e,t){let r=m(t,"error",8),n=r()instanceof Error?String(r()):r();var i=Oi();i.textContent=n,O(e,i)}function xi(e,t){B(t,!1);const[r,n]=Gl(),i=()=>$l(se,"$filter",r);let l=m(t,"tableMeta",8);function a(){ur.set(null),Me.set(!0)}function u(){se.set(null)}ee();var s=yt(),o=K(s);{var d=f=>{vn(f,{onClick:a})},v=(f,_)=>{{var h=b=>{pn(b,{get tableMeta(){return l()},get filter(){return i()},onDelete:u})},E=(b,y)=>{{var w=g=>{bn(g,{get tableMeta(){return l()},get filter(){return i()},onDelete:u})},p=g=>{Mt(g,{error:"Unknown filter type"})};me(b,g=>{i()instanceof Ie?g(w):g(p,!1)},y)}};me(f,b=>{i()instanceof Ct?b(h):b(E,!1)},_)}};me(o,f=>{i()===null?f(d):f(v,!1)})}O(e,s),$(),n()}var Li=M('<dialog class="svelte-1cjh3t0"><header><!></header> <main><!></main> <footer><!></footer></dialog>');function Ci(e,t){B(t,!1);let r=m(t,"isOpen",12,!1),n=m(t,"style",8,""),i=I();function l(){r(!1)}Ne(()=>(c(i),Hr(r())),()=>{c(i)&&(r()?c(i).showModal():c(i).close())}),Oe();var a=Li(),u=x(a),s=x(u);At(s,t,"header",{});var o=F(u,2),d=x(o);At(d,t,"main",{});var v=F(o,2),f=x(v);At(f,t,"footer",{}),Tt(a,_=>A(i,_),()=>c(i)),X(()=>kl(a,n())),ve("close",a,l),O(e,a),$()}var Ii=M('<div class="form-row"><div><!></div></div>');function $e(e,t){var r=Ii(),n=x(r),i=x(n);At(i,t,"default",{}),O(e,r)}var Mi=M('<label class="vCheckboxLabel svelte-prgwgy"><input type="checkbox"> Включен</label>'),Fi=M("<option> </option>"),Ri=M('<label class="svelte-prgwgy"><select></select> Выражение</label>'),Di=M("<!> <!>",1);function rt(e,t){B(t,!1);let r=m(t,"enabled",12,!1),n=m(t,"clause",12),i=m(t,"clauses",8);ee();var l=Di(),a=K(l);$e(a,{children:(s,o)=>{var d=Mi(),v=x(d);jl(v,r),O(s,d)},$$slots:{default:!0}});var u=F(a,2);$e(u,{children:(s,o)=>{var d=Ri(),v=x(d);X(()=>{n(),jr(()=>{i()})}),mt(v,5,i,f=>f,(f,_,h,E)=>{var b=Fi(),y={},w=x(b);X(p=>{y!==(y=c(_))&&(b.value=(b.__value=c(_))??""),Le(w,p)},[()=>or.get(c(_))??c(_)],de),O(f,b)}),en(v,n),O(s,d)},$$slots:{default:!0}}),O(e,l),$()}var ki=M('<input type="button" value="Добавить фильтр" class="svelte-1fgf3s5">');function nt(e,t){let r=m(t,"onClick",8);var n=ki();ve("click",n,function(...i){var l;(l=r())==null||l.apply(this,i)}),O(e,n)}function Ui(...e){const t=[],r=[];for(const n of e)t.push(n.label),r.push(n.value);return{label:t.join(", "),value:r}}var Pi=M("<option> </option>"),zi=M('<label class="svelte-prgwgy"><select required></select> Значение</label>'),ji=M("<!> <!> <!>",1);function fr(e,t){B(t,!1);let r=m(t,"tableFieldMeta",8),n=m(t,"choices",8),i=m(t,"clauses",8),l=m(t,"onAdd",8),a=m(t,"multiple",8,!0);function u(p){const g=p.target;if(a()){const T=[];for(const D of g.selectedOptions)T.push(n()[+D.value]);_=T}else _=n()[+g.value]}function s(){c(d).reportValidity()&&l()(new Ie(c(v),c(f),r().name,a()?Ui(..._):_,r().type))}let o=[...i(),...r().nullable?_e:[]],d=I(),v=I(!1),f=I(o[0]),_=a()?[n()[0]]:n()[0],h=I();Ne(()=>c(f),()=>{A(h,_e.includes(c(f)))}),Oe(),ee();var E=ji(),b=K(E);rt(b,{clauses:o,get enabled(){return c(v)},set enabled(p){A(v,p)},get clause(){return c(f)},set clause(p){A(f,p)},$$legacy:!0});var y=F(b,2);$e(y,{children:(p,g)=>{var T=zi(),D=x(T);mt(D,7,n,V=>V.value,(V,N,k)=>{var G=Pi(),ue={},he=x(G);X(()=>{ue!==(ue=c(k))&&(G.value=(G.__value=c(k))??""),Le(he,c(N).label)}),O(V,G)}),Tt(D,V=>A(d,V),()=>c(d)),X(()=>{D.multiple=a(),D.disabled=c(h),St(D,"title",c(h)?"Значение будет проигнорировано":"")}),ve("change",D,u),O(p,T)},$$slots:{default:!0}});var w=F(y,2);nt(w,{onClick:s}),O(e,E),$()}function Hi(e,t){let r=m(t,"tableFieldMeta",8),n=m(t,"choices",8),i=m(t,"onAdd",8);const l=de(()=>[...hn]);fr(e,{get tableFieldMeta(){return r()},get choices(){return n()},get onAdd(){return i()},get clauses(){return c(l)}})}function qi(e,t){let r=m(t,"tableFieldMeta",8),n=m(t,"choices",12),i=m(t,"onAdd",8);n([{value:!0,label:"Истина"},{value:!1,label:"Ложь"}]);const l=de(()=>[...Ai]);fr(e,{get tableFieldMeta(){return r()},get choices(){return n()},get clauses(){return c(l)},get onAdd(){return i()},multiple:!1})}function Vi(e,t){let r=m(t,"tableFieldMeta",8),n=m(t,"choices",8),i=m(t,"onAdd",8);const l=de(()=>[...It]);fr(e,{get tableFieldMeta(){return r()},get choices(){return n()},get clauses(){return c(l)},get onAdd(){return i()}})}var Bi=M('<label class="svelte-prgwgy"><input type="date" required> Значение</label>'),$i=M("<!> <!> <!>",1);function Gi(e,t){B(t,!1);let r=m(t,"tableFieldMeta",8),n=m(t,"onAdd",8);m(t,"choices",8);function i(){c(u).reportValidity()&&n()(new Ie(c(s),c(o),r().name,{label:c(d)??a,value:c(d)??a},te.DATE))}const l=[...It,..._n,...r().nullable?_e:[]],a="1970-01-01";let u=I(),s=I(!1),o=I(l[0]),d=I(),v=I();Ne(()=>c(o),()=>{A(v,_e.includes(c(o)))}),Oe(),ee();var f=$i(),_=K(f);rt(_,{clauses:l,get enabled(){return c(s)},set enabled(b){A(s,b)},get clause(){return c(o)},set clause(b){A(o,b)},$$legacy:!0});var h=F(_,2);$e(h,{children:(b,y)=>{var w=Bi(),p=x(w);Tt(p,g=>A(u,g),()=>c(u)),X(()=>{p.disabled=c(v),St(p,"title",c(v)?"Значение будет проигнорировано":"")}),er(p,()=>c(d),g=>A(d,g)),O(b,w)},$$slots:{default:!0}});var E=F(h,2);nt(E,{onClick:i}),O(e,f),$()}var Wi=M('<label class="svelte-prgwgy"><input type="number" required> Значение</label>'),Qi=M("<!> <!> <!>",1);function Yi(e,t){B(t,!1);let r=m(t,"tableFieldMeta",8),n=m(t,"onAdd",8);m(t,"choices",8);function i(){c(u).reportValidity()&&n()(new Ie(c(s),c(o),r().name,{label:""+(c(d)??a),value:c(d)??a},te.NUMERIC))}const l=[...It,..._n,...r().nullable?_e:[]],a=0;let u=I(),s=I(!1),o=I(l[0]),d=I(),v=I();Ne(()=>c(o),()=>{A(v,_e.includes(c(o)))}),Oe(),ee();var f=Qi(),_=K(f);rt(_,{clauses:l,get enabled(){return c(s)},set enabled(b){A(s,b)},get clause(){return c(o)},set clause(b){A(o,b)},$$legacy:!0});var h=F(_,2);$e(h,{children:(b,y)=>{var w=Wi(),p=x(w);Tt(p,g=>A(u,g),()=>c(u)),X(()=>{p.disabled=c(v),St(p,"title",c(v)?"Значение будет проигнорировано":"")}),er(p,()=>c(d),g=>A(d,g)),O(b,w)},$$slots:{default:!0}});var E=F(h,2);nt(E,{onClick:i}),O(e,f),$()}var Ki=M('<label class="svelte-prgwgy"><input type="text"> Значение</label>'),Xi=M("<!> <!> <!>",1);function Ji(e,t){B(t,!1);let r=m(t,"tableFieldMeta",8),n=m(t,"onAdd",8);m(t,"choices",8);function i(){n()(new Ie(c(a),c(u),r().name,{label:c(s),value:c(s)},te.TEXT))}const l=[...It,...hn,...Si,...r().nullable?_e:[]];let a=I(!1),u=I(l[0]),s=I(""),o=I();Ne(()=>c(u),()=>{A(o,_e.includes(c(u)))}),Oe(),ee();var d=Xi(),v=K(d);rt(v,{clauses:l,get enabled(){return c(a)},set enabled(h){A(a,h)},get clause(){return c(u)},set clause(h){A(u,h)},$$legacy:!0});var f=F(v,2);$e(f,{children:(h,E)=>{var b=Ki(),y=x(b);X(()=>{y.disabled=c(o),St(y,"title",c(o)?"Значение будет проигнорировано":"")}),er(y,()=>c(s),w=>A(s,w)),O(h,b)},$$slots:{default:!0}});var _=F(f,2);nt(_,{onClick:i}),O(e,d),$()}var Zi=M("<option> </option>"),ea=M('<h2>Одиночный фильтр</h2> <div class="form-row"><div><label class="svelte-prgwgy"><select></select> Поле таблицы</label></div></div> <!>',1);function ta(e,t){B(t,!1);let r=m(t,"tableMeta",8),n=m(t,"onAdd",8);const i=new Map([[te.ARRAY,Hi],[te.CHOICE,Vi],[te.BOOLEAN,qi],[te.DATE,Gi],[te.NUMERIC,Yi],[te.TEXT,Ji]]);let l=I(r().fields[0]),a=I(null);Ne(()=>c(l),()=>{const _=i.get(c(l).type)??null;A(a,_)}),Oe(),ee();var u=ea(),s=F(K(u),2),o=x(s),d=x(o),v=x(d);X(()=>{c(l),jr(()=>{r()})}),mt(v,5,()=>r().fields,_=>_.name,(_,h)=>{var E=Zi(),b={},y=x(E);X(()=>{b!==(b=c(h))&&(E.value=(E.__value=c(h))??""),Le(y,c(h).label)}),O(_,E)});var f=F(s,2);xl(f,()=>c(a),_=>{var h=yt(),E=K(h);{var b=w=>{const p=de(()=>c(l).choices??[]);c(a)(w,{get tableFieldMeta(){return c(l)},get choices(){return c(p)},get onAdd(){return n()}})},y=w=>{Mt(w,{error:"Столбец этого типа не поддерживается"})};me(E,w=>{c(a)?w(b):w(y,!1)})}O(_,h)}),en(v,()=>c(l),_=>A(l,_)),O(e,u),$()}var ra=M("<h2>Множественный фильтр</h2> <!> <!>",1);function na(e,t){B(t,!1);let r=m(t,"onAdd",8);function n(){r()(new Ct(c(l),c(a),[]))}const i=[S.AND,S.OR];let l=I(),a=I();ee();var u=ra(),s=F(K(u),2);rt(s,{clauses:i,get enabled(){return c(l)},set enabled(d){A(l,d)},get clause(){return c(a)},set clause(d){A(a,d)},$$legacy:!0});var o=F(s,2);nt(o,{onClick:n}),O(e,u),$()}var la=M('<div class="dialog__header svelte-ux1d7j" slot="header"><button class="btn-close svelte-ux1d7j" type="button">×</button> <h2>Добавить фильтр</h2></div>'),ia=M('<div class="dialog__body svelte-ux1d7j" slot="main"><!> <hr class="svelte-ux1d7j"> <!></div>');function aa(e,t){B(t,!1);let r=m(t,"tableMeta",8);function n(a){const u=ln(ur);u?(u.subfilters.push(a),se.update(s=>s)):se.set(a),Me.set(!1)}function i(){Me.set(!1)}let l=I(!1);Vl(()=>{Me.subscribe(a=>{A(l,a)})}),Ne(()=>(c(l),Me),()=>{c(l)||Me.set(c(l))}),Oe(),ee(),Ci(e,{style:"background-color: #fefefe; margin: 5% auto; border: 1px solid #888; width: 40%; padding: 0;",get isOpen(){return c(l)},set isOpen(a){A(l,a)},$$slots:{header:(a,u)=>{var s=la(),o=x(s);ve("click",o,i),O(a,s)},main:(a,u)=>{var s=ia(),o=x(s);ta(o,{get tableMeta(){return r()},onAdd:n});var d=F(o,4);na(d,{onAdd:n}),O(a,s)}},$$legacy:!0}),$()}function sa(e,t){const r=document.getElementById(t);if(!r)throw new Error(`The element with id "${t}" was not found`);const n={filter:e,filterEditorVersion:ir};r.textContent=JSON.stringify(n)}var ua=M("<!> <!>",1);function oa(e,t){B(t,!1);const r=bi(Ot.TABLE_META),n=yi(Ot.FILTER_FIELD);se.set(n.filter),se.subscribe(s=>{sa(s,Ot.FILTER_FIELD)}),ee();var i=yt(),l=K(i);{var a=s=>{Mt(s,{error:"Version of filter is greater than editor version"})},u=(s,o)=>{{var d=f=>{Mt(f,{error:"There are no fields in the table meta"})},v=f=>{var _=ua(),h=K(_);xi(h,{tableMeta:r});var E=F(h,2);aa(E,{tableMeta:r}),O(f,_)};me(s,f=>{r.fields.length===0?f(d):f(v,!1)},o)}};me(l,s=>{n.filterEditorVersion>ir?s(a):s(u,!1)})}O(e,i),$()}return Tl(oa,{target:document.getElementById("__cascade-filter__editor")})});
