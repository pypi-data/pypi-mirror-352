(function(re,k){typeof exports=="object"&&typeof module<"u"?module.exports=k():typeof define=="function"&&define.amd?define(k):(re=typeof globalThis<"u"?globalThis:re||self,re["cascade-filter"]=k())})(this,function(){"use strict";var ha=Object.defineProperty;var ba=(re,k,De)=>k in re?ha(re,k,{enumerable:!0,configurable:!0,writable:!0,value:De}):re[k]=De;var P=(re,k,De)=>ba(re,typeof k!="symbol"?k+"":k,De);var pn;const re="5";typeof window<"u"&&((pn=window.__svelte??(window.__svelte={})).v??(pn.v=new Set)).add(re);let k=!1,De=!1;function Sn(){k=!0}Sn();const Dt=1,Rt=2,cr=4,Tn=8,Nn=16,On=1,Ln=2,xn=4,Cn=8,In=16,Mn=1,Fn=2,z=Symbol(),Dn="http://www.w3.org/1999/xhtml",dr=!1;function Rn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}var Ut=Array.isArray,Un=Array.prototype.indexOf,kt=Array.from,vr=Object.defineProperty,Re=Object.getOwnPropertyDescriptor,_r=Object.getOwnPropertyDescriptors,kn=Object.prototype,Pn=Array.prototype,Pt=Object.getPrototypeOf,hr=Object.isExtensible;const Ue=()=>{};function zn(e){return e()}function zt(e){for(var t=0;t<e.length;t++)e[t]()}const Z=2,br=4,st=8,jt=16,fe=32,ke=64,ut=128,Y=256,ot=512,j=1024,ie=2048,be=4096,ce=8192,ft=16384,jn=32768,qt=65536,gr=1<<17,qn=1<<19,pr=1<<20,Ht=1<<21,de=Symbol("$state"),Hn=Symbol("legacy props"),Vn=Symbol("");function Bn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function $n(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Gn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Wn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Yn(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Qn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Kn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Xn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Jn=!1;function Le(e){if(typeof e!="object"||e===null||de in e)return e;const t=Pt(e);if(t!==kn&&t!==Pn)return e;var r=new Map,n=Ut(e),i=me(0),l=M,a=u=>{var s=M;se(l);var o=u();return se(s),o};return n&&r.set("length",me(e.length)),new Proxy(e,{defineProperty(u,s,o){(!("value"in o)||o.configurable===!1||o.enumerable===!1||o.writable===!1)&&Qn();var d=r.get(s);return d===void 0?(d=a(()=>me(o.value)),r.set(s,d)):m(d,a(()=>Le(o.value))),!0},deleteProperty(u,s){var o=r.get(s);if(o===void 0)s in u&&(r.set(s,a(()=>me(z))),Vt(i));else{if(n&&typeof s=="string"){var d=r.get("length"),v=Number(s);Number.isInteger(v)&&v<d.v&&m(d,v)}m(o,z),Vt(i)}return!0},get(u,s,o){var _;if(s===de)return e;var d=r.get(s),v=s in u;if(d===void 0&&(!v||(_=Re(u,s))!=null&&_.writable)&&(d=a(()=>me(Le(v?u[s]:z))),r.set(s,d)),d!==void 0){var f=c(d);return f===z?void 0:f}return Reflect.get(u,s,o)},getOwnPropertyDescriptor(u,s){var o=Reflect.getOwnPropertyDescriptor(u,s);if(o&&"value"in o){var d=r.get(s);d&&(o.value=c(d))}else if(o===void 0){var v=r.get(s),f=v==null?void 0:v.v;if(v!==void 0&&f!==z)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return o},has(u,s){var f;if(s===de)return!0;var o=r.get(s),d=o!==void 0&&o.v!==z||Reflect.has(u,s);if(o!==void 0||F!==null&&(!d||(f=Re(u,s))!=null&&f.writable)){o===void 0&&(o=a(()=>me(d?Le(u[s]):z)),r.set(s,o));var v=c(o);if(v===z)return!1}return d},set(u,s,o,d){var w;var v=r.get(s),f=s in u;if(n&&s==="length")for(var _=o;_<v.v;_+=1){var h=r.get(_+"");h!==void 0?m(h,z):_ in u&&(h=a(()=>me(z)),r.set(_+"",h))}v===void 0?(!f||(w=Re(u,s))!=null&&w.writable)&&(v=a(()=>me(void 0)),m(v,a(()=>Le(o))),r.set(s,v)):(f=v.v!==z,m(v,a(()=>Le(o))));var E=Reflect.getOwnPropertyDescriptor(u,s);if(E!=null&&E.set&&E.set.call(d,o),!f){if(n&&typeof s=="string"){var b=r.get("length"),A=Number(s);Number.isInteger(A)&&A>=b.v&&m(b,A+1)}Vt(i)}return!0},ownKeys(u){c(i);var s=Reflect.ownKeys(u).filter(v=>{var f=r.get(v);return f===void 0||f.v!==z});for(var[o,d]of r)d.v!==z&&!(o in u)&&s.push(o);return s},setPrototypeOf(){Kn()}})}function Vt(e,t=1){m(e,e.v+t)}function wr(e){try{if(e!==null&&typeof e=="object"&&de in e)return e[de]}catch{}return e}function Zn(e,t){return Object.is(wr(e),wr(t))}var Er,yr,Ar,mr;function el(){if(Er===void 0){Er=window,yr=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;Ar=Re(t,"firstChild").get,mr=Re(t,"nextSibling").get,hr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),hr(r)&&(r.__t=void 0)}}function Bt(e=""){return document.createTextNode(e)}function ct(e){return Ar.call(e)}function dt(e){return mr.call(e)}function x(e,t){return ct(e)}function Q(e,t){{var r=ct(e);return r instanceof Comment&&r.data===""?dt(r):r}}function I(e,t=1,r=!1){let n=e;for(;t--;)n=dt(n);return n}function tl(e){e.textContent=""}function Sr(e){return e===this.v}function $t(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function rl(e,t){return e!==t}function Gt(e){return!$t(e,this.v)}function Qe(e){var t=Z|ie,r=M!==null&&(M.f&Z)!==0?M:null;return F===null||r!==null&&(r.f&Y)!==0?t|=Y:F.f|=pr,{ctx:D,deps:null,effects:null,equals:Sr,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:r??F}}function ve(e){const t=Qe(e);return t.equals=Gt,t}function Tr(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)we(t[r])}}function nl(e){for(var t=e.parent;t!==null;){if((t.f&Z)===0)return t;t=t.parent}return null}function Nr(e){var t,r=F;Ee(nl(e));try{Tr(e),t=zr(e)}finally{Ee(r)}return t}function Or(e){var t=Nr(e),r=(ye||(e.f&Y)!==0)&&e.deps!==null?be:j;te(e,r),e.equals(t)||(e.v=t,e.wv=Ur())}function Lr(e){F===null&&M===null&&Gn(),M!==null&&(M.f&Y)!==0&&F===null&&$n(),Je&&Bn()}function ll(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Pe(e,t,r,n=!0){var i=F,l={ctx:D,deps:null,nodes_start:null,nodes_end:null,f:e|ie,first:null,fn:t,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(r)try{At(l),l.f|=jn}catch(s){throw we(l),s}else t!==null&&mt(l);var a=r&&l.deps===null&&l.first===null&&l.nodes_start===null&&l.teardown===null&&(l.f&(pr|ut))===0;if(!a&&n&&(i!==null&&ll(l,i),M!==null&&(M.f&Z)!==0)){var u=M;(u.effects??(u.effects=[])).push(l)}return l}function Wt(e){const t=Pe(st,null,!1);return te(t,j),t.teardown=e,t}function Yt(e){Lr();var t=F!==null&&(F.f&fe)!==0&&D!==null&&!D.m;if(t){var r=D;(r.e??(r.e=[])).push({fn:e,effect:F,reaction:M})}else{var n=Ke(e);return n}}function il(e){return Lr(),ze(e)}function al(e){const t=Pe(ke,e,!0);return(r={})=>new Promise(n=>{r.outro?Xe(t,()=>{we(t),n(void 0)}):(we(t),n(void 0))})}function Ke(e){return Pe(br,e,!1)}function ge(e,t){var r=D,n={effect:null,ran:!1};r.l.r1.push(n),n.effect=ze(()=>{e(),!n.ran&&(n.ran=!0,m(r.l.r2,!0),ne(t))})}function pe(){var e=D;ze(()=>{if(c(e.l.r2)){for(var t of e.l.r1){var r=t.effect;(r.f&j)!==0&&te(r,be),qe(r)&&At(r),t.ran=!1}e.l.r2.v=!1}})}function ze(e){return Pe(st,e,!0)}function K(e,t=[],r=Qe){const n=t.map(r);return vt(()=>e(...n.map(c)))}function vt(e,t=0){return Pe(st|jt|t,e,!0)}function je(e,t=!0){return Pe(st|fe,e,!0,t)}function xr(e){var t=e.teardown;if(t!==null){const r=Je,n=M;Dr(!0),se(null);try{t.call(null)}finally{Dr(r),se(n)}}}function Cr(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var n=r.next;(r.f&ke)!==0?r.parent=null:we(r,t),r=n}}function sl(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&fe)===0&&we(t),t=r}}function we(e,t=!0){var r=!1;(t||(e.f&qn)!==0)&&e.nodes_start!==null&&(ul(e.nodes_start,e.nodes_end),r=!0),Cr(e,t&&!r),yt(e,0),te(e,ft);var n=e.transitions;if(n!==null)for(const l of n)l.stop();xr(e);var i=e.parent;i!==null&&i.first!==null&&Ir(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function ul(e,t){for(;e!==null;){var r=e===t?null:dt(e);e.remove(),e=r}}function Ir(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function Xe(e,t){var r=[];Qt(e,r,!0),Mr(r,()=>{we(e),t&&t()})}function Mr(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var i of e)i.out(n)}else t()}function Qt(e,t,r){if((e.f&ce)===0){if(e.f^=ce,e.transitions!==null)for(const a of e.transitions)(a.is_global||r)&&t.push(a);for(var n=e.first;n!==null;){var i=n.next,l=(n.f&qt)!==0||(n.f&fe)!==0;Qt(n,t,l?r:!1),n=i}}}function _t(e){Fr(e,!0)}function Fr(e,t){if((e.f&ce)!==0){e.f^=ce,(e.f&j)===0&&(e.f^=j),qe(e)&&(te(e,ie),mt(e));for(var r=e.first;r!==null;){var n=r.next,i=(r.f&qt)!==0||(r.f&fe)!==0;Fr(r,i?t:!1),r=n}if(e.transitions!==null)for(const l of e.transitions)(l.is_global||t)&&l.in()}}let ht=[];function ol(){var e=ht;ht=[],zt(e)}function Kt(e){ht.length===0&&queueMicrotask(ol),ht.push(e)}let bt=!1,Xt=!1,gt=null,xe=!1,Je=!1;function Dr(e){Je=e}let pt=[],ga=[],M=null,ae=!1;function se(e){M=e}let F=null;function Ee(e){F=e}let q=null;function fl(e){M!==null&&M.f&Ht&&(q===null?q=[e]:q.push(e))}let H=null,X=0,ee=null;function cl(e){ee=e}let Rr=1,wt=0,ye=!1,Ae=null;function Ur(){return++Rr}function qe(e){var v;var t=e.f;if((t&ie)!==0)return!0;if((t&be)!==0){var r=e.deps,n=(t&Y)!==0;if(r!==null){var i,l,a=(t&ot)!==0,u=n&&F!==null&&!ye,s=r.length;if(a||u){var o=e,d=o.parent;for(i=0;i<s;i++)l=r[i],(a||!((v=l==null?void 0:l.reactions)!=null&&v.includes(o)))&&(l.reactions??(l.reactions=[])).push(o);a&&(o.f^=ot),u&&d!==null&&(d.f&Y)===0&&(o.f^=Y)}for(i=0;i<s;i++)if(l=r[i],qe(l)&&Or(l),l.wv>e.wv)return!0}(!n||F!==null&&!ye)&&te(e,j)}return!1}function dl(e,t){for(var r=t;r!==null;){if((r.f&ut)!==0)try{r.fn(e);return}catch{r.f^=ut}r=r.parent}throw bt=!1,e}function kr(e){return(e.f&ft)===0&&(e.parent===null||(e.parent.f&ut)===0)}function Et(e,t,r,n){if(bt){if(r===null&&(bt=!1),kr(t))throw e;return}if(r!==null&&(bt=!0),dl(e,t),kr(t))throw e}function Pr(e,t,r=!0){var n=e.reactions;if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];q!=null&&q.includes(e)||((l.f&Z)!==0?Pr(l,t,!1):t===l&&(r?te(l,ie):(l.f&j)!==0&&te(l,be),mt(l)))}}function zr(e){var _;var t=H,r=X,n=ee,i=M,l=ye,a=q,u=D,s=ae,o=e.f;H=null,X=0,ee=null,ye=(o&Y)!==0&&(ae||!xe||M===null),M=(o&(fe|ke))===0?e:null,q=null,Vr(e.ctx),ae=!1,wt++,e.f|=Ht;try{var d=(0,e.fn)(),v=e.deps;if(H!==null){var f;if(yt(e,X),v!==null&&X>0)for(v.length=X+H.length,f=0;f<H.length;f++)v[X+f]=H[f];else e.deps=v=H;if(!ye)for(f=X;f<v.length;f++)((_=v[f]).reactions??(_.reactions=[])).push(e)}else v!==null&&X<v.length&&(yt(e,X),v.length=X);if(He()&&ee!==null&&!ae&&v!==null&&(e.f&(Z|be|ie))===0)for(f=0;f<ee.length;f++)Pr(ee[f],e);return i!==null&&i!==e&&(wt++,ee!==null&&(n===null?n=ee:n.push(...ee))),d}finally{H=t,X=r,ee=n,M=i,ye=l,q=a,Vr(u),ae=s,e.f^=Ht}}function vl(e,t){let r=t.reactions;if(r!==null){var n=Un.call(r,e);if(n!==-1){var i=r.length-1;i===0?r=t.reactions=null:(r[n]=r[i],r.pop())}}r===null&&(t.f&Z)!==0&&(H===null||!H.includes(t))&&(te(t,be),(t.f&(Y|ot))===0&&(t.f^=ot),Tr(t),yt(t,0))}function yt(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)vl(e,r[n])}function At(e){var t=e.f;if((t&ft)===0){te(e,j);var r=F,n=D,i=xe;F=e,xe=!0;try{(t&jt)!==0?sl(e):Cr(e),xr(e);var l=zr(e);e.teardown=typeof l=="function"?l:null,e.wv=Rr;var a=e.deps,u;dr&&De&&e.f&ie}catch(s){Et(s,e,r,n||e.ctx)}finally{xe=i,F=r}}}function _l(){try{Wn()}catch(e){if(gt!==null)Et(e,gt,null);else throw e}}function hl(){var e=xe;try{var t=0;for(xe=!0;pt.length>0;){t++>1e3&&_l();var r=pt,n=r.length;pt=[];for(var i=0;i<n;i++){var l=gl(r[i]);bl(l)}Ze.clear()}}finally{Xt=!1,xe=e,gt=null}}function bl(e){var t=e.length;if(t!==0)for(var r=0;r<t;r++){var n=e[r];if((n.f&(ft|ce))===0)try{qe(n)&&(At(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?Ir(n):n.fn=null))}catch(i){Et(i,n,null,n.ctx)}}}function mt(e){Xt||(Xt=!0,queueMicrotask(hl));for(var t=gt=e;t.parent!==null;){t=t.parent;var r=t.f;if((r&(ke|fe))!==0){if((r&j)===0)return;t.f^=j}}pt.push(t)}function gl(e){for(var t=[],r=e;r!==null;){var n=r.f,i=(n&(fe|ke))!==0,l=i&&(n&j)!==0;if(!l&&(n&ce)===0){if((n&br)!==0)t.push(r);else if(i)r.f^=j;else try{qe(r)&&At(r)}catch(s){Et(s,r,null,r.ctx)}var a=r.first;if(a!==null){r=a;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)r=u.next,u=u.parent}return t}function c(e){var t=e.f,r=(t&Z)!==0;if(Ae!==null&&Ae.add(e),M!==null&&!ae){if(!(q!=null&&q.includes(e))){var n=M.deps;e.rv<wt&&(e.rv=wt,H===null&&n!==null&&n[X]===e?X++:H===null?H=[e]:(!ye||!H.includes(e))&&H.push(e))}}else if(r&&e.deps===null&&e.effects===null){var i=e,l=i.parent;l!==null&&(l.f&Y)===0&&(i.f^=Y)}return r&&(i=e,qe(i)&&Or(i)),Je&&Ze.has(e)?Ze.get(e):e.v}function pl(e){var t=Ae;Ae=new Set;var r=Ae,n;try{if(ne(e),t!==null)for(n of Ae)t.add(n)}finally{Ae=t}return r}function jr(e){var t=pl(()=>ne(e));for(var r of t)if((r.f&gr)!==0)for(const n of r.deps||[])(n.f&Z)===0&&tt(n,n.v);else tt(r,r.v)}function ne(e){var t=ae;try{return ae=!0,e()}finally{ae=t}}const wl=-7169;function te(e,t){e.f=e.f&wl|t}function qr(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(de in e)Jt(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&de in r&&Jt(r)}}}function Jt(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{Jt(e[n],t)}catch{}const r=Pt(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=_r(r);for(let i in n){const l=n[i].get;if(l)try{l.call(e)}catch{}}}}}const Ze=new Map;function et(e,t){var r={f:0,v:e,reactions:null,equals:Sr,rv:0,wv:0};return r}function me(e,t){const r=et(e);return fl(r),r}function N(e,t=!1){var n;const r=et(e);return t||(r.equals=Gt),k&&D!==null&&D.l!==null&&((n=D.l).s??(n.s=[])).push(r),r}function m(e,t,r=!1){M!==null&&!ae&&He()&&(M.f&(Z|jt))!==0&&!(q!=null&&q.includes(e))&&Xn();let n=r?Le(t):t;return tt(e,n)}function tt(e,t){if(!e.equals(t)){var r=e.v;Je?Ze.set(e,t):Ze.set(e,r),e.v=t,(e.f&Z)!==0&&((e.f&ie)!==0&&Nr(e),te(e,(e.f&Y)===0?j:be)),e.wv=Ur(),Hr(e,ie),He()&&F!==null&&(F.f&j)!==0&&(F.f&(fe|ke))===0&&(ee===null?cl([e]):ee.push(e))}return t}function Hr(e,t){var r=e.reactions;if(r!==null)for(var n=He(),i=r.length,l=0;l<i;l++){var a=r[l],u=a.f;(u&ie)===0&&(!n&&a===F||(te(a,t),(u&(j|Y))!==0&&((u&Z)!==0?Hr(a,be):mt(a))))}}let D=null;function Vr(e){D=e}function V(e,t=!1,r){var n=D={p:D,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};k&&!t&&(D.l={s:null,u:null,r1:[],r2:et(!1)}),Wt(()=>{n.d=!0})}function B(e){const t=D;if(t!==null){const a=t.e;if(a!==null){var r=F,n=M;t.e=null;try{for(var i=0;i<a.length;i++){var l=a[i];Ee(l.effect),se(l.reaction),Ke(l.fn)}}finally{Ee(r),se(n)}}D=t.p,t.m=!0}return{}}function He(){return!k||D!==null&&D.l===null}const El=["touchstart","touchmove"];function yl(e){return El.includes(e)}let Br=!1;function Al(){Br||(Br=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function $r(e){var t=M,r=F;se(null),Ee(null);try{return e()}finally{se(t),Ee(r)}}function Zt(e,t,r,n=r){e.addEventListener(t,()=>$r(r));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),Al()}const ml=new Set,Gr=new Set;function Sl(e,t,r,n={}){function i(l){if(n.capture||rt.call(t,l),!l.cancelBubble)return $r(()=>r==null?void 0:r.call(this,l))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Kt(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function _e(e,t,r,n,i){var l={capture:n,passive:i},a=Sl(e,t,r,l);(t===document.body||t===window||t===document)&&Wt(()=>{t.removeEventListener(e,a,l)})}function rt(e){var w;var t=this,r=t.ownerDocument,n=e.type,i=((w=e.composedPath)==null?void 0:w.call(e))||[],l=i[0]||e.target,a=0,u=e.__root;if(u){var s=i.indexOf(u);if(s!==-1&&(t===document||t===window)){e.__root=t;return}var o=i.indexOf(t);if(o===-1)return;s<=o&&(a=s)}if(l=i[a]||e.target,l!==t){vr(e,"currentTarget",{configurable:!0,get(){return l||r}});var d=M,v=F;se(null),Ee(null);try{for(var f,_=[];l!==null;){var h=l.assignedSlot||l.parentNode||l.host||null;try{var E=l["__"+n];if(E!=null&&(!l.disabled||e.target===l))if(Ut(E)){var[b,...A]=E;b.apply(l,[e,...A])}else E.call(l,e)}catch(g){f?_.push(g):f=g}if(e.cancelBubble||h===t||h===null)break;l=h}if(f){for(let g of _)queueMicrotask(()=>{throw g});throw f}}finally{e.__root=t,delete e.currentTarget,se(d),Ee(v)}}}function Tl(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function er(e,t){var r=F;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function C(e,t){var r=(t&Mn)!==0,n=(t&Fn)!==0,i,l=!e.startsWith("<!>");return()=>{i===void 0&&(i=Tl(l?e:"<!>"+e),r||(i=ct(i)));var a=n||yr?document.importNode(i,!0):i.cloneNode(!0);if(r){var u=ct(a),s=a.lastChild;er(u,s)}else er(a,a);return a}}function St(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Bt();return e.append(t,r),er(t,r),e}function O(e,t){e!==null&&e.before(t)}function Ce(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r+"")}function Nl(e,t){return Ol(e,t)}const Ve=new Map;function Ol(e,{target:t,anchor:r,props:n={},events:i,context:l,intro:a=!0}){el();var u=new Set,s=v=>{for(var f=0;f<v.length;f++){var _=v[f];if(!u.has(_)){u.add(_);var h=yl(_);t.addEventListener(_,rt,{passive:h});var E=Ve.get(_);E===void 0?(document.addEventListener(_,rt,{passive:h}),Ve.set(_,1)):Ve.set(_,E+1)}}};s(kt(ml)),Gr.add(s);var o=void 0,d=al(()=>{var v=r??t.appendChild(Bt());return je(()=>{if(l){V({});var f=D;f.c=l}i&&(n.$$events=i),o=e(v,n)||{},l&&B()}),()=>{var h;for(var f of u){t.removeEventListener(f,rt);var _=Ve.get(f);--_===0?(document.removeEventListener(f,rt),Ve.delete(f)):Ve.set(f,_)}Gr.delete(s),v!==r&&((h=v.parentNode)==null||h.removeChild(v))}});return Ll.set(o,d),o}let Ll=new WeakMap;function Se(e,t,[r,n]=[0,0]){var i=e,l=null,a=null,u=z,s=r>0?qt:0,o=!1;const d=(f,_=!0)=>{o=!0,v(_,f)},v=(f,_)=>{u!==(u=f)&&(u?(l?_t(l):_&&(l=je(()=>_(i))),a&&Xe(a,()=>{a=null})):(a?_t(a):_&&(a=je(()=>_(i,[r+1,n]))),l&&Xe(l,()=>{l=null})))};vt(()=>{o=!1,t(d),o||v(null,null)},s)}function xl(e,t,r){var n=e,i=z,l,a=He()?rl:$t;vt(()=>{a(i,i=t())&&(l&&Xe(l),l=je(()=>r(n)))})}function Cl(e,t){return t}function Il(e,t,r,n){for(var i=[],l=t.length,a=0;a<l;a++)Qt(t[a].e,i,!0);var u=l>0&&i.length===0&&r!==null;if(u){var s=r.parentNode;tl(s),s.append(r),n.clear(),Te(e,t[0].prev,t[l-1].next)}Mr(i,()=>{for(var o=0;o<l;o++){var d=t[o];u||(n.delete(d.k),Te(e,d.prev,d.next)),we(d.e,!u)}})}function Tt(e,t,r,n,i,l=null){var a=e,u={flags:t,items:new Map,first:null},s=(t&cr)!==0;if(s){var o=e;a=o.appendChild(Bt())}var d=null,v=!1,f=ve(()=>{var _=r();return Ut(_)?_:_==null?[]:kt(_)});vt(()=>{var _=c(f),h=_.length;v&&h===0||(v=h===0,Ml(_,u,a,i,t,n,r),l!==null&&(h===0?d?_t(d):d=je(()=>l(a)):d!==null&&Xe(d,()=>{d=null})),c(f))})}function Ml(e,t,r,n,i,l,a){var wn,En,yn,An;var u=(i&Tn)!==0,s=(i&(Dt|Rt))!==0,o=e.length,d=t.items,v=t.first,f=v,_,h=null,E,b=[],A=[],w,g,p,T;if(u)for(T=0;T<o;T+=1)w=e[T],g=l(w,T),p=d.get(g),p!==void 0&&((wn=p.a)==null||wn.measure(),(E??(E=new Set)).add(p));for(T=0;T<o;T+=1){if(w=e[T],g=l(w,T),p=d.get(g),p===void 0){var R=f?f.e.nodes_start:r;h=Dl(R,t,h,h===null?t.first:h.next,w,g,T,n,i,a),d.set(g,h),b=[],A=[],f=h.next;continue}if(s&&Fl(p,w,T,i),(p.e.f&ce)!==0&&(_t(p.e),u&&((En=p.a)==null||En.unfix(),(E??(E=new Set)).delete(p))),p!==f){if(_!==void 0&&_.has(p)){if(b.length<A.length){var $=A[0],L;h=$.prev;var U=b[0],W=b[b.length-1];for(L=0;L<b.length;L+=1)Wr(b[L],$,r);for(L=0;L<A.length;L+=1)_.delete(A[L]);Te(t,U.prev,W.next),Te(t,h,U),Te(t,W,$),f=$,h=W,T-=1,b=[],A=[]}else _.delete(p),Wr(p,f,r),Te(t,p.prev,p.next),Te(t,p,h===null?t.first:h.next),Te(t,h,p),h=p;continue}for(b=[],A=[];f!==null&&f.k!==g;)(f.e.f&ce)===0&&(_??(_=new Set)).add(f),A.push(f),f=f.next;if(f===null)continue;p=f}b.push(p),h=p,f=p.next}if(f!==null||_!==void 0){for(var oe=_===void 0?[]:kt(_);f!==null;)(f.e.f&ce)===0&&oe.push(f),f=f.next;var he=oe.length;if(he>0){var _a=(i&cr)!==0&&o===0?r:null;if(u){for(T=0;T<he;T+=1)(yn=oe[T].a)==null||yn.measure();for(T=0;T<he;T+=1)(An=oe[T].a)==null||An.fix()}Il(t,oe,_a,d)}}u&&Kt(()=>{var mn;if(E!==void 0)for(p of E)(mn=p.a)==null||mn.apply()}),F.first=t.first&&t.first.e,F.last=h&&h.e}function Fl(e,t,r,n){(n&Dt)!==0&&tt(e.v,t),(n&Rt)!==0?tt(e.i,r):e.i=r}function Dl(e,t,r,n,i,l,a,u,s,o){var d=(s&Dt)!==0,v=(s&Nn)===0,f=d?v?N(i):et(i):i,_=(s&Rt)===0?a:et(a),h={i:_,v:f,k:l,a:null,e:null,prev:r,next:n};try{return h.e=je(()=>u(e,f,_,o),Jn),h.e.prev=r&&r.e,h.e.next=n&&n.e,r===null?t.first=h:(r.next=h,r.e.next=h.e),n!==null&&(n.prev=h,n.e.prev=h.e),h}finally{}}function Wr(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,i=t?t.e.nodes_start:r,l=e.e.nodes_start;l!==n;){var a=dt(l);i.before(l),l=a}}function Te(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Nt(e,t,r,n,i){var u;var l=(u=t.$$slots)==null?void 0:u[r],a=!1;l===!0&&(l=t[r==="default"?"children":r],a=!0),l===void 0||l(e,a?()=>n:n)}const Yr=[...` 	
\r\f \v\uFEFF`];function Rl(e,t,r){var n=e==null?"":""+e;if(r){for(var i in r)if(r[i])n=n?n+" "+i:i;else if(n.length)for(var l=i.length,a=0;(a=n.indexOf(i,a))>=0;){var u=a+l;(a===0||Yr.includes(n[a-1]))&&(u===n.length||Yr.includes(n[u]))?n=(a===0?"":n.substring(0,a))+n.substring(u+1):a=u}}return n===""?null:n}function Ul(e,t){return e==null?null:String(e)}function Qr(e,t,r,n,i,l){var a=e.__className;if(a!==r||a===void 0){var u=Rl(r,n,l);u==null?e.removeAttribute("class"):e.className=u,e.__className=r}else if(l&&i!==l)for(var s in l){var o=!!l[s];(i==null||o!==!!i[s])&&e.classList.toggle(s,o)}return l}function kl(e,t,r,n){var i=e.__style;if(i!==t){var l=Ul(t);l==null?e.removeAttribute("style"):e.style.cssText=l,e.__style=t}return n}const Pl=Symbol("is custom element"),zl=Symbol("is html");function Kr(e,t){var r=Xr(e);r.checked!==(r.checked=t??void 0)&&(e.checked=t)}function Be(e,t,r,n){var i=Xr(e);i[t]!==(i[t]=r)&&(t==="loading"&&(e[Vn]=r),r==null?e.removeAttribute(t):typeof r!="string"&&jl(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Xr(e){return e.__attributes??(e.__attributes={[Pl]:e.nodeName.includes("-"),[zl]:e.namespaceURI===Dn})}var Jr=new Map;function jl(e){var t=Jr.get(e.nodeName);if(t)return t;Jr.set(e.nodeName,t=[]);for(var r,n=e,i=Element.prototype;i!==n;){r=_r(n);for(var l in r)r[l].set&&t.push(l);n=Pt(n)}return t}function Ot(e,t,r=t){var n=He();Zt(e,"input",i=>{var l=i?e.defaultValue:e.value;if(l=tr(e)?rr(l):l,r(l),n&&l!==(l=t())){var a=e.selectionStart,u=e.selectionEnd;e.value=l??"",u!==null&&(e.selectionStart=a,e.selectionEnd=Math.min(u,e.value.length))}}),ne(t)==null&&e.value&&r(tr(e)?rr(e.value):e.value),ze(()=>{var i=t();tr(e)&&i===rr(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function ql(e,t,r=t){Zt(e,"change",n=>{var i=n?e.defaultChecked:e.checked;r(i)}),ne(t)==null&&r(e.checked),ze(()=>{var n=t();e.checked=!!n})}function tr(e){var t=e.type;return t==="number"||t==="range"}function rr(e){return e===""?null:+e}function Zr(e,t,r){if(e.multiple)return Vl(e,t);for(var n of e.options){var i=nt(n);if(Zn(i,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Hl(e,t){Ke(()=>{var r=new MutationObserver(()=>{var n=e.__value;Zr(e,n)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function en(e,t,r=t){var n=!0;Zt(e,"change",i=>{var l=i?"[selected]":":checked",a;if(e.multiple)a=[].map.call(e.querySelectorAll(l),nt);else{var u=e.querySelector(l)??e.querySelector("option:not([disabled])");a=u&&nt(u)}r(a)}),Ke(()=>{var i=t();if(Zr(e,i,n),n&&i===void 0){var l=e.querySelector(":checked");l!==null&&(i=nt(l),r(i))}e.__value=i,n=!1}),Hl(e)}function Vl(e,t){for(var r of e.options)r.selected=~t.indexOf(nt(r))}function nt(e){return"__value"in e?e.__value:e.value}function tn(e,t){return e===t||(e==null?void 0:e[de])===t}function lt(e={},t,r,n){return Ke(()=>{var i,l;return ze(()=>{i=l,l=[],ne(()=>{e!==r(...l)&&(t(e,...l),i&&tn(r(...i),e)&&t(null,...i))})}),()=>{Kt(()=>{l&&tn(r(...l),e)&&t(null,...l)})}}),e}function J(e=!1){const t=D,r=t.l.u;if(!r)return;let n=()=>qr(t.s);if(e){let i=0,l={};const a=Qe(()=>{let u=!1;const s=t.s;for(const o in s)s[o]!==l[o]&&(l[o]=s[o],u=!0);return u&&i++,i});n=()=>c(a)}r.b.length&&il(()=>{rn(t,n),zt(r.b)}),Yt(()=>{const i=ne(()=>r.m.map(zn));return()=>{for(const l of i)typeof l=="function"&&l()}}),r.a.length&&Yt(()=>{rn(t,n),zt(r.a)})}function rn(e,t){if(e.l.s)for(const r of e.l.s)c(r);t()}function Bl(e){D===null&&Rn(),k&&D.l!==null?$l(D).m.push(e):Yt(()=>{const t=ne(e);if(typeof t=="function")return t})}function $l(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}function nn(e,t,r){if(e==null)return t(void 0),Ue;const n=ne(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}const $e=[];function nr(e,t=Ue){let r=null;const n=new Set;function i(u){if($t(e,u)&&(e=u,r)){const s=!$e.length;for(const o of n)o[1](),$e.push(o,e);if(s){for(let o=0;o<$e.length;o+=2)$e[o][0]($e[o+1]);$e.length=0}}}function l(u){i(u(e))}function a(u,s=Ue){const o=[u,s];return n.add(o),n.size===1&&(r=t(i,l)||Ue),u(e),()=>{n.delete(o),n.size===0&&r&&(r(),r=null)}}return{set:i,update:l,subscribe:a}}function ln(e){let t;return nn(e,r=>t=r)(),t}let Lt=!1,lr=Symbol();function Gl(e,t,r){const n=r[t]??(r[t]={store:null,source:N(void 0),unsubscribe:Ue});if(n.store!==e&&!(lr in r))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=Ue;else{var i=!0;n.unsubscribe=nn(e,l=>{i?n.source.v=l:m(n.source,l)}),i=!1}return e&&lr in r?ln(e):c(n.source)}function Wl(){const e={};function t(){Wt(()=>{for(var r in e)e[r].unsubscribe();vr(e,lr,{enumerable:!1,value:!0})})}return[e,t]}function Yl(e){var t=Lt;try{return Lt=!1,[e(),Lt]}finally{Lt=t}}function an(e){var t;return((t=e.ctx)==null?void 0:t.d)??!1}function y(e,t,r,n){var $;var i=(r&On)!==0,l=!k||(r&Ln)!==0,a=(r&Cn)!==0,u=(r&In)!==0,s=!1,o;a?[o,s]=Yl(()=>e[t]):o=e[t];var d=de in e||Hn in e,v=a&&((($=Re(e,t))==null?void 0:$.set)??(d&&t in e&&(L=>e[t]=L)))||void 0,f=n,_=!0,h=!1,E=()=>(h=!0,_&&(_=!1,u?f=ne(n):f=n),f);o===void 0&&n!==void 0&&(v&&l&&Yn(),o=E(),v&&v(o));var b;if(l)b=()=>{var L=e[t];return L===void 0?E():(_=!0,h=!1,L)};else{var A=(i?Qe:ve)(()=>e[t]);A.f|=gr,b=()=>{var L=c(A);return L!==void 0&&(f=void 0),L===void 0?f:L}}if((r&xn)===0)return b;if(v){var w=e.$$legacy;return function(L,U){return arguments.length>0?((!l||!U||w||s)&&v(U?b():L),L):b()}}var g=!1,p=!1,T=N(o),R=Qe(()=>{var L=b(),U=c(T);return g?(g=!1,p=!0,U):(p=!1,T.v=L)});return a&&c(R),i||(R.equals=Gt),function(L,U){if(Ae!==null&&(g=p,b(),c(T)),arguments.length>0){const W=U?c(R):l&&a?Le(L):L;if(!R.equals(W)){if(g=!0,m(T,W),h&&f!==void 0&&(f=W),an(R))return L;ne(()=>c(R))}return L}return an(R)?R.v:c(R)}}const ir=1;var xt=(e=>(e.FILTER_FIELD="__cascade-filter__field",e.TABLE_META="__cascade-filter__table-meta",e))(xt||{});function Ql(e){const t=document.getElementById(e);if(!t)throw new Error(`The element with the "${e}" id was not found`);return t.textContent??""}function sn(e){const t=Ql(e);return JSON.parse(t)}class Kl{constructor(t){P(this,"map");this.map=new Map(t.map(r=>[r.name,r]))}getField(t){const r=this.map.get(t);if(r)return r;throw new Error(`Unknown field: "${t}"`)}get fields(){return Array.from(this.map.values())}}var Xl=Object.defineProperty,Jl=(e,t,r)=>t in e?Xl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Zl=(e,t,r)=>Jl(e,t+"",r);class Ne{constructor(t=!1){Zl(this,"nullable"),this.nullable=t}deserialize(t){if(t===null){if(this.nullable)return null;throw new Error(`${this.constructor.name}: Null values are not allowed`)}return this._deserialize(t)}}var ei=Object.defineProperty,ti=(e,t,r)=>t in e?ei(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ar=(e,t,r)=>ti(e,typeof t!="symbol"?t+"":t,r);function un(e,t=!1){return new ri(e,t)}let ri=class extends Ne{constructor(t,r=!1){super(r),ar(this,"child"),this.child=t}_deserialize(t){if(!Array.isArray(t))throw new Error(`${this.constructor.name}: Unexpected type of value ${t}`);return t.map(r=>this.child.deserialize(r))}};function ni(e,t){for(const[r,n]of Object.entries(e))if(n===t)return r;return null}function Ge(e,t=!1){return new li(e,t)}let li=class extends Ne{constructor(t,r=!1){super(r),ar(this,"enumeration"),this.enumeration=t}_deserialize(t){let r=ni(this.enumeration,t);if(r===null||typeof this.enumeration[r]=="function")throw new Error(`${this.constructor.name}: Unexpected enum value ${t}`);return this.enumeration[r]}};function ii(e=!1){return new ai(e)}class ai extends Ne{_deserialize(t){if(typeof t!="number")throw new Error(`${this.constructor.name}: Unexpected type of value ${t}`);return t}}function on(e,t=!1){return new si(e,t)}class si extends Ne{constructor(t,r=!1){super(r),ar(this,"serializer"),this.serializer=t}_deserialize(t){return this.serializer.deserialize(t)}}function it(e=!1){return new ui(e)}class ui extends Ne{_deserialize(t){if(typeof t!="string")throw new Error(`${this.constructor.name}: Unexpected type of value ${t}`);return t}}function sr(e=!1){return new oi(e)}class oi extends Ne{_deserialize(t){if(typeof t!="boolean")throw new Error(`${this.constructor.name}: Unexpected type of value ${t}`);return t}}function Ct(){return new fi}class fi extends Ne{constructor(){super(!0)}_deserialize(t){return t}}var ci=Object.defineProperty,di=(e,t,r)=>t in e?ci(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vi=(e,t,r)=>di(e,t+"",r);function fn(e){return new _i(e)}class _i extends Ne{constructor(t){super(!1),vi(this,"_child"),this._child=t}_deserialize(t){if(t!==void 0)return this._child.deserialize(t)}}class It{serialize(t){const r={};for(const[n,i]of Object.entries(this.fields))if(i instanceof fn)Object.hasOwn(t,n)&&(r[n]=t[n]);else if(Object.hasOwn(t,n))r[n]=t[n];else throw new Error(`Value of field ${n} was missed`);return r}deserialize(t){const r={};for(const[n,i]of Object.entries(this.fields))try{r[n]=i.deserialize(t[n])}catch(l){throw new Error(`Field: ${n}; ${l.message}`)}return r}deserializeMany(t){if(!Array.isArray(t))throw new Error("Data is not array");return t.map(r=>this.deserialize(r))}}class cn{serialize(t){throw new Error("Serialization is not implemented")}deserialize(t){const r={};for(const[n,i]of Object.entries(this.fields))try{r[n]=i.deserialize(t[n])}catch(l){throw new Error(`Field: ${n}; ${l.message}`)}return this.makeObject(...Array.from(Object.values(r)))}deserializeMany(t){if(!Array.isArray(t))throw new Error("Data is not array");return t.map(r=>this.deserialize(r))}}class hi extends It{constructor(){super(...arguments);P(this,"fields",{label:it(),value:Ct()})}}var G=(e=>(e.DATE="date",e.CHOICE="choice",e.TEXT="text",e.UUID="uuid",e.NUMERIC="numeric",e.BOOLEAN="boolean",e.ARRAY="array",e))(G||{});class bi extends It{constructor(){super(...arguments);P(this,"fields",{label:it(),name:it(),nullable:sr(),type:Ge(G),choices:fn(un(on(new hi)))})}}function gi(e){const t=sn(e),n=new bi().deserializeMany(t);return new Kl(n)}class pi extends It{constructor(){super(...arguments);P(this,"fields",{filterEditorVersion:ii(),filter:Ct()})}}var Ie=(e=>(e.SINGLE="single-filter",e.MULTI="multi-filter",e))(Ie||{}),S=(e=>(e.EQUAL="==",e.NOT_EQUAL="!=",e.GREATER_THAN=">",e.LESS_THAN="<",e.GREATER_THAN_OR_EQUAL=">=",e.LESS_THAN_OR_EQUAL="<=",e.CONTAINS="contains",e.NOT_CONTAINS="not contains",e.IS="is",e.IS_NOT="is not",e.STARTS_WITH="starts with",e.ENDS_WITH="ends with",e.AND="and",e.OR="or",e.IS_NULL="is null",e.IS_NOT_NULL="is not null",e))(S||{});class Oe{constructor(t,r,n,i,l){P(this,"type",Ie.SINGLE);P(this,"enabled");P(this,"clause");P(this,"tableField");P(this,"value");P(this,"subtype");this.enabled=t,this.clause=r,this.tableField=n,this.value=i,this.subtype=l}}class wi extends It{constructor(){super(...arguments);P(this,"fields",{label:it(),value:Ct()})}}class Ei extends cn{constructor(){super(...arguments);P(this,"fields",{type:Ge(Ie),enabled:sr(),clause:Ge(S),tableField:it(),value:on(new wi),subtype:Ge(G)})}makeObject(r,n,i,l,a,u){return new Oe(n,i,l,a,u)}}class Mt{constructor(t,r,n){P(this,"type",Ie.MULTI);P(this,"enabled");P(this,"clause");P(this,"subfilters");this.enabled=t,this.clause=r,this.subfilters=n}}class yi extends cn{constructor(){super(...arguments);P(this,"fields",{type:Ge(Ie),enabled:sr(),clause:Ge(S),subfilters:un(Ct())})}makeObject(r,n,i,l){return new Mt(n,i,l)}}function dn(e){switch(e.type){case Ie.SINGLE:return new Ei().deserialize(e);case Ie.MULTI:const n=new yi().deserialize(e);return n.subfilters=n.subfilters.map(dn),n;default:throw new Error(`Unknown filter type: ${e.type}`)}}function Ai(e){let t;try{t=sn(e)}catch(n){console.error(n),console.warn("The default widget data will be used"),t=null}let r;return t?(r=new pi().deserialize(t),r.filter&&(r.filter=dn(r.filter))):r={filterEditorVersion:ir,filter:null},r}const ue=nr(null),ur=nr(null),Me=nr(!1);var mi=C('<input type="button" value="+ добавить фильтр" class="svelte-18leb9j">');function vn(e,t){let r=y(t,"onClick",8);var n=mi();_e("click",n,function(...i){var l;(l=r())==null||l.apply(this,i)}),O(e,n)}const or=new Map([[S.EQUAL,"="],[S.NOT_EQUAL,"≠"],[S.GREATER_THAN,">"],[S.LESS_THAN,"<"],[S.GREATER_THAN_OR_EQUAL,"≥"],[S.LESS_THAN_OR_EQUAL,"≤"],[S.CONTAINS,"Содержит"],[S.NOT_CONTAINS,"Не содержит"],[S.IS,"Является"],[S.IS_NOT,"Не является"],[S.STARTS_WITH,"Начинается на"],[S.ENDS_WITH,"Заканчивается на"],[S.AND,"И"],[S.OR,"ИЛИ"],[S.IS_NULL,"Является NULL"],[S.IS_NOT_NULL,"Не является NULL"]]),at=[S.EQUAL,S.NOT_EQUAL],_n=[S.GREATER_THAN,S.LESS_THAN,S.GREATER_THAN_OR_EQUAL,S.LESS_THAN_OR_EQUAL],hn=[S.CONTAINS,S.NOT_CONTAINS],Si=[S.IS,S.IS_NOT],Ti=[S.STARTS_WITH,S.ENDS_WITH],le=[S.IS_NULL,S.IS_NOT_NULL];var Ni=C('<div><div class="single-filter__main-content svelte-1ffugca"><input type="checkbox"> <div> </div> <div> </div> <div> </div></div> <button class="btn-delete svelte-1ffugca" type="button">&nbsp;×&nbsp;</button></div>');function bn(e,t){V(t,!1);let r=y(t,"tableMeta",8),n=y(t,"filter",12),i=y(t,"onDelete",8);function l(A){const w=A.target;n(n().enabled=w.checked,!0),ue.update(g=>g)}J();var a=Ni();let u;var s=x(a),o=x(s),d=I(o,2),v=x(d),f=I(d,2),_=x(f),h=I(f,2),E=x(h),b=I(s,2);K((A,w,g,p)=>{u=Qr(a,1,"single-filter svelte-1ffugca",null,u,A),Kr(o,n().enabled),Ce(v,w),Ce(_,g),Ce(E,p)},[()=>({disabled:!n().enabled}),()=>r().getField(n().tableField).label,()=>or.get(n().clause)??n().clause,()=>le.includes(n().clause)?"":n().value.label],ve),_e("change",o,l),_e("click",b,function(...A){var w;(w=i())==null||w.apply(this,A)}),O(e,a),B()}var Oi=C('<div><div class="multi-filter__head svelte-w27rta"><input type="checkbox"> <div class="svelte-w27rta"> </div> <button class="btn-delete svelte-w27rta" type="button">&nbsp;×&nbsp;</button></div> <div class="multi-filter__body svelte-w27rta"><!> <!></div></div>');function gn(e,t){V(t,!1);let r=y(t,"tableMeta",8),n=y(t,"filter",12),i=y(t,"onDelete",8);function l(w){const g=w.target;n(n().enabled=g.checked,!0),ue.update(p=>p)}function a(){ur.set(n()),Me.set(!0),ue.update(w=>w)}function u(w){n(n().subfilters=n().subfilters.filter((g,p)=>p!==w),!0),ue.update(g=>g)}J();var s=Oi();let o;var d=x(s),v=x(d),f=I(v,2),_=x(f),h=I(f,2),E=I(d,2),b=x(E);Tt(b,1,()=>n().subfilters,Cl,(w,g,p)=>{var T=St(),R=Q(T);{var $=U=>{gn(U,{get tableMeta(){return r()},get filter(){return c(g)},onDelete:()=>u(p)})},L=(U,W)=>{{var oe=he=>{bn(he,{get tableMeta(){return r()},get filter(){return c(g)},onDelete:()=>u(p)})};Se(U,he=>{c(g)instanceof Oe&&he(oe)},W)}};Se(R,U=>{c(g)instanceof Mt?U($):U(L,!1)})}O(w,T)});var A=I(b,2);vn(A,{onClick:a}),K((w,g)=>{o=Qr(s,1,"multi-filter svelte-w27rta",null,o,w),Kr(v,n().enabled),Ce(_,g)},[()=>({disabled:!n().enabled}),()=>or.get(n().clause)??n().clause],ve),_e("change",v,l),_e("click",h,function(...w){var g;(g=i())==null||g.apply(this,w)}),O(e,s),B()}var Li=C('<span class="svelte-rveqii"></span>');function Ft(e,t){let r=y(t,"error",8),n=r()instanceof Error?String(r()):r();var i=Li();i.textContent=n,O(e,i)}function xi(e,t){V(t,!1);const[r,n]=Wl(),i=()=>Gl(ue,"$filter",r);let l=y(t,"tableMeta",8);function a(){ur.set(null),Me.set(!0)}function u(){ue.set(null)}J();var s=St(),o=Q(s);{var d=f=>{vn(f,{onClick:a})},v=(f,_)=>{{var h=b=>{gn(b,{get tableMeta(){return l()},get filter(){return i()},onDelete:u})},E=(b,A)=>{{var w=p=>{bn(p,{get tableMeta(){return l()},get filter(){return i()},onDelete:u})},g=p=>{Ft(p,{error:"Unknown filter type"})};Se(b,p=>{i()instanceof Oe?p(w):p(g,!1)},A)}};Se(f,b=>{i()instanceof Mt?b(h):b(E,!1)},_)}};Se(o,f=>{i()===null?f(d):f(v,!1)})}O(e,s),B(),n()}var Ci=C('<dialog class="svelte-1cjh3t0"><header><!></header> <main><!></main> <footer><!></footer></dialog>');function Ii(e,t){V(t,!1);let r=y(t,"isOpen",12,!1),n=y(t,"style",8,""),i=N();function l(){r(!1)}ge(()=>(c(i),qr(r())),()=>{c(i)&&(r()?c(i).showModal():c(i).close())}),pe();var a=Ci(),u=x(a),s=x(u);Nt(s,t,"header",{});var o=I(u,2),d=x(o);Nt(d,t,"main",{});var v=I(o,2),f=x(v);Nt(f,t,"footer",{}),lt(a,_=>m(i,_),()=>c(i)),K(()=>kl(a,n())),_e("close",a,l),O(e,a),B()}var Mi=C('<div class="form-row"><div><!></div></div>');function Fe(e,t){var r=Mi(),n=x(r),i=x(n);Nt(i,t,"default",{}),O(e,r)}var Fi=C('<label class="vCheckboxLabel svelte-prgwgy"><input type="checkbox"> Включен</label>'),Di=C("<option> </option>"),Ri=C('<label class="svelte-prgwgy"><select></select> Выражение</label>'),Ui=C("<!> <!>",1);function We(e,t){V(t,!1);let r=y(t,"enabled",12,!1),n=y(t,"clause",12),i=y(t,"clauses",8);J();var l=Ui(),a=Q(l);Fe(a,{children:(s,o)=>{var d=Fi(),v=x(d);ql(v,r),O(s,d)},$$slots:{default:!0}});var u=I(a,2);Fe(u,{children:(s,o)=>{var d=Ri(),v=x(d);K(()=>{n(),jr(()=>{i()})}),Tt(v,5,i,f=>f,(f,_,h,E)=>{var b=Di(),A={},w=x(b);K(g=>{A!==(A=c(_))&&(b.value=(b.__value=c(_))??""),Ce(w,g)},[()=>or.get(c(_))??c(_)],ve),O(f,b)}),en(v,n),O(s,d)},$$slots:{default:!0}}),O(e,l),B()}var ki=C('<input type="button" value="Добавить фильтр" class="svelte-1fgf3s5">');function Ye(e,t){let r=y(t,"onClick",8);var n=ki();_e("click",n,function(...i){var l;(l=r())==null||l.apply(this,i)}),O(e,n)}function Pi(...e){const t=[],r=[];for(const n of e)t.push(n.label),r.push(n.value);return{label:t.join(", "),value:r}}var zi=C("<option> </option>"),ji=C('<label class="svelte-prgwgy"><select required></select> Значение</label>'),qi=C("<!> <!> <!>",1);function fr(e,t){V(t,!1);let r=y(t,"tableFieldMeta",8),n=y(t,"choices",8),i=y(t,"clauses",8),l=y(t,"onAdd",8),a=y(t,"multiple",8,!0);function u(g){const p=g.target;if(a()){const T=[];for(const R of p.selectedOptions)T.push(n()[+R.value]);_=T}else _=n()[+p.value]}function s(){c(d).reportValidity()&&l()(new Oe(c(v),c(f),r().name,a()?Pi(..._):_,r().type))}let o=[...i(),...r().nullable?le:[]],d=N(),v=N(!1),f=N(o[0]),_=a()?[n()[0]]:n()[0],h=N();ge(()=>c(f),()=>{m(h,le.includes(c(f)))}),pe(),J();var E=qi(),b=Q(E);We(b,{clauses:o,get enabled(){return c(v)},set enabled(g){m(v,g)},get clause(){return c(f)},set clause(g){m(f,g)},$$legacy:!0});var A=I(b,2);Fe(A,{children:(g,p)=>{var T=ji(),R=x(T);Tt(R,7,n,$=>$.value,($,L,U)=>{var W=zi(),oe={},he=x(W);K(()=>{oe!==(oe=c(U))&&(W.value=(W.__value=c(U))??""),Ce(he,c(L).label)}),O($,W)}),lt(R,$=>m(d,$),()=>c(d)),K(()=>{R.multiple=a(),R.disabled=c(h),Be(R,"title",c(h)?"Значение будет проигнорировано":"")}),_e("change",R,u),O(g,T)},$$slots:{default:!0}});var w=I(A,2);Ye(w,{onClick:s}),O(e,E),B()}function Hi(e,t){let r=y(t,"tableFieldMeta",8),n=y(t,"choices",8),i=y(t,"onAdd",8);const l=ve(()=>[...hn]);fr(e,{get tableFieldMeta(){return r()},get choices(){return n()},get onAdd(){return i()},get clauses(){return c(l)}})}function Vi(e,t){let r=y(t,"tableFieldMeta",8),n=y(t,"choices",12),i=y(t,"onAdd",8);n([{value:!0,label:"Истина"},{value:!1,label:"Ложь"}]);const l=ve(()=>[...Si]);fr(e,{get tableFieldMeta(){return r()},get choices(){return n()},get clauses(){return c(l)},get onAdd(){return i()},multiple:!1})}function Bi(e,t){let r=y(t,"tableFieldMeta",8),n=y(t,"choices",8),i=y(t,"onAdd",8);const l=ve(()=>[...at]);fr(e,{get tableFieldMeta(){return r()},get choices(){return n()},get clauses(){return c(l)},get onAdd(){return i()}})}var $i=C('<label class="svelte-prgwgy"><input type="date" required> Значение</label>'),Gi=C("<!> <!> <!>",1);function Wi(e,t){V(t,!1);let r=y(t,"tableFieldMeta",8),n=y(t,"onAdd",8);y(t,"choices",8);function i(){c(u).reportValidity()&&n()(new Oe(c(s),c(o),r().name,{label:c(d)??a,value:c(d)??a},G.DATE))}const l=[...at,..._n,...r().nullable?le:[]],a="1970-01-01";let u=N(),s=N(!1),o=N(l[0]),d=N(),v=N();ge(()=>c(o),()=>{m(v,le.includes(c(o)))}),pe(),J();var f=Gi(),_=Q(f);We(_,{clauses:l,get enabled(){return c(s)},set enabled(b){m(s,b)},get clause(){return c(o)},set clause(b){m(o,b)},$$legacy:!0});var h=I(_,2);Fe(h,{children:(b,A)=>{var w=$i(),g=x(w);lt(g,p=>m(u,p),()=>c(u)),K(()=>{g.disabled=c(v),Be(g,"title",c(v)?"Значение будет проигнорировано":"")}),Ot(g,()=>c(d),p=>m(d,p)),O(b,w)},$$slots:{default:!0}});var E=I(h,2);Ye(E,{onClick:i}),O(e,f),B()}var Yi=C('<label class="svelte-prgwgy"><input type="number" required> Значение</label>'),Qi=C("<!> <!> <!>",1);function Ki(e,t){V(t,!1);let r=y(t,"tableFieldMeta",8),n=y(t,"onAdd",8);y(t,"choices",8);function i(){c(u).reportValidity()&&n()(new Oe(c(s),c(o),r().name,{label:""+(c(d)??a),value:c(d)??a},G.NUMERIC))}const l=[...at,..._n,...r().nullable?le:[]],a=0;let u=N(),s=N(!1),o=N(l[0]),d=N(),v=N();ge(()=>c(o),()=>{m(v,le.includes(c(o)))}),pe(),J();var f=Qi(),_=Q(f);We(_,{clauses:l,get enabled(){return c(s)},set enabled(b){m(s,b)},get clause(){return c(o)},set clause(b){m(o,b)},$$legacy:!0});var h=I(_,2);Fe(h,{children:(b,A)=>{var w=Yi(),g=x(w);lt(g,p=>m(u,p),()=>c(u)),K(()=>{g.disabled=c(v),Be(g,"title",c(v)?"Значение будет проигнорировано":"")}),Ot(g,()=>c(d),p=>m(d,p)),O(b,w)},$$slots:{default:!0}});var E=I(h,2);Ye(E,{onClick:i}),O(e,f),B()}var Xi=C('<label class="svelte-prgwgy"><input type="text"> Значение</label>'),Ji=C("<!> <!> <!>",1);function Zi(e,t){V(t,!1);let r=y(t,"tableFieldMeta",8),n=y(t,"onAdd",8);y(t,"choices",8);function i(){n()(new Oe(c(a),c(u),r().name,{label:c(s),value:c(s)},G.TEXT))}const l=[...at,...hn,...Ti,...r().nullable?le:[]];let a=N(!1),u=N(l[0]),s=N(""),o=N();ge(()=>c(u),()=>{m(o,le.includes(c(u)))}),pe(),J();var d=Ji(),v=Q(d);We(v,{clauses:l,get enabled(){return c(a)},set enabled(h){m(a,h)},get clause(){return c(u)},set clause(h){m(u,h)},$$legacy:!0});var f=I(v,2);Fe(f,{children:(h,E)=>{var b=Xi(),A=x(b);K(()=>{A.disabled=c(o),Be(A,"title",c(o)?"Значение будет проигнорировано":"")}),Ot(A,()=>c(s),w=>m(s,w)),O(h,b)},$$slots:{default:!0}});var _=I(f,2);Ye(_,{onClick:i}),O(e,d),B()}var ea=C('<label class="svelte-1d481sh"><input type="text" placeholder="00000000-0000-0000-0000-000000000000" required class="svelte-1d481sh"> Значение</label>'),ta=C("<!> <!> <!>",1);function ra(e,t){V(t,!1);let r=y(t,"tableFieldMeta",8),n=y(t,"onAdd",8);y(t,"choices",8);function i(){console.debug(c(v).value),c(v).reportValidity()&&n()(new Oe(c(u),c(s),r().name,{label:c(o)||a,value:c(o)||a},G.UUID))}const l=[...at,...r().nullable?le:[]],a="00000000-0000-0000-0000-000000000000";let u=N(!1),s=N(l[0]),o=N(""),d=N(),v=N();ge(()=>c(s),()=>{m(d,le.includes(c(s)))}),pe(),J();var f=ta(),_=Q(f);We(_,{clauses:l,get enabled(){return c(u)},set enabled(b){m(u,b)},get clause(){return c(s)},set clause(b){m(s,b)},$$legacy:!0});var h=I(_,2);Fe(h,{children:(b,A)=>{var w=ea(),g=x(w);Be(g,"pattern","[\\da-fA-F]{8}-[\\da-fA-F]{4}-[\\da-fA-F]{4}-[\\da-fA-F]{4}-[\\da-fA-F]{12}"),lt(g,p=>m(v,p),()=>c(v)),K(()=>{g.disabled=c(d),Be(g,"title",c(d)?"Значение будет проигнорировано":"")}),Ot(g,()=>c(o),p=>m(o,p)),O(b,w)},$$slots:{default:!0}});var E=I(h,2);Ye(E,{onClick:i}),O(e,f),B()}var na=C("<option> </option>"),la=C('<h2>Одиночный фильтр</h2> <div class="form-row"><div><label class="svelte-prgwgy"><select></select> Поле таблицы</label></div></div> <!>',1);function ia(e,t){V(t,!1);let r=y(t,"tableMeta",8),n=y(t,"onAdd",8);const i=new Map([[G.ARRAY,Hi],[G.CHOICE,Bi],[G.BOOLEAN,Vi],[G.DATE,Wi],[G.NUMERIC,Ki],[G.TEXT,Zi],[G.UUID,ra]]);let l=N(r().fields[0]),a=N(null);ge(()=>c(l),()=>{const _=i.get(c(l).type)??null;m(a,_)}),pe(),J();var u=la(),s=I(Q(u),2),o=x(s),d=x(o),v=x(d);K(()=>{c(l),jr(()=>{r()})}),Tt(v,5,()=>r().fields,_=>_.name,(_,h)=>{var E=na(),b={},A=x(E);K(()=>{b!==(b=c(h))&&(E.value=(E.__value=c(h))??""),Ce(A,c(h).label)}),O(_,E)});var f=I(s,2);xl(f,()=>c(a),_=>{var h=St(),E=Q(h);{var b=w=>{const g=ve(()=>c(l).choices??[]);c(a)(w,{get tableFieldMeta(){return c(l)},get choices(){return c(g)},get onAdd(){return n()}})},A=w=>{Ft(w,{error:"Столбец этого типа не поддерживается"})};Se(E,w=>{c(a)?w(b):w(A,!1)})}O(_,h)}),en(v,()=>c(l),_=>m(l,_)),O(e,u),B()}var aa=C("<h2>Множественный фильтр</h2> <!> <!>",1);function sa(e,t){V(t,!1);let r=y(t,"onAdd",8);function n(){r()(new Mt(c(l),c(a),[]))}const i=[S.AND,S.OR];let l=N(),a=N();J();var u=aa(),s=I(Q(u),2);We(s,{clauses:i,get enabled(){return c(l)},set enabled(d){m(l,d)},get clause(){return c(a)},set clause(d){m(a,d)},$$legacy:!0});var o=I(s,2);Ye(o,{onClick:n}),O(e,u),B()}var ua=C('<div class="dialog__header svelte-ux1d7j" slot="header"><button class="btn-close svelte-ux1d7j" type="button">×</button> <h2>Добавить фильтр</h2></div>'),oa=C('<div class="dialog__body svelte-ux1d7j" slot="main"><!> <hr class="svelte-ux1d7j"> <!></div>');function fa(e,t){V(t,!1);let r=y(t,"tableMeta",8);function n(a){const u=ln(ur);u?(u.subfilters.push(a),ue.update(s=>s)):ue.set(a),Me.set(!1)}function i(){Me.set(!1)}let l=N(!1);Bl(()=>{Me.subscribe(a=>{m(l,a)})}),ge(()=>(c(l),Me),()=>{c(l)||Me.set(c(l))}),pe(),J(),Ii(e,{style:"background-color: #fefefe; margin: 5% auto; border: 1px solid #888; width: 40%; padding: 0;",get isOpen(){return c(l)},set isOpen(a){m(l,a)},$$slots:{header:(a,u)=>{var s=ua(),o=x(s);_e("click",o,i),O(a,s)},main:(a,u)=>{var s=oa(),o=x(s);ia(o,{get tableMeta(){return r()},onAdd:n});var d=I(o,4);sa(d,{onAdd:n}),O(a,s)}},$$legacy:!0}),B()}function ca(e,t){const r=document.getElementById(t);if(!r)throw new Error(`The element with id "${t}" was not found`);const n={filter:e,filterEditorVersion:ir};r.textContent=JSON.stringify(n)}var da=C("<!> <!>",1);function va(e,t){V(t,!1);const r=gi(xt.TABLE_META),n=Ai(xt.FILTER_FIELD);ue.set(n.filter),ue.subscribe(s=>{ca(s,xt.FILTER_FIELD)}),J();var i=St(),l=Q(i);{var a=s=>{Ft(s,{error:"Version of filter is greater than editor version"})},u=(s,o)=>{{var d=f=>{Ft(f,{error:"There are no fields in the table meta"})},v=f=>{var _=da(),h=Q(_);xi(h,{tableMeta:r});var E=I(h,2);fa(E,{tableMeta:r}),O(f,_)};Se(s,f=>{r.fields.length===0?f(d):f(v,!1)},o)}};Se(l,s=>{n.filterEditorVersion>ir?s(a):s(u,!1)})}O(e,i),B()}return Nl(va,{target:document.getElementById("__cascade-filter__editor")})});
