# ğŸ“Š OmicVerse ç»Ÿè®¡åŠŸèƒ½æŒ‡å—

## æ¦‚è¿°

OmicVerse åŒ…å«äº†åŒ¿åä½¿ç”¨ç»Ÿè®¡åŠŸèƒ½ï¼Œå¸®åŠ©å¼€å‘å›¢é˜Ÿäº†è§£è½¯ä»¶ä½¿ç”¨æƒ…å†µå¹¶æŒç»­æ”¹è¿›åŠŸèƒ½ã€‚æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº†ç»Ÿè®¡åŠŸèƒ½çš„å·¥ä½œåŸç†ã€éšç§ä¿æŠ¤æªæ–½å’Œä½¿ç”¨æ–¹æ³•ã€‚

## ğŸ”’ éšç§ä¿æŠ¤æ‰¿è¯º

### æˆ‘ä»¬æ”¶é›†ä»€ä¹ˆ

âœ… **åŒ¿åä¿¡æ¯**ï¼š
- æŠ¥å‘Šç”Ÿæˆæ—¶é—´æˆ³
- åŒ¿åç”¨æˆ·IDï¼ˆåŸºäºæœºå™¨ä¿¡æ¯çš„ä¸å¯é€†hashï¼‰
- æ“ä½œç³»ç»Ÿç±»å‹ï¼ˆå¦‚ Windowsã€macOSã€Linuxï¼‰
- æµè§ˆå™¨è¯­è¨€è®¾ç½®ï¼ˆä»…åœ¨æŸ¥çœ‹æŠ¥å‘Šæ—¶ï¼‰
- æ—¶åŒºä¿¡æ¯
- åŸºæœ¬ä½¿ç”¨ç»Ÿè®¡

### æˆ‘ä»¬ä¸æ”¶é›†ä»€ä¹ˆ

âŒ **ä¸ªäººä¿¡æ¯**ï¼š
- å§“åã€é‚®ç®±ç­‰ä¸ªäººèº«ä»½ä¿¡æ¯
- åˆ†ææ•°æ®çš„å…·ä½“å†…å®¹
- æ–‡ä»¶è·¯å¾„æˆ–æ–‡ä»¶å
- IPåœ°å€æˆ–ç²¾ç¡®ä½ç½®
- ç”¨æˆ·çš„å…·ä½“æ•°æ®

### æŠ€æœ¯å®ç°

```python
# ç”¨æˆ·ä¿¡æ¯hashåŒ–ç¤ºä¾‹
import hashlib
import platform

machine_info = f"{platform.node()}-{platform.system()}-{platform.machine()}"
user_hash = hashlib.md5(machine_info.encode()).hexdigest()[:8]
# ç»“æœ: "a5ee06aa" (ä¸å¯é€†è½¬ä¸ºåŸå§‹ä¿¡æ¯)
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. é»˜è®¤å¯ç”¨ç»Ÿè®¡

```python
import omicverse as ov

# é»˜è®¤æƒ…å†µä¸‹ç»Ÿè®¡åŠŸèƒ½æ˜¯å¯ç”¨çš„
ov.generate_scRNA_report(
    adata,
    output_path="my_report.html"
)
# è¾“å‡º: ğŸ“Š Analytics enabled (use enable_analytics=False to disable)
```

### 2. ç¦ç”¨ç»Ÿè®¡åŠŸèƒ½

#### æ–¹æ³•1ï¼šå‡½æ•°å‚æ•°

```python
ov.generate_scRNA_report(
    adata,
    output_path="my_report.html",
    enable_analytics=False  # æ˜ç¡®ç¦ç”¨
)
```

#### æ–¹æ³•2ï¼šç¯å¢ƒå˜é‡

```bash
# åœ¨ç»ˆç«¯ä¸­è®¾ç½®
export OMICVERSE_ANALYTICS=false

# æˆ–åœ¨Pythonä¸­è®¾ç½®
import os
os.environ['OMICVERSE_ANALYTICS'] = 'false'
```

æ”¯æŒçš„ç¯å¢ƒå˜é‡å€¼ï¼š
- **ç¦ç”¨**: `false`, `no`, `0`, `off`, `disable`
- **å¯ç”¨**: `true`, `yes`, `1`, `on`, `enable`

### 3. è‡ªå®šä¹‰é¡¹ç›®ID

```python
ov.generate_scRNA_report(
    adata,
    output_path="my_report.html",
    analytics_id="MY-PROJECT-001"  # è‡ªå®šä¹‰é¡¹ç›®æ ‡è¯†
)
```

## ğŸ”§ æŠ€æœ¯è¯¦æƒ…

### ç»Ÿè®¡æ•°æ®ä¼ è¾“

1. **ä¸»è¦æ–¹å¼**ï¼šåƒç´ è¿½è¸ªï¼ˆ1x1 é€æ˜å›¾ç‰‡è¯·æ±‚ï¼‰
   ```javascript
   var img = new Image();
   img.src = 'https://analytics.omicverse.org/track.gif?id=...&user=...';
   ```

2. **å¤‡ç”¨æ–¹å¼**ï¼šGoogle Analyticså…¼å®¹æ ¼å¼ï¼ˆå¦‚æœé…ç½®ï¼‰

### æ•°æ®æ ¼å¼

å‘é€çš„ç»Ÿè®¡æ•°æ®ç¤ºä¾‹ï¼š
```json
{
    "id": "OV-001",
    "user": "a5ee06aa",
    "timestamp": "2025-05-31T18:24:47.836Z",
    "platform": "Darwin",
    "language": "zh-CN",
    "timezone": "Asia/Shanghai"
}
```

### æœåŠ¡å™¨ç«¯ç‚¹

- ä¸»è¦ç«¯ç‚¹ï¼š`https://analytics.omicverse.org/track.gif`
- å¤‡ç”¨ç«¯ç‚¹ï¼šGoogle Analyticsï¼ˆå¦‚æœé…ç½®ï¼‰

## ğŸ§ª æµ‹è¯•å’ŒéªŒè¯

### è¿è¡Œæµ‹è¯•è„šæœ¬

```bash
cd omicverse/single/templates
python test_analytics.py
```

è¿™å°†ï¼š
1. ç”Ÿæˆæµ‹è¯•ç»Ÿè®¡æ•°æ®
2. éªŒè¯éšç§åˆè§„æ€§
3. åˆ›å»ºæµ‹è¯•HTMLé¡µé¢

### æŸ¥çœ‹ç”Ÿæˆçš„ç»Ÿè®¡ä»£ç 

```bash
# æ‰“å¼€æµ‹è¯•é¡µé¢
open test_analytics.html

# åœ¨æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯
# åº”è¯¥çœ‹åˆ°ç±»ä¼¼çš„è¾“å‡ºï¼š
# ğŸ“Š Analytics Data: {id: "TEST-001", user: "a5ee06aa", ...}
```

## ğŸ“ˆ ç»Ÿè®¡ç”¨é€”

æ”¶é›†çš„åŒ¿åæ•°æ®ç”¨äºï¼š

1. **ä½¿ç”¨åˆ†æ**
   - äº†è§£åŠŸèƒ½ä½¿ç”¨é¢‘ç‡
   - è¯†åˆ«æœ€å—æ¬¢è¿çš„åˆ†æç±»å‹
   - ä¼˜åŒ–è½¯ä»¶æ€§èƒ½

2. **æŠ€æœ¯æ”¯æŒ**
   - äº†è§£ä¸åŒå¹³å°çš„å…¼å®¹æ€§
   - ä¼˜åŒ–å¯¹ä¸åŒæ“ä½œç³»ç»Ÿçš„æ”¯æŒ
   - æ”¹è¿›é”™è¯¯å¤„ç†

3. **åŠŸèƒ½å¼€å‘**
   - å†³å®šæ–°åŠŸèƒ½ä¼˜å…ˆçº§
   - æ”¹è¿›ç”¨æˆ·ç•Œé¢è®¾è®¡
   - ä¼˜åŒ–æŠ¥å‘Šç”Ÿæˆé€Ÿåº¦

## â“ å¸¸è§é—®é¢˜

### Q: ç»Ÿè®¡åŠŸèƒ½æ˜¯å¼ºåˆ¶çš„å—ï¼Ÿ
A: ä¸æ˜¯ï¼Œæ‚¨å¯ä»¥éšæ—¶é€šè¿‡ `enable_analytics=False` æˆ–ç¯å¢ƒå˜é‡ç¦ç”¨ã€‚

### Q: æ•°æ®ä¼šè¢«åˆ†äº«ç»™ç¬¬ä¸‰æ–¹å—ï¼Ÿ
A: ä¸ä¼šï¼Œæ‰€æœ‰æ•°æ®ä»…ç”¨äºæ”¹è¿› OmicVerseï¼Œä¸ä¼šåˆ†äº«ç»™ä»»ä½•ç¬¬ä¸‰æ–¹ã€‚

### Q: å¦‚ä½•éªŒè¯æ²¡æœ‰ä¸ªäººä¿¡æ¯è¢«æ”¶é›†ï¼Ÿ
A: æ‚¨å¯ä»¥è¿è¡Œæµ‹è¯•è„šæœ¬æŸ¥çœ‹å…·ä½“æ”¶é›†çš„æ•°æ®ï¼Œæˆ–æŸ¥çœ‹ç”Ÿæˆçš„HTMLæºç ã€‚

### Q: ç»Ÿè®¡æœåŠ¡å™¨åœ¨å“ªé‡Œï¼Ÿ
A: ç›®å‰ä½¿ç”¨ `analytics.omicverse.org`ï¼Œå¦‚æœè¯¥æœåŠ¡ä¸å¯ç”¨ï¼Œç»Ÿè®¡åŠŸèƒ½ä¼šé™é»˜å¤±è´¥ï¼Œä¸å½±å“æŠ¥å‘Šç”Ÿæˆã€‚

## ğŸ”§ å¼€å‘è€…é€‰é¡¹

### è‡ªå®šä¹‰ç»Ÿè®¡ç«¯ç‚¹

```python
# åœ¨ _lazy_report.py ä¸­ä¿®æ”¹
analytics_endpoint = "https://your-custom-analytics.com/track"
```

### æ·»åŠ è‡ªå®šä¹‰ç»Ÿè®¡å­—æ®µ

```python
# åœ¨ _get_analytics_code æ–¹æ³•ä¸­æ·»åŠ 
data['custom_field'] = 'custom_value'
```

## ğŸ“ è”ç³»æˆ‘ä»¬

å¦‚æœæ‚¨å¯¹ç»Ÿè®¡åŠŸèƒ½æœ‰ä»»ä½•ç–‘é—®æˆ–å»ºè®®ï¼š

- **GitHub Issues**: [OmicVerse Issues](https://github.com/Starlitnightly/omicverse/issues)
- **æ–‡æ¡£**: [OmicVerse Documentation](https://omicverse.readthedocs.io/)
- **é‚®ç®±**: é€šè¿‡GitHubè”ç³»ç»´æŠ¤è€…

---

*æœ€åæ›´æ–°: 2025-05-31*  
*ç‰ˆæœ¬: 1.0.0* 