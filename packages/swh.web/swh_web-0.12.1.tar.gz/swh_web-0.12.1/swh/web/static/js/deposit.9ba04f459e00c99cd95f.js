/*! For license information please see deposit.9ba04f459e00c99cd95f.js.LICENSE.txt */
try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ba977a27-4646-4eda-9ed8-6b473344711a",e._sentryDebugIdIdentifier="sentry-dbid-ba977a27-4646-4eda-9ed8-6b473344711a")}catch(e){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"0.12.1"};!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.swh=t():(e.swh=e.swh||{},e.swh.deposit=t())}(self,(function(){return function(){var e={887:function(e,t,n){var r=n(16993),o=n(11791);e.exports=function(e,t,n,i,a){return new o(r().w(e,t,n,i),a||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},4373:function(e){e.exports=function(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},4633:function(e,t,n){var r=n(25172),o=n(16993),i=n(55869),a=n(887),s=n(11791),u=n(4373),c=n(30579);function l(){"use strict";var t=o(),n=t.m(l),f=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function d(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))}var p={throw:1,return:2,break:3,continue:3};function h(e){var t,n;return function(r){t||(t={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(e,t){return n(r.a,p[e],t)},delegateYield:function(e,o,i){return t.resultName=o,n(r.d,c(e),i)},finish:function(e){return n(r.f,e)}},n=function(e,n,o){r.p=t.prev,r.n=t.next;try{return e(n,o)}finally{t.next=r.n}}),t.resultName&&(t[t.resultName]=r.v,t.resultName=void 0),t.sent=r.v,t.next=r.n;try{return e.call(this,t)}finally{r.p=t.prev,r.n=t.next}}}return(e.exports=l=function(){return{wrap:function(e,n,r,o){return t.w(h(e),n,r,o&&o.reverse())},isGeneratorFunction:d,mark:t.m,awrap:function(e,t){return new r(e,t)},AsyncIterator:s,async:function(e,t,n,r,o){return(d(t)?a:i)(h(e),t,n,r,o)},keys:u,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=l,e.exports.__esModule=!0,e.exports.default=e.exports},8545:function(e,t,n){"use strict";n.d(t,{Eb:function(){return o},jt:function(){return i},lY:function(){return r}});n(54756),n(18987);function r(e){return"/static/"+e}function o(e){return new Date(e).toLocaleString()}function i(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=""),"display"===t&&e){var o=encodeURI(e);r||(r=o);var i="";return n&&(i='target="_blank" rel="noopener noreferrer"'),'<a href="'+o+'" '+i+">"+r+"</a>"}return e}},11791:function(e,t,n){var r=n(25172),o=n(75546);e.exports=function e(t,n){function i(e,o,a,s){try{var u=t[e](o),c=u.value;return c instanceof r?n.resolve(c.v).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):n.resolve(c).then((function(e){u.value=e,a(u)}),(function(e){return i("throw",e,a,s)}))}catch(e){s(e)}}var a;this.next||(o(e.prototype),o(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),o(this,"_invoke",(function(e,t,r){function o(){return new n((function(t,n){i(e,r,t,n)}))}return a=a?a.then(o,o):o()}),!0)},e.exports.__esModule=!0,e.exports.default=e.exports},16099:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(86308));function i(e){if(!e.options.indentation&&!e.options.lineSeparator)return;let t;for(e.content+=e.options.lineSeparator,t=0;t<e.level;t++)e.content+=e.options.indentation}function a(e,t){e.content+=t}function s(e,t,n){if("string"==typeof e.content)!function(e,t,n){if(!n){const n=e.trim();(t.options.lineSeparator||0===n.length)&&(e=n)}e.length>0&&(!n&&t.content.length>0&&i(t),a(t,e))}(e.content,t,n);else if("Element"===e.type)!function(e,t,n){t.path.push(e.name),!n&&t.content.length>0&&i(t);if(a(t,"<"+e.name),u(t,e.attributes),null===e.children||t.options.forceSelfClosingEmptyTag&&0===e.children.length){const e=t.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";a(t,e)}else if(0===e.children.length)a(t,"></"+e.name+">");else{const r=e.children;a(t,">"),t.level++;let o="preserve"===e.attributes["xml:space"]||n,u=!1;if(!o&&t.options.ignoredPaths&&(u=function(e,t){const n="/"+e.join("/"),r=e[e.length-1];return t.includes(r)||t.includes(n)}(t.path,t.options.ignoredPaths),o=u),!o&&t.options.collapseContent){let e=!1,t=!1,i=!1;r.forEach((function(o,a){"Text"===o.type?(o.content.includes("\n")?(t=!0,o.content=o.content.trim()):0!==a&&a!==r.length-1||n||0===o.content.trim().length&&(o.content=""),(o.content.trim().length>0||1===r.length)&&(e=!0)):"CDATA"===o.type?e=!0:i=!0})),!e||i&&t||(o=!0)}r.forEach((function(e){s(e,t,n||o)})),t.level--,n||o||i(t),u&&function(e){let t;for(e.content=e.content.replace(/ +$/,""),t=0;t<e.level;t++)e.content+=e.options.indentation}(t),a(t,"</"+e.name+">")}t.path.pop()}(e,t,n);else{if("ProcessingInstruction"!==e.type)throw new Error("Unknown node type: "+e.type);c(e,t)}}function u(e,t){Object.keys(t).forEach((function(n){const r=t[n].replace(/"/g,"&quot;");a(e," "+n+'="'+r+'"')}))}function c(e,t){t.content.length>0&&i(t),a(t,"<?"+e.name),u(t,e.attributes),a(t,"?>")}function l(e,t={}){t.indentation="indentation"in t?t.indentation:"    ",t.collapseContent=!0===t.collapseContent,t.lineSeparator="lineSeparator"in t?t.lineSeparator:"\r\n",t.whiteSpaceAtEndOfSelfclosingTag=!0===t.whiteSpaceAtEndOfSelfclosingTag,t.throwOnFailure=!1!==t.throwOnFailure;try{const n=(0,o.default)(e,{filter:t.filter,strictMode:t.strictMode}),r={content:"",level:0,options:t,path:[]};return n.declaration&&c(n.declaration,r),n.children.forEach((function(e){s(e,r,!1)})),t.lineSeparator?r.content.replace(/\r\n/g,"\n").replace(/\n/g,t.lineSeparator):r.content}catch(n){if(t.throwOnFailure)throw n;return e}}l.minify=(e,t={})=>l(e,Object.assign(Object.assign({},t),{indentation:"",lineSeparator:""})),e.exports=l,t.default=l},16993:function(e,t,n){var r=n(75546);function o(){var t,n,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.toStringTag||"@@toStringTag";function u(e,o,i,a){var s=o&&o.prototype instanceof l?o:l,u=Object.create(s.prototype);return r(u,"_invoke",function(e,r,o){var i,a,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,a=0,s=t,d.n=n,c}};function p(e,r){for(a=e,s=r,n=0;!f&&u&&!o&&n<l.length;n++){var o,i=l[n],p=d.p,h=i[2];e>3?(o=h===r)&&(a=i[4]||3,s=i[5]===t?i[3]:i[5],i[4]=3,i[5]=t):i[0]<=p&&((o=e<2&&p<i[1])?(a=0,d.v=r,d.n=i[1]):p<h&&(o=e<3||i[0]>r||r>h)&&(i[4]=e,i[5]=r,d.n=h,a=0))}if(o||e>1)return c;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,h),a=l,s=h;(n=a<2?t:s)||!f;){i||(a?a<3?(a>1&&(d.n=-1),p(a,s)):d.n=s:d.v=s);try{if(u=2,i){if(a||(o="next"),n=i[o]){if(!(n=n.call(i,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,a<2&&(a=0)}else 1===a&&(n=i.return)&&n.call(i),a<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((n=(f=d.n<0)?s:e.call(r,d))!==c)break}catch(e){i=t,a=1,s=e}finally{u=1}}return{value:n,done:f}}}(e,i,a),!0),u}var c={};function l(){}function f(){}function d(){}n=Object.getPrototypeOf;var p=[][a]?n(n([][a]())):(r(n={},a,(function(){return this})),n),h=d.prototype=l.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,r(e,s,"GeneratorFunction")),e.prototype=Object.create(h),e}return f.prototype=d,r(h,"constructor",d),r(d,"constructor",f),f.displayName="GeneratorFunction",r(d,s,"GeneratorFunction"),r(h),r(h,s,"Generator"),r(h,a,(function(){return this})),r(h,"toString",(function(){return"[object Generator]"})),(e.exports=o=function(){return{w:u,m:m}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},18987:function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}(function e(t,n){function o(e,o,i){if("undefined"!=typeof document){"number"==typeof(i=r({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in i)i[s]&&(a+="; "+s,!0!==i[s]&&(a+="="+i[s].split(";")[0]));return document.cookie=e+"="+t.write(o,e)+a}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var i=n[o].split("="),a=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(r[s]=t.read(a,s),e===s)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){o(e,"",r({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,r({},this.attributes,t))},withConverter:function(t){return e(r({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})})({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},23717:function(e,t,n){"use strict";n.d(t,{_k:function(){return r}});var r={serverSide:!0,processing:!0,language:{processing:'<img src="'+(0,n(8545).lY)("img/swh-spinner.gif")+'"></img>'},fixedHeader:!0,lengthMenu:[10,25,50,100,1e3],scrollCollapse:!0,searchDelay:1e3}},25172:function(e){e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},30579:function(e,t,n){var r=n(73738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(r(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},54756:function(e,t,n){var r=n(4633)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},55869:function(e,t,n){var r=n(887);e.exports=function(e,t,n,o,i){var a=r(e,t,n,o,i);return a.next().then((function(e){return e.done?e.value:a.next()}))},e.exports.__esModule=!0,e.exports.default=e.exports},58168:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(null,arguments)}n.d(t,{A:function(){return r}})},73738:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},75546:function(e){function t(n,r,o,i){var a=Object.defineProperty;try{a({},"",{})}catch(n){a=0}e.exports=t=function(e,n,r,o){if(n)a?a(e,n,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[n]=r;else{var i=function(n,r){t(e,n,(function(e){return this._invoke(n,r,e)}))};i("next",0),i("throw",1),i("return",2)}},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r,o,i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},86308:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParsingError=void 0;class n extends Error{constructor(e,t){super(e),this.cause=t}}let r;function o(){return s(!1)||function(){const e=l(/^([^<]+)/);if(e){const t={type:"Text",content:e[1]};return{excluded:!1===r.options.filter(t),node:t}}}()||u()||function(){if(r.xml.startsWith("<![CDATA[")){const e=r.xml.indexOf("]]>");if(e>-1){const t=e+3,n={type:"CDATA",content:r.xml.substring(0,t)};return r.xml=r.xml.slice(t),{excluded:!1===r.options.filter(n),node:n}}}}()||a(!1)}function i(){return l(/\s*/),s(!0)||u()||function(){const e=l(/^<!DOCTYPE\s+\S+\s+SYSTEM[^>]*>/)||l(/^<!DOCTYPE\s+\S+\s+PUBLIC[^>]*>/)||l(/^<!DOCTYPE\s+\S+\s*\[[^\]]*]>/)||l(/^<!DOCTYPE\s+\S+\s*>/);if(e){const t={type:"DocumentType",content:e[0]};return{excluded:!1===r.options.filter(t),node:t}}}()||a(!1)}function a(e){const t=l(e?/^<\?(xml(-stylesheet)?)\s*/:/^<\?([\w-:.]+)\s*/);if(!t)return;const n={name:t[1],type:"ProcessingInstruction",attributes:{}};for(;!f()&&!d("?>");){const e=c();if(!e)return;n.attributes[e.name]=e.value}return l(/\?>/),{excluded:!e&&!1===r.options.filter(n),node:n}}function s(e){const t=l(/^<([^?!</>\s]+)\s*/);if(!t)return;const i={type:"Element",name:t[1],attributes:{},children:[]},a=!e&&!1===r.options.filter(i);for(;!(f()||d(">")||d("?>")||d("/>"));){const e=c();if(!e)return;i.attributes[e.name]=e.value}if(l(/^\s*\/>/))return i.children=null,{excluded:a,node:i};l(/\??>/);let s=o();for(;s;)s.excluded||i.children.push(s.node),s=o();if(r.options.strictMode){const e=`</${i.name}>`;if(!r.xml.startsWith(e))throw new n("Failed to parse XML",`Closing tag not matching "${e}"`);r.xml=r.xml.slice(e.length)}else l(/^<\/[\w-:.\u00C0-\u00FF]+\s*>/);return{excluded:a,node:i}}function u(){const e=l(/^<!--[\s\S]*?-->/);if(e){const t={type:"Comment",content:e[0]};return{excluded:!1===r.options.filter(t),node:t}}}function c(){const e=l(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(e)return{name:e[1].trim(),value:(t=e[2].trim(),t.replace(/^['"]|['"]$/g,""))};var t}function l(e){const t=r.xml.match(e);if(t)return r.xml=r.xml.slice(t[0].length),t}function f(){return 0===r.xml.length}function d(e){return 0===r.xml.indexOf(e)}function p(e,t={}){e=e.trim();const o=t.filter||(()=>!0);return r={xml:e,options:Object.assign(Object.assign({},t),{filter:o,strictMode:!0===t.strictMode})},function(){const e=a(!0),t=[];let o,s=i();for(;s;){if("Element"===s.node.type){if(o)throw new Error("Found multiple root nodes");o=s.node}s.excluded||t.push(s.node),s=i()}if(!o)throw new n("Failed to parse XML","Root Element not found");if(0!==r.xml.length)throw new n("Failed to parse XML","Not Well-Formed XML");return{declaration:e?e.node:null,root:o,children:t}}()}t.ParsingError=n,e.exports=p,t.default=p}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return function(){"use strict";n.r(r),n.d(r,{initDepositAdmin:function(){return u}});var e=n(58168),t=n(16099),o=n.n(t),i=n(8545),a=n(23717);function s(e,t,n){if(void 0===n&&(n=""),"display"===t&&e&&e.startsWith("swh")){var r=Urls.browse_swhid(e),o=e.replace(/;/g,";<br/>");return n||(n=o),'<a href="'+r+'">'+n+"</a>"}return e}function u(t,n){var r;$(document).ready((function(){$.fn.dataTable.ext.errMode="none",r=$("#swh-admin-deposit-list").on("error.dt",(function(e,t,n,r){$("#swh-admin-deposit-list-error").text(r)})).DataTable((0,e.A)({},a._k,{dom:'<<"d-flex justify-content-between align-items-center"f<"#list-exclude">l>rt<"row mt-2"<"col-sm-5"i><"col-sm-7"p>>',ajax:{url:Urls.admin_deposit_list(),data:function(e){e.excludePattern=$("#swh-admin-deposit-list-exclude-filter").val()}},columns:[{data:"id",name:"id"},{data:"type",name:"type"},{data:"uri",name:"uri",render:function(e,t,n){var r=$.fn.dataTable.render.text().display(e),o="",a="";return n.swhid_context&&e?o=s(n.swhid_context,t,r):e&&(o=r),e&&(a=(0,i.jt)(r,t,!0,'<i class="mdi mdi-open-in-new" aria-hidden="true"></i>')),o+"&nbsp;"+a}},{data:"reception_date",name:"reception_date",render:i.Eb},{data:"status",name:"status"},{data:"raw_metadata",name:"raw_metadata",render:function(e,t,n){return"display"===t&&n.raw_metadata?'<button class="btn btn-secondary metadata">display</button>':e}},{data:"status_detail",name:"status_detail",render:function(e,t,n){if("display"===t&&e){var r=e;return"object"==typeof e&&(r=JSON.stringify(e,null,4)),'<div style="width: 200px; white-space: pre; overflow-x: auto;">'+r+"</div>"}return e},orderable:!1,visible:!1},{data:"swhid",name:"swhid",render:function(e,t,n){return s(e,t)},orderable:!1,visible:!1},{data:"swhid_context",name:"swhid_context",render:function(e,t,n){return s(e,t)},orderable:!1,visible:!1}],scrollX:!0,order:[[0,"desc"]]})),$("div#list-exclude").html('\n      <div id="swh-admin-deposit-list-exclude-div-wrapper" class="dataTables_filter">\n        <label for="swh-admin-deposit-list-exclude-filter">\n          Exclude:\n        </label>\n        <input id="swh-admin-deposit-list-exclude-filter"\n              type="search"\n              value="check-deposit"\n              class="form-control form-control-sm mb-2"\n              placeholder="exclude-pattern" aria-controls="swh-admin-deposit-list">\n        </input>\n      </div>'),$("#swh-admin-deposit-list tbody").on("click","tr button.metadata",(function(){var e=r.row(this.parentNode.parentNode).data(),t=o()(e.raw_metadata,{indentation:"  ",collapseContent:!0,lineSeparator:"\n"}),n=$("<div/>").text(t).html();swh.webapp.showModalHtml("Metadata of deposit "+e.id,'<pre style="max-height: 75vh;"><code class="xml">'+n+"</code></pre>","90%"),swh.webapp.highlightCode()})),$("#swh-admin-deposit-list-exclude-filter").keyup((function(){r.draw()})),r.draw()})),$("a.toggle-col").on("click",(function(e){e.preventDefault();var t=r.column($(this).attr("data-column"));t.visible(!t.visible()),t.visible()?$(this).removeClass("col-hidden"):$(this).addClass("col-hidden")}))}}(),r}()}));
//# sourceMappingURL=deposit.9ba04f459e00c99cd95f.js.map