on:
  pull_request:
    # Trigger when opening, updating, or reopening a PR
    types: [opened, synchronize, reopened, ready_for_review]
    branches: ['main', 'release/*']

jobs:
  on_pr_to_main_or_release_branch_job:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4
        with:
          ref: ${{ github.head_ref }}
          token: ${{ secrets.WORKFLOW_PAT }}

      - name: Lint commit messages
        uses: wagoid/commitlint-github-action@v6

      - name: Check code quality 
        run: |
          . scripts/setup
          ./scripts/lint
          ./scripts/test         
