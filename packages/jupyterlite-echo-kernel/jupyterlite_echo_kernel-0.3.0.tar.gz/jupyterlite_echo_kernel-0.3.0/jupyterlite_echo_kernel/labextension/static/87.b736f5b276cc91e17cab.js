(self.webpackChunk_jupyterlite_echo_kernel=self.webpackChunk_jupyterlite_echo_kernel||[]).push([[87],{87:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BaseKernel:()=>o,FALLBACK_KERNEL:()=>c,IKernelClient:()=>l,IKernelSpecClient:()=>u,IKernelSpecs:()=>h,KernelSpecs:()=>p,LiteKernelClient:()=>k,LiteKernelSpecClient:()=>f});var r=n(186),s=n(602);class o{constructor(e){this._history=[],this._executionCount=0,this._isDisposed=!1,this._disposed=new s.Signal(this),this._parentHeader=void 0,this._parent=void 0;const{id:t,name:n,location:r,sendMessage:o}=e;this._id=t,this._name=n,this._location=r,this._sendMessage=o}get ready(){return Promise.resolve()}get isDisposed(){return this._isDisposed}get disposed(){return this._disposed}get id(){return this._id}get name(){return this._name}get location(){return this._location}get executionCount(){return this._executionCount}get parentHeader(){return this._parentHeader}get parent(){return this._parent}dispose(){this.isDisposed||(this._isDisposed=!0,this._disposed.emit(void 0))}async handleMessage(e){switch(this._busy(e),this._parent=e,e.header.msg_type){case"kernel_info_request":await this._kernelInfo(e);break;case"execute_request":await this._execute(e);break;case"input_reply":this.inputReply(e.content);break;case"inspect_request":await this._inspect(e);break;case"is_complete_request":await this._isCompleteRequest(e);break;case"complete_request":await this._complete(e);break;case"history_request":await this._historyRequest(e);break;case"comm_open":await this.commOpen(e);break;case"comm_msg":await this.commMsg(e);break;case"comm_close":await this.commClose(e)}this._idle(e)}stream(e,t=void 0){var n;const s=void 0!==t?t:this._parentHeader,o=r.KernelMessage.createMessage({channel:"iopub",msgType:"stream",session:null!==(n=null==s?void 0:s.session)&&void 0!==n?n:"",parentHeader:s,content:e});this._sendMessage(o)}displayData(e,t=void 0){var n,s;const o=void 0!==t?t:this._parentHeader;e.metadata=null!==(n=e.metadata)&&void 0!==n?n:{};const i=r.KernelMessage.createMessage({channel:"iopub",msgType:"display_data",session:null!==(s=null==o?void 0:o.session)&&void 0!==s?s:"",parentHeader:o,content:e});this._sendMessage(i)}inputRequest(e,t=void 0){var n;const s=void 0!==t?t:this._parentHeader,o=r.KernelMessage.createMessage({channel:"stdin",msgType:"input_request",session:null!==(n=null==s?void 0:s.session)&&void 0!==n?n:"",parentHeader:s,content:e});this._sendMessage(o)}publishExecuteResult(e,t=void 0){var n;const s=void 0!==t?t:this._parentHeader,o=r.KernelMessage.createMessage({channel:"iopub",msgType:"execute_result",session:null!==(n=null==s?void 0:s.session)&&void 0!==n?n:"",parentHeader:s,content:e});this._sendMessage(o)}publishExecuteError(e,t=void 0){var n;const s=void 0!==t?t:this._parentHeader,o=r.KernelMessage.createMessage({channel:"iopub",msgType:"error",session:null!==(n=null==s?void 0:s.session)&&void 0!==n?n:"",parentHeader:s,content:e});this._sendMessage(o)}updateDisplayData(e,t=void 0){var n;const s=void 0!==t?t:this._parentHeader,o=r.KernelMessage.createMessage({channel:"iopub",msgType:"update_display_data",session:null!==(n=null==s?void 0:s.session)&&void 0!==n?n:"",parentHeader:s,content:e});this._sendMessage(o)}clearOutput(e,t=void 0){var n;const s=void 0!==t?t:this._parentHeader,o=r.KernelMessage.createMessage({channel:"iopub",msgType:"clear_output",session:null!==(n=null==s?void 0:s.session)&&void 0!==n?n:"",parentHeader:s,content:e});this._sendMessage(o)}handleComm(e,t,n,s,o=void 0){var i;const a=void 0!==o?o:this._parentHeader,c=r.KernelMessage.createMessage({channel:"iopub",msgType:e,session:null!==(i=null==a?void 0:a.session)&&void 0!==i?i:"",parentHeader:a,content:t,metadata:n,buffers:s});this._sendMessage(c)}_idle(e){const t=r.KernelMessage.createMessage({msgType:"status",session:e.header.session,parentHeader:e.header,channel:"iopub",content:{execution_state:"idle"}});this._sendMessage(t)}_busy(e){const t=r.KernelMessage.createMessage({msgType:"status",session:e.header.session,parentHeader:e.header,channel:"iopub",content:{execution_state:"busy"}});this._sendMessage(t)}async _kernelInfo(e){const t=await this.kernelInfoRequest(),n=r.KernelMessage.createMessage({msgType:"kernel_info_reply",channel:"shell",session:e.header.session,parentHeader:e.header,content:t});this._sendMessage(n)}async _historyRequest(e){const t=e,n=r.KernelMessage.createMessage({msgType:"history_reply",channel:"shell",parentHeader:t.header,session:e.header.session,content:{status:"ok",history:this._history}});this._sendMessage(n)}_executeInput(e){const t=e,n=t.content.code,s=r.KernelMessage.createMessage({msgType:"execute_input",parentHeader:t.header,channel:"iopub",session:e.header.session,content:{code:n,execution_count:this._executionCount}});this._sendMessage(s)}async _execute(e){const t=e,n=t.content;n.store_history&&this._executionCount++,this._parentHeader=t.header,this._executeInput(t),n.store_history&&this._history.push([0,0,n.code]);const s=await this.executeRequest(t.content),o=r.KernelMessage.createMessage({msgType:"execute_reply",channel:"shell",parentHeader:t.header,session:e.header.session,content:s});this._sendMessage(o)}async _complete(e){const t=e,n=await this.completeRequest(t.content),s=r.KernelMessage.createMessage({msgType:"complete_reply",parentHeader:t.header,channel:"shell",session:e.header.session,content:n});this._sendMessage(s)}async _inspect(e){const t=e,n=await this.inspectRequest(t.content),s=r.KernelMessage.createMessage({msgType:"inspect_reply",parentHeader:t.header,channel:"shell",session:e.header.session,content:n});this._sendMessage(s)}async _isCompleteRequest(e){const t=e,n=await this.isCompleteRequest(t.content),s=r.KernelMessage.createMessage({msgType:"is_complete_reply",parentHeader:t.header,channel:"shell",session:e.header.session,content:n});this._sendMessage(s)}}var i=n(689),a=n(262);const c="javascript",l=new a.Token("@jupyterlite/kernel:IKernelClient"),u=new a.Token("@jupyterlite/kernel:IKernelSpecClient"),h=new a.Token("@jupyterlite/kernel:IKernelSpecs");class p{constructor(){this._specs=new Map,this._factories=new Map,this._changed=new s.Signal(this)}get specs(){return 0===this._specs.size?null:{default:this.defaultKernelName,kernelspecs:Object.fromEntries(this._specs)}}get defaultKernelName(){let e=i.PageConfig.getOption("defaultKernelName");if(!e&&this._specs.size){const t=Array.from(this._specs.keys());t.sort(),e=t[0]}return e||c}get factories(){return this._factories}get changed(){return this._changed}register(e){const{spec:t,create:n}=e;this._specs.set(t.name,t),this._factories.set(t.name,n),this._changed.emit(this.specs)}}const d={default:"",kernelspecs:{}};class f{constructor(e){var t;this._kernelspecs=e.kernelSpecs,this._serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:r.ServerConnection.makeSettings()}get serverSettings(){return this._serverSettings}async get(){var e;return Promise.resolve(null!==(e=this._kernelspecs.specs)&&void 0!==e?e:d)}}var g=n(765),y=n(962),v=n(798);new Error("timeout while waiting for mutex to become available"),new Error("mutex already locked");const m=new Error("request for lock canceled");var _=function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};class b{constructor(e,t=m){if(this._maxConcurrency=e,this._cancelError=t,this._queue=[],this._waiters=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}acquire(){const e=this.isLocked(),t=new Promise(((e,t)=>this._queue.push({resolve:e,reject:t})));return e||this._dispatch(),t}runExclusive(e){return _(this,void 0,void 0,(function*(){const[t,n]=yield this.acquire();try{return yield e(t)}finally{n()}}))}waitForUnlock(){return _(this,void 0,void 0,(function*(){return this.isLocked()?new Promise((e=>this._waiters.push({resolve:e}))):Promise.resolve()}))}isLocked(){return this._value<=0}release(){if(this._maxConcurrency>1)throw new Error("this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){const e=this._currentReleaser;this._currentReleaser=void 0,e()}}cancel(){this._queue.forEach((e=>e.reject(this._cancelError))),this._queue=[]}_dispatch(){const e=this._queue.shift();if(!e)return;let t=!1;this._currentReleaser=()=>{t||(t=!0,this._value++,this._resolveWaiters(),this._dispatch())},e.resolve([this._value--,this._currentReleaser])}_resolveWaiters(){this._waiters.forEach((e=>e.resolve())),this._waiters=[]}}class w{constructor(e){this._semaphore=new b(1,e)}acquire(){return e=this,t=void 0,r=function*(){const[,e]=yield this._semaphore.acquire();return e},new((n=void 0)||(n=Promise))((function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r}runExclusive(e){return this._semaphore.runExclusive((()=>e()))}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.release()}cancel(){return this._semaphore.cancel()}}var E=n(644);const S=v.supportedKernelWebSocketProtocols.v1KernelWebsocketJupyterOrg;class k{constructor(e){var t;this._kernels=new g.ObservableMap,this._clients=new g.ObservableMap,this._kernelClients=new g.ObservableMap,this._changed=new s.Signal(this),this._kernelSends=new g.ObservableMap;const{kernelSpecs:n}=e;this._kernelspecs=n,this._serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:r.ServerConnection.makeSettings(),this._kernels.changed.connect(((e,t)=>{this._changed.emit(t)}))}get serverSettings(){return this._serverSettings}get changed(){return this._changed}async startNew(e){const{id:t,name:n,location:s}=e,o=null!=n?n:c,l=this._kernelspecs.factories.get(o);if(!l)throw Error(`No factory for kernel ${o}`);const u=new w,h=(e,t,n)=>{var r;const s=this._kernels.get(e);if(!s)throw Error(`No kernel ${e}`);this._clients.set(t,n),null===(r=this._kernelClients.get(e))||void 0===r||r.add(t),n.on("message",(async e=>{let t;if(e instanceof ArrayBuffer)e=new Uint8Array(e).buffer,t=(0,y.deserialize)(e,S);else{if("string"!=typeof e)return;{const n=(new TextEncoder).encode(e);t=(0,y.deserialize)(n.buffer,S)}}"input_reply"===t.header.msg_type?void 0!==this._stdinPromise?this._stdinPromise.resolve(t):s.handleMessage(t):(async e=>{await u.runExclusive((async()=>{await s.ready,await s.handleMessage(e)}))})(t)}));const o=()=>{var n;this._clients.delete(t),null===(n=this._kernelClients.get(e))||void 0===n||n.delete(t)};s.disposed.connect(o),n.onclose=o},p=null!=t?t:a.UUID.uuid4(),d=i.URLExt.join(k.WS_BASE_URL,r.KernelAPI.KERNEL_SERVICE_URL,encodeURIComponent(p),"channels"),f=this._kernels.get(p);if(f)return{id:f.id,name:f.name};const g=e=>{const t="stdin"===e.channel?e.parent_header.session:e.header.session,n=this._clients.get(t);if(!n)return void console.warn(`Trying to send message on removed socket for kernel ${p}`);const r=(0,y.serialize)(e,S);if("iopub"!==e.channel)n.send(r);else{const e=this._kernelClients.get(p);null==e||e.forEach((e=>{var t;null===(t=this._clients.get(e))||void 0===t||t.send(r)}))}},v=await l({id:p,sendMessage:g,name:o,location:null!=s?s:""});this._kernels.set(p,v),this._kernelClients.set(p,new Set),this._kernelSends.set(p,g);const m=new E.Server(d,{mock:!1,selectProtocol:()=>S});return m.on("connection",(e=>{var t;const n=null!==(t=new URL(e.url).searchParams.get("session_id"))&&void 0!==t?t:"";h(p,n,e)})),m.on("close",(()=>{this._clients.keys().forEach((e=>{var t;const n=this._clients.get(e);(null==n?void 0:n.readyState)===WebSocket.CLOSED&&(this._clients.delete(e),null===(t=this._kernelClients.get(p))||void 0===t||t.delete(e))}))})),v.disposed.connect((()=>{m.close(),this._kernels.delete(p),this._kernelClients.delete(p),this._kernelSends.delete(p)})),{id:v.id,name:v.name}}async restart(e){const t=this._kernels.get(e);if(!t)throw Error(`Kernel ${e} does not exist`);const{id:n,name:r,location:s}=t;t.dispose(),await this.startNew({id:n,name:r,location:s})}async interrupt(e){}async listRunning(){return[...this._kernels.values()].map((e=>({id:e.id,name:e.name})))}async shutdown(e){var t;null===(t=this._kernels.delete(e))||void 0===t||t.dispose(),this._kernelClients.delete(e),this._kernelSends.delete(e)}async shutdownAll(){this._kernels.keys().forEach((e=>{this.shutdown(e)}))}async getModel(e){return this._kernels.get(e)}async handleStdin(e){this._stdinPromise=new a.PromiseDelegate;const t=e.parent_header.session,n=this._getClientKernel(t);if(void 0!==n){const t=this._kernelSends.get(n);void 0!==t&&t(e)}return this._stdinPromise.promise}_getClientKernel(e){return this._kernelClients.keys().find((t=>this._kernelClients.get(t).has(e)))}}!function(e){e.WS_BASE_URL=i.PageConfig.getBaseUrl().replace(/^http/,"ws")}(k||(k={}))},606:e=>{var t,n,r=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var a,c=[],l=!1,u=-1;function h(){l&&a&&(l=!1,a.length?c=a.concat(c):u=-1,c.length&&p())}function p(){if(!l){var e=i(h);l=!0;for(var t=c.length;t;){for(a=c,c=[];++u<t;)a&&a[u].run();u=-1,t=c.length}a=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function f(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new d(e,t)),1!==c.length||l||i(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},644:function(e,t,n){var r=n(606);!function(e){"use strict";var t="undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},s=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e},o=Object.prototype.hasOwnProperty;function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function a(e){try{return encodeURIComponent(e)}catch(e){return null}}var c={stringify:function(e,t){t=t||"";var n,r,s=[];for(r in"string"!=typeof t&&(t="?"),e)if(o.call(e,r)){if((n=e[r])||null!=n&&!isNaN(n)||(n=""),r=a(r),n=a(n),null===r||null===n)continue;s.push(r+"="+n)}return s.length?t+s.join("&"):""},parse:function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,r={};t=n.exec(e);){var s=i(t[1]),o=i(t[2]);null===s||null===o||s in r||(r[s]=o)}return r}},l=/[\n\r\t]/g,u=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,h=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,p=/^[a-zA-Z]:/,d=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/;function f(e){return(e||"").toString().replace(d,"")}var g=[["#","hash"],["?","query"],function(e,t){return m(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],y={hash:1,query:1};function v(e){var n,r=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},s={},o=typeof(e=e||r);if("blob:"===e.protocol)s=new b(unescape(e.pathname),{});else if("string"===o)for(n in s=new b(e,{}),y)delete s[n];else if("object"===o){for(n in e)n in y||(s[n]=e[n]);void 0===s.slashes&&(s.slashes=u.test(e.href))}return s}function m(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function _(e,t){e=(e=f(e)).replace(l,""),t=t||{};var n,r=h.exec(e),s=r[1]?r[1].toLowerCase():"",o=!!r[2],i=!!r[3],a=0;return o?i?(n=r[2]+r[3]+r[4],a=r[2].length+r[3].length):(n=r[2]+r[4],a=r[2].length):i?(n=r[3]+r[4],a=r[3].length):n=r[4],"file:"===s?a>=2&&(n=n.slice(2)):m(s)?n=r[4]:s?o&&(n=n.slice(2)):a>=2&&m(t.protocol)&&(n=r[4]),{protocol:s,slashes:o||m(s),slashesCount:a,rest:n}}function b(e,t,n){if(e=(e=f(e)).replace(l,""),!(this instanceof b))return new b(e,t,n);var r,o,i,a,u,h,d=g.slice(),y=typeof t,w=this,E=0;for("object"!==y&&"string"!==y&&(n=t,t=null),n&&"function"!=typeof n&&(n=c.parse),r=!(o=_(e||"",t=v(t))).protocol&&!o.slashes,w.slashes=o.slashes||r&&t.slashes,w.protocol=o.protocol||t.protocol||"",e=o.rest,("file:"===o.protocol&&(2!==o.slashesCount||p.test(e))||!o.slashes&&(o.protocol||o.slashesCount<2||!m(w.protocol)))&&(d[3]=[/(.*)/,"pathname"]);E<d.length;E++)"function"!=typeof(a=d[E])?(i=a[0],h=a[1],i!=i?w[h]=e:"string"==typeof i?~(u="@"===i?e.lastIndexOf(i):e.indexOf(i))&&("number"==typeof a[2]?(w[h]=e.slice(0,u),e=e.slice(u+a[2])):(w[h]=e.slice(u),e=e.slice(0,u))):(u=i.exec(e))&&(w[h]=u[1],e=e.slice(0,u.index)),w[h]=w[h]||r&&a[3]&&t[h]||"",a[4]&&(w[h]=w[h].toLowerCase())):e=a(e,w);n&&(w.query=n(w.query)),r&&t.slashes&&"/"!==w.pathname.charAt(0)&&(""!==w.pathname||""!==t.pathname)&&(w.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,s=n[r-1],o=!1,i=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),i++):i&&(0===r&&(o=!0),n.splice(r,1),i--);return o&&n.unshift(""),"."!==s&&".."!==s||n.push(""),n.join("/")}(w.pathname,t.pathname)),"/"!==w.pathname.charAt(0)&&m(w.protocol)&&(w.pathname="/"+w.pathname),s(w.port,w.protocol)||(w.host=w.hostname,w.port=""),w.username=w.password="",w.auth&&(~(u=w.auth.indexOf(":"))?(w.username=w.auth.slice(0,u),w.username=encodeURIComponent(decodeURIComponent(w.username)),w.password=w.auth.slice(u+1),w.password=encodeURIComponent(decodeURIComponent(w.password))):w.username=encodeURIComponent(decodeURIComponent(w.auth)),w.auth=w.password?w.username+":"+w.password:w.username),w.origin="file:"!==w.protocol&&m(w.protocol)&&w.host?w.protocol+"//"+w.host:"null",w.href=w.toString()}b.prototype={set:function(e,t,n){var r=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||c.parse)(t)),r[e]=t;break;case"port":r[e]=t,s(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,/:\d+$/.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(t){var o="pathname"===e?"/":"#";r[e]=t.charAt(0)!==o?o+t:t}else r[e]=t;break;case"username":case"password":r[e]=encodeURIComponent(t);break;case"auth":var i=t.indexOf(":");~i?(r.username=t.slice(0,i),r.username=encodeURIComponent(decodeURIComponent(r.username)),r.password=t.slice(i+1),r.password=encodeURIComponent(decodeURIComponent(r.password))):r.username=encodeURIComponent(decodeURIComponent(t))}for(var a=0;a<g.length;a++){var l=g[a];l[4]&&(r[l[1]]=r[l[1]].toLowerCase())}return r.auth=r.password?r.username+":"+r.password:r.username,r.origin="file:"!==r.protocol&&m(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(e){e&&"function"==typeof e||(e=c.stringify);var t,n=this,r=n.host,s=n.protocol;s&&":"!==s.charAt(s.length-1)&&(s+=":");var o=s+(n.protocol&&n.slashes||m(n.protocol)?"//":"");return n.username?(o+=n.username,n.password&&(o+=":"+n.password),o+="@"):n.password?(o+=":"+n.password,o+="@"):"file:"!==n.protocol&&m(n.protocol)&&!r&&"/"!==n.pathname&&(o+="@"),":"===r[r.length-1]&&(r+=":"),o+=r+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(o+=n.hash),o}},b.extractProtocol=_,b.location=v,b.trimLeft=f,b.qs=c;var w=b;function E(e,t){setTimeout((function(t){return e.call(t)}),4,t)}function S(e,t){void 0!==r&&console[e].call(null,t)}function k(e,t){void 0===e&&(e=[]);var n=[];return e.forEach((function(e){t(e)||n.push(e)})),n}var C=function(){this.listeners={}};function O(e){var t=e.indexOf("?");return t>=0?e.slice(0,t):e}C.prototype.addEventListener=function(e,t){"function"==typeof t&&(Array.isArray(this.listeners[e])||(this.listeners[e]=[]),0===function(e,t){void 0===e&&(e=[]);var n=[];return e.forEach((function(e){t(e)&&n.push(e)})),n}(this.listeners[e],(function(e){return e===t})).length&&this.listeners[e].push(t))},C.prototype.removeEventListener=function(e,t){var n=this.listeners[e];this.listeners[e]=k(n,(function(e){return e===t}))},C.prototype.dispatchEvent=function(e){for(var t=this,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];var s=e.type,o=this.listeners[s];return!!Array.isArray(o)&&(o.forEach((function(r){n.length>0?r.apply(t,n):r.call(t,e)})),!0)};var M=function(){this.urlMap={}};M.prototype.attachWebSocket=function(e,t){var n=O(t),r=this.urlMap[n];if(r&&r.server&&-1===r.websockets.indexOf(e))return r.websockets.push(e),r.server},M.prototype.addMembershipToRoom=function(e,t){var n=this.urlMap[O(e.url)];n&&n.server&&-1!==n.websockets.indexOf(e)&&(n.roomMemberships[t]||(n.roomMemberships[t]=[]),n.roomMemberships[t].push(e))},M.prototype.attachServer=function(e,t){var n=O(t);if(!this.urlMap[n])return this.urlMap[n]={server:e,websockets:[],roomMemberships:{}},e},M.prototype.serverLookup=function(e){var t=O(e),n=this.urlMap[t];if(n)return n.server},M.prototype.websocketsLookup=function(e,t,n){var r,s=O(e),o=this.urlMap[s];return r=o?o.websockets:[],t&&(r=o.roomMemberships[t]||[]),n?r.filter((function(e){return e!==n})):r},M.prototype.removeServer=function(e){delete this.urlMap[O(e)]},M.prototype.removeWebSocket=function(e,t){var n=O(t),r=this.urlMap[n];r&&(r.websockets=k(r.websockets,(function(t){return t===e})))},M.prototype.removeMembershipFromRoom=function(e,t){var n=this.urlMap[O(e.url)],r=n.roomMemberships[t];n&&null!==r&&(n.roomMemberships[t]=k(r,(function(t){return t===e})))};var R=new M,T=1e3,L=1005,N=1006,I={CONSTRUCTOR_ERROR:"Failed to construct 'WebSocket':",CLOSE_ERROR:"Failed to execute 'close' on 'WebSocket':",EVENT:{CONSTRUCT:"Failed to construct 'Event':",MESSAGE:"Failed to construct 'MessageEvent':",CLOSE:"Failed to construct 'CloseEvent':"}},x=function(){};x.prototype.stopPropagation=function(){},x.prototype.stopImmediatePropagation=function(){},x.prototype.initEvent=function(e,t,n){void 0===e&&(e="undefined"),void 0===t&&(t=!1),void 0===n&&(n=!1),this.type=""+e,this.bubbles=Boolean(t),this.cancelable=Boolean(n)};var U=function(e){function t(t,n){if(void 0===n&&(n={}),e.call(this),!t)throw new TypeError(I.EVENT_ERROR+" 1 argument required, but only 0 present.");if("object"!=typeof n)throw new TypeError(I.EVENT_ERROR+" parameter 2 ('eventInitDict') is not an object.");var r=n.bubbles,s=n.cancelable;this.type=""+t,this.timeStamp=Date.now(),this.target=null,this.srcElement=null,this.returnValue=!0,this.isTrusted=!1,this.eventPhase=0,this.defaultPrevented=!1,this.currentTarget=null,this.cancelable=!!s&&Boolean(s),this.cancelBubble=!1,this.bubbles=!!r&&Boolean(r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(x),P=function(e){function t(t,n){if(void 0===n&&(n={}),e.call(this),!t)throw new TypeError(I.EVENT.MESSAGE+" 1 argument required, but only 0 present.");if("object"!=typeof n)throw new TypeError(I.EVENT.MESSAGE+" parameter 2 ('eventInitDict') is not an object");var r=n.bubbles,s=n.cancelable,o=n.data,i=n.origin,a=n.lastEventId,c=n.ports;this.type=""+t,this.timeStamp=Date.now(),this.target=null,this.srcElement=null,this.returnValue=!0,this.isTrusted=!1,this.eventPhase=0,this.defaultPrevented=!1,this.currentTarget=null,this.cancelable=!!s&&Boolean(s),this.canncelBubble=!1,this.bubbles=!!r&&Boolean(r),this.origin=""+i,this.ports=void 0===c?null:c,this.data=void 0===o?null:o,this.lastEventId=""+(a||"")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(x),D=function(e){function t(t,n){if(void 0===n&&(n={}),e.call(this),!t)throw new TypeError(I.EVENT.CLOSE+" 1 argument required, but only 0 present.");if("object"!=typeof n)throw new TypeError(I.EVENT.CLOSE+" parameter 2 ('eventInitDict') is not an object");var r=n.bubbles,s=n.cancelable,o=n.code,i=n.reason,a=n.wasClean;this.type=""+t,this.timeStamp=Date.now(),this.target=null,this.srcElement=null,this.returnValue=!0,this.isTrusted=!1,this.eventPhase=0,this.defaultPrevented=!1,this.currentTarget=null,this.cancelable=!!s&&Boolean(s),this.cancelBubble=!1,this.bubbles=!!r&&Boolean(r),this.code="number"==typeof o?parseInt(o,10):0,this.reason=""+(i||""),this.wasClean=!!a&&Boolean(a)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(x);function A(e){var t=e.type,n=e.target,r=new U(t);return n&&(r.target=n,r.srcElement=n,r.currentTarget=n),r}function K(e){var t=e.type,n=e.origin,r=e.data,s=e.target,o=new P(t,{data:r,origin:n});return s&&(o.target=s,o.srcElement=s,o.currentTarget=s),o}function j(e){var t=e.code,n=e.reason,r=e.type,s=e.target,o=e.wasClean;o||(o=t===T||t===L);var i=new D(r,{code:t,reason:n,wasClean:o});return s&&(i.target=s,i.srcElement=s,i.currentTarget=s),i}function W(e,t,n){e.readyState=V.CLOSING;var r=R.serverLookup(e.url),s=j({type:"close",target:e.target,code:t,reason:n});E((function(){R.removeWebSocket(e,e.url),e.readyState=V.CLOSED,e.dispatchEvent(s),r&&r.dispatchEvent(s,r)}),e)}function q(e){return"[object Blob]"===Object.prototype.toString.call(e)||e instanceof ArrayBuffer||(e=String(e)),e}var B=new WeakMap;function H(e){if(B.has(e))return B.get(e);var t=new Proxy(e,{get:function(n,r){if("close"===r)return function(e){void 0===e&&(e={});var n=e.code||T,r=e.reason||"";W(t,n,r)};if("send"===r)return function(t){t=q(t),e.dispatchEvent(K({type:"message",data:t,origin:this.url,target:e}))};var s=function(e){return"message"===e?"server::"+e:e};return"on"===r?function(t,n){e.addEventListener(s(t),n)}:"off"===r?function(t,n){e.removeEventListener(s(t),n)}:"target"===r?e:n[r]}});return B.set(e,t),t}var V=function(e){function t(n,r){e.call(this),this._onopen=null,this._onmessage=null,this._onerror=null,this._onclose=null,this.url=function(e){var t=new w(e),n=t.pathname,r=t.protocol,s=t.hash;if(!e)throw new TypeError(I.CONSTRUCTOR_ERROR+" 1 argument required, but only 0 present.");if(n||(t.pathname="/"),""===r)throw new SyntaxError(I.CONSTRUCTOR_ERROR+" The URL '"+t.toString()+"' is invalid.");if("ws:"!==r&&"wss:"!==r)throw new SyntaxError(I.CONSTRUCTOR_ERROR+" The URL's scheme must be either 'ws' or 'wss'. '"+r+"' is not allowed.");if(""!==s)throw new SyntaxError(I.CONSTRUCTOR_ERROR+" The URL contains a fragment identifier ('"+s+"'). Fragment identifiers are not allowed in WebSocket URLs.");return t.toString()}(n),r=function(e){if(void 0===e&&(e=[]),!Array.isArray(e)&&"string"!=typeof e)throw new SyntaxError(I.CONSTRUCTOR_ERROR+" The subprotocol '"+e.toString()+"' is invalid.");"string"==typeof e&&(e=[e]);var t=e.map((function(e){return{count:1,protocol:e}})).reduce((function(e,t){return e[t.protocol]=(e[t.protocol]||0)+t.count,e}),{}),n=Object.keys(t).filter((function(e){return t[e]>1}));if(n.length>0)throw new SyntaxError(I.CONSTRUCTOR_ERROR+" The subprotocol '"+n[0]+"' is duplicated.");return e}(r),this.protocol=r[0]||"",this.binaryType="blob",this.readyState=t.CONNECTING;var s=H(this),o=R.attachWebSocket(s,this.url);E((function(){if(this.readyState===t.CONNECTING)if(o)if(o.options.verifyClient&&"function"==typeof o.options.verifyClient&&!o.options.verifyClient())this.readyState=t.CLOSED,S("error","WebSocket connection to '"+this.url+"' failed: HTTP Authentication failed; no valid credentials available"),R.removeWebSocket(s,this.url),this.dispatchEvent(A({type:"error",target:this})),this.dispatchEvent(j({type:"close",target:this,code:T}));else{if(o.options.selectProtocol&&"function"==typeof o.options.selectProtocol){var e=o.options.selectProtocol(r),n=""!==e,i=-1!==r.indexOf(e);if(n&&!i)return this.readyState=t.CLOSED,S("error","WebSocket connection to '"+this.url+"' failed: Invalid Sub-Protocol"),R.removeWebSocket(s,this.url),this.dispatchEvent(A({type:"error",target:this})),void this.dispatchEvent(j({type:"close",target:this,code:T}));this.protocol=e}this.readyState=t.OPEN,this.dispatchEvent(A({type:"open",target:this})),o.dispatchEvent(A({type:"connection"}),s)}else this.readyState=t.CLOSED,this.dispatchEvent(A({type:"error",target:this})),this.dispatchEvent(j({type:"close",target:this,code:T})),S("error","WebSocket connection to '"+this.url+"' failed")}),this)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={onopen:{},onmessage:{},onclose:{},onerror:{}};return n.onopen.get=function(){return this._onopen},n.onmessage.get=function(){return this._onmessage},n.onclose.get=function(){return this._onclose},n.onerror.get=function(){return this._onerror},n.onopen.set=function(e){this.removeEventListener("open",this._onopen),this._onopen=e,this.addEventListener("open",e)},n.onmessage.set=function(e){this.removeEventListener("message",this._onmessage),this._onmessage=e,this.addEventListener("message",e)},n.onclose.set=function(e){this.removeEventListener("close",this._onclose),this._onclose=e,this.addEventListener("close",e)},n.onerror.set=function(e){this.removeEventListener("error",this._onerror),this._onerror=e,this.addEventListener("error",e)},t.prototype.send=function(e){var n=this;if(this.readyState===t.CONNECTING)throw new Error("Failed to execute 'send' on 'WebSocket': Still in CONNECTING state");var r=K({type:"server::message",origin:this.url,data:q(e)}),s=R.serverLookup(this.url);s&&E((function(){n.dispatchEvent(r,e)}),s)},t.prototype.close=function(e,n){if(void 0!==e&&("number"!=typeof e||1e3!==e&&(e<3e3||e>4999)))throw new TypeError(I.CLOSE_ERROR+" The code must be either 1000, or between 3000 and 4999. "+e+" is neither.");if(void 0!==n&&(r=n,s=encodeURIComponent(r).match(/%[89ABab]/g),r.length+(s?s.length:0)>123))throw new SyntaxError(I.CLOSE_ERROR+" The message must not be greater than 123 bytes.");var r,s;if(this.readyState!==t.CLOSING&&this.readyState!==t.CLOSED){var o=H(this);this.readyState===t.CONNECTING?function(e,t,n){e.readyState=V.CLOSING;var r=R.serverLookup(e.url),s=j({type:"close",target:e.target,code:t,reason:n,wasClean:!1}),o=A({type:"error",target:e.target});E((function(){R.removeWebSocket(e,e.url),e.readyState=V.CLOSED,e.dispatchEvent(o),e.dispatchEvent(s),r&&r.dispatchEvent(s,r)}),e)}(o,e||N,n):W(o,e||L,n)}},Object.defineProperties(t.prototype,n),t}(C);V.CONNECTING=0,V.prototype.CONNECTING=V.CONNECTING,V.OPEN=1,V.prototype.OPEN=V.OPEN,V.CLOSING=2,V.prototype.CLOSING=V.CLOSING,V.CLOSED=3,V.prototype.CLOSED=V.CLOSED;var G=function(e){function t(n,r){var s=this;void 0===n&&(n="socket.io"),void 0===r&&(r=""),e.call(this),this.binaryType="blob";var o=new w(n);o.pathname||(o.pathname="/"),this.url=o.toString(),this.readyState=t.CONNECTING,this.protocol="",this.target=this,"string"==typeof r||"object"==typeof r&&null!==r?this.protocol=r:Array.isArray(r)&&r.length>0&&(this.protocol=r[0]);var i=R.attachWebSocket(this,this.url);E((function(){i?(this.readyState=t.OPEN,i.dispatchEvent(A({type:"connection"}),i,this),i.dispatchEvent(A({type:"connect"}),i,this),this.dispatchEvent(A({type:"connect",target:this}))):(this.readyState=t.CLOSED,this.dispatchEvent(A({type:"error",target:this})),this.dispatchEvent(j({type:"close",target:this,code:T})),S("error","Socket.io connection to '"+this.url+"' failed"))}),this),this.addEventListener("close",(function(e){s.dispatchEvent(j({type:"disconnect",target:e.target,code:e.code}))}))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={broadcast:{}};return t.prototype.close=function(){if(this.readyState===t.OPEN){var e=R.serverLookup(this.url);return R.removeWebSocket(this,this.url),this.readyState=t.CLOSED,this.dispatchEvent(j({type:"close",target:this,code:T})),e&&e.dispatchEvent(j({type:"disconnect",target:this,code:T}),e),this}},t.prototype.disconnect=function(){return this.close()},t.prototype.emit=function(e){for(var n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];if(this.readyState!==t.OPEN)throw new Error("SocketIO is already in CLOSING or CLOSED state");var s=K({type:e,origin:this.url,data:n}),o=R.serverLookup(this.url);return o&&o.dispatchEvent.apply(o,[s].concat(n)),this},t.prototype.send=function(e){return this.emit("message",e),this},n.broadcast.get=function(){if(this.readyState!==t.OPEN)throw new Error("SocketIO is already in CLOSING or CLOSED state");var e=this,n=R.serverLookup(this.url);if(!n)throw new Error("SocketIO can not find a server at the specified URL ("+this.url+")");return{emit:function(t,r){return n.emit(t,r,{websockets:R.websocketsLookup(e.url,null,e)}),e},to:function(t){return n.to(t,e)},in:function(t){return n.in(t,e)}}},t.prototype.on=function(e,t){return this.addEventListener(e,t),this},t.prototype.off=function(e,t){this.removeEventListener(e,t)},t.prototype.hasListeners=function(e){var t=this.listeners[e];return!!Array.isArray(t)&&!!t.length},t.prototype.join=function(e){R.addMembershipToRoom(this,e)},t.prototype.leave=function(e){R.removeMembershipFromRoom(this,e)},t.prototype.to=function(e){return this.broadcast.to(e)},t.prototype.in=function(){return this.to.apply(null,arguments)},t.prototype.dispatchEvent=function(e){for(var t=this,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];var s=e.type,o=this.listeners[s];if(!Array.isArray(o))return!1;o.forEach((function(r){n.length>0?r.apply(t,n):r.call(t,e.data?e.data:e)}))},Object.defineProperties(t.prototype,n),t}(C);G.CONNECTING=0,G.OPEN=1,G.CLOSING=2,G.CLOSED=3;var z=function(e,t){return new G(e,t)};z.connect=function(e,t){return z(e,t)};function J(){return"undefined"!=typeof window?window:"object"==typeof r&&"object"==typeof n.g?n.g:this}var F={mock:!0,verifyClient:null,selectProtocol:null},$=function(e){function t(t,n){void 0===n&&(n=F),e.call(this);var r=new w(t);if(r.pathname||(r.pathname="/"),this.url=r.toString(),this.originalWebSocket=null,!R.attachServer(this,this.url))throw this.dispatchEvent(A({type:"error"})),new Error("A mock server is already listening on this url");this.options=Object.assign({},F,n),this.options.mock&&this.mockWebsocket()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.mockWebsocket=function(){var e=J();this.originalWebSocket=e.WebSocket,e.WebSocket=V},t.prototype.restoreWebsocket=function(){var e=J();null!==this.originalWebSocket&&(e.WebSocket=this.originalWebSocket),this.originalWebSocket=null},t.prototype.stop=function(e){void 0===e&&(e=function(){}),this.options.mock&&this.restoreWebsocket(),R.removeServer(this.url),"function"==typeof e&&e()},t.prototype.on=function(e,t){this.addEventListener(e,t)},t.prototype.off=function(e,t){this.removeEventListener(e,t)},t.prototype.close=function(e){void 0===e&&(e={});var t=e.code,n=e.reason,r=e.wasClean,s=R.websocketsLookup(this.url);R.removeServer(this.url),s.forEach((function(e){e.readyState=V.CLOSED,e.dispatchEvent(j({type:"close",target:e.target,code:t||T,reason:n||"",wasClean:r}))})),this.dispatchEvent(j({type:"close"}),this)},t.prototype.emit=function(e,t,n){var r=this;void 0===n&&(n={});var s,o=n.websockets;o||(o=R.websocketsLookup(this.url)),"object"!=typeof n||arguments.length>3?(t=Array.prototype.slice.call(arguments,1,arguments.length),s=t.map((function(e){return q(e)}))):s=q(t),o.forEach((function(n){var o=n instanceof G?t:s;Array.isArray(o)?n.dispatchEvent.apply(n,[K({type:e,data:o,origin:r.url,target:n.target})].concat(o)):n.dispatchEvent(K({type:e,data:o,origin:r.url,target:n.target}))}))},t.prototype.clients=function(){return R.websocketsLookup(this.url)},t.prototype.to=function(e,t,n){var r=this;void 0===n&&(n=[]);var s=this,o=n.concat(R.websocketsLookup(this.url,e,t)).reduce((function(e,t){return e.indexOf(t)>-1?e:e.concat(t)}),[]);return{to:function(e,t){return r.to.call(r,e,t,o)},emit:function(e,t){s.emit(e,t,{websockets:o})}}},t.prototype.in=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return this.to.apply(null,e)},t.prototype.simulate=function(e){var t=R.websocketsLookup(this.url);"error"===e&&t.forEach((function(e){e.readyState=V.CLOSED,e.dispatchEvent(A({type:"error",target:e.target}))}))},t}(C);$.of=function(e){return new $(e)};var Z=$,Q=V,X=z;e.Server=Z,e.WebSocket=Q,e.SocketIO=X,Object.defineProperty(e,"__esModule",{value:!0})}(t)},798:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.supportedKernelWebSocketProtocols=void 0,t.createMessage=function(e){var t,n,s,o,i,a;return{buffers:null!==(t=e.buffers)&&void 0!==t?t:[],channel:e.channel,content:e.content,header:{date:(new Date).toISOString(),msg_id:null!==(n=e.msgId)&&void 0!==n?n:r.UUID.uuid4(),msg_type:e.msgType,session:e.session,username:null!==(s=e.username)&&void 0!==s?s:"",subshell_id:null!==(o=e.subshellId)&&void 0!==o?o:null,version:"5.2"},metadata:null!==(i=e.metadata)&&void 0!==i?i:{},parent_header:null!==(a=e.parentHeader)&&void 0!==a?a:{}}},t.isStreamMsg=function(e){return"stream"===e.header.msg_type},t.isDisplayDataMsg=function(e){return"display_data"===e.header.msg_type},t.isUpdateDisplayDataMsg=function(e){return"update_display_data"===e.header.msg_type},t.isExecuteInputMsg=function(e){return"execute_input"===e.header.msg_type},t.isExecuteResultMsg=function(e){return"execute_result"===e.header.msg_type},t.isErrorMsg=function(e){return"error"===e.header.msg_type},t.isStatusMsg=function(e){return"status"===e.header.msg_type},t.isClearOutputMsg=function(e){return"clear_output"===e.header.msg_type},t.isDebugEventMsg=function(e){return"debug_event"===e.header.msg_type},t.isCommOpenMsg=function(e){return"comm_open"===e.header.msg_type},t.isCommCloseMsg=function(e){return"comm_close"===e.header.msg_type},t.isCommMsgMsg=function(e){return"comm_msg"===e.header.msg_type},t.isInfoRequestMsg=function(e){return"kernel_info_request"===e.header.msg_type},t.isExecuteReplyMsg=function(e){return"execute_reply"===e.header.msg_type},t.isDebugRequestMsg=function(e){return"debug_request"===e.header.msg_type},t.isDebugReplyMsg=function(e){return"debug_reply"===e.header.msg_type},t.isInputRequestMsg=function(e){return"input_request"===e.header.msg_type},t.isInputReplyMsg=function(e){return"input_reply"===e.header.msg_type};const r=n(262);var s;!function(e){e.v1KernelWebsocketJupyterOrg="v1.kernel.websocket.jupyter.org"}(s||(t.supportedKernelWebSocketProtocols=s={}))},962:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=function(e,t=""){return t===i.supportedKernelWebSocketProtocols.v1KernelWebsocketJupyterOrg?a.serializeV1KernelWebsocketJupyterOrg(e):a.serializeDefault(e)},t.deserialize=function(e,t=""){return t===i.supportedKernelWebSocketProtocols.v1KernelWebsocketJupyterOrg?a.deserializeV1KernelWebsocketJupyterOrg(e):a.deserializeDefault(e)};const i=o(n(798));var a;!function(e){e.deserializeV1KernelWebsocketJupyterOrg=function(e){let t;const n=new DataView(e),r=Number(n.getBigUint64(0,!0));let s=[];for(let e=0;e<r;e++)s.push(Number(n.getBigUint64(8*(e+1),!0)));const o=new TextDecoder("utf8"),i=o.decode(e.slice(s[0],s[1])),a=JSON.parse(o.decode(e.slice(s[1],s[2]))),c=JSON.parse(o.decode(e.slice(s[2],s[3]))),l=JSON.parse(o.decode(e.slice(s[3],s[4]))),u=JSON.parse(o.decode(e.slice(s[4],s[5])));let h=[];for(let t=5;t<s.length-1;t++)h.push(new DataView(e.slice(s[t],s[t+1])));return t={channel:i,header:a,parent_header:c,metadata:l,content:u,buffers:h},t},e.serializeV1KernelWebsocketJupyterOrg=function(e){const t=JSON.stringify(e.header),n=null==e.parent_header?"{}":JSON.stringify(e.parent_header),r=JSON.stringify(e.metadata),s=JSON.stringify(e.content),o=void 0!==e.buffers?e.buffers:[],i=5+o.length+1;let a=[];a.push(8*(1+i)),a.push(e.channel.length+a[a.length-1]);const c=new TextEncoder,l=c.encode(e.channel),u=c.encode(t),h=c.encode(n),p=c.encode(r),d=c.encode(s),f=new Uint8Array(l.length+u.length+h.length+p.length+d.length);f.set(l),f.set(u,l.length),f.set(h,l.length+u.length),f.set(p,l.length+u.length+h.length),f.set(d,l.length+u.length+h.length+p.length);for(let e of[u.length,h.length,p.length,d.length])a.push(e+a[a.length-1]);let g=0;for(let e of o){let t=e.byteLength;a.push(t+a[a.length-1]),g+=t}const y=new Uint8Array(8*(1+i)+f.byteLength+g),v=new ArrayBuffer(8),m=new DataView(v);m.setBigUint64(0,BigInt(i),!0),y.set(new Uint8Array(v),0);for(let e=0;e<a.length;e++)m.setBigUint64(0,BigInt(a[e]),!0),y.set(new Uint8Array(v),8*(e+1));y.set(f,a[0]);for(let e=0;e<o.length;e++){const t=o[e];y.set(new Uint8Array(ArrayBuffer.isView(t)?t.buffer:t),a[5+e])}return y.buffer},e.deserializeDefault=function(e){let t;return t="string"==typeof e?JSON.parse(e):function(e){const t=new DataView(e),n=t.getUint32(0),r=[];if(n<2)throw new Error("Invalid incoming Kernel Message");for(let e=1;e<=n;e++)r.push(t.getUint32(4*e));const s=new Uint8Array(e.slice(r[0],r[1])),o=JSON.parse(new TextDecoder("utf8").decode(s));o.buffers=[];for(let t=1;t<n;t++){const n=r[t],s=r[t+1]||e.byteLength;o.buffers.push(new DataView(e.slice(n,s)))}return o}(e),t},e.serializeDefault=function(e){var t;let n;return n=(null===(t=e.buffers)||void 0===t?void 0:t.length)?function(e){const t=[],n=[],r=new TextEncoder;let s=[];void 0!==e.buffers&&(s=e.buffers,delete e.buffers);const o=r.encode(JSON.stringify(e));n.push(o.buffer);for(let e=0;e<s.length;e++){const t=s[e];n.push(ArrayBuffer.isView(t)?t.buffer:t)}const i=n.length;t.push(4*(i+1));for(let e=0;e+1<n.length;e++)t.push(t[t.length-1]+n[e].byteLength);const a=new Uint8Array(t[t.length-1]+n[n.length-1].byteLength),c=new DataView(a.buffer);c.setUint32(0,i);for(let e=0;e<t.length;e++)c.setUint32(4*(e+1),t[e]);for(let e=0;e<n.length;e++)a.set(new Uint8Array(n[e]),t[e]);return a.buffer}(e):JSON.stringify(e),n}}(a||(a={}))}}]);